!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.S=t():e.S=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=46)}([function(e,t,r){"use strict";function n(e){var t=e.type,r=e.exprs,n=e.opts,o=(e.fragments,e.conformFn),i=e.generateFn;if(this.type=t,n&&(this.opts=n),o&&(this.conform=o),i&&(this.generate=i),!r)throw new Error("Expressions are required when constructing a spec.");this.exprs=r}e.exports=n},function(e,t,r){"use strict";function n(e){return e instanceof o}var o=r(3);e.exports=n},function(e,t,r){"use strict";function n(e){return e instanceof o}var o=r(0);e.exports=n},function(e,t,r){"use strict";function n(e,t,r,n){var i=this;if(this.isProblem=!0,4!==arguments.length)throw"Problem arg len err";this.val=e,this.valStringified=JSON.stringify(e,function(e,t){return"function"==typeof t?t.name+"()":t}),this.name="Problem",this.failsPredicate=t,this.rawMsg=n,this.subproblems=r,this.message=o(this,0),this.toString=function(){return i.message}}function o(e,t){var r=e.subproblems,n=(e.val,e.valStringified),a=e.rawMsg;if(Array.isArray(r)){var s;return 0===r.length?a+"; val: "+n:(s=r.map(function(e){return""+i(t)+o(e,t+1)+u(t)}),a+", because "+s.join(", "))}if("object"===("undefined"==typeof r?"undefined":c(r))){s=[];for(var f in r)s.push(""+i(t)+f+": "+o(r[f],t+1)+u(t));return a+", because "+s.join(", ")}}function i(e){return a[e]}function u(e){return a[a.length-e-1]}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a="❰❮❬❨❪﹙₍₎﹚❫❩❭❯❱";e.exports=n},function(e,t,r){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function o(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==n.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}var i=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;e.exports=o()?Object.assign:function(e,t){for(var r,o,c=n(e),a=1;a<arguments.length;a++){r=Object(arguments[a]);for(var s in r)i.call(r,s)&&(c[s]=r[s]);if(Object.getOwnPropertySymbols){o=Object.getOwnPropertySymbols(r);for(var f=0;f<o.length;f++)u.call(r,o[f])&&(c[o[f]]=r[o[f]])}}return c}},function(e,t,r){"use strict";function n(e){return null!==e&&void 0!==e&&e.constructor===String}e.exports=n},function(e,t,r){"use strict";function n(e){return o(e)}var o=r(28);e.exports=n},function(e,t,r){"use strict";function n(e){if(c(e)||a(e)||s(e))return e;if(u(e))return o(e);throw new Error("Expression must either be a Spec object or a predication function that returns true or false. ")}function o(e){return new f({type:y,exprs:[e],fragments:[e],opts:{predicate:e},conformFn:i(e)})}function i(e){return function(t){return e(t)?t:new p(t,e,[],"Predicate "+l(e)+" returns false")}}var u=r(6),c=r(2),a=r(14),s=r(36),f=r(0),p=r(3),l=r(8),y="PRED";e.exports=n},function(e,t,r){"use strict";function n(e){if(e&&e.name)return e.name;var t=e.toString();return t=t.substr("function ".length),t=t.substr(0,t.indexOf("("))}e.exports=n},function(e,t,r){"use strict";function n(e){var t=new a({type:"AND",exprs:[],fragments:e,opts:{conformedExprs:e}});return t.conform=function(e){return O(t,e,{conform:!0})},t}function o(e){var t=e.withLabels;if(t)for(var r=[],n=0;n<t.length;n+=1){var o=t[n].name;if(r.indexOf(o)>=0)throw new Error("Duplicate label detected: "+o);r.push(o)}return!0}function i(e){return v(e,function(t){var r;if(t.withLabels){r=t.withLabels;var n=r.map(function(e){var t=e.expr,r=p(t);return c({},e,{expr:r,spec:void 0,pred:void 0,specRef:void 0,delayedSpec:void 0})}),o={named:!0},i=new a({type:e,exprs:n,opts:o});return i.conform=function(e){return O(i,e,{conform:!0})},i}if(t.withoutLabels){r=t.withoutLabels,n=r.map(function(e){var t;if(e.spec)return t=e.spec,c({},e,{expr:t,spec:void 0});if(e.pred)return t=g(e.pred),c({},e,{expr:t,pred:void 0});if(e.specRef)return t=e.specRef,c({},e,{expr:t,specRef:void 0});if(e.delayedSpec)return t=e.delayedSpec,c({},e,{expr:t,delayedSpec:void 0});throw console.error(e),"!"});var u={named:!1};return i=new a({type:e,exprs:n,opts:u}),i.conform=function(e){return O(i,e,{conform:!0})},i}return i=new a({type:e,exprs:[]}),i.conform=function(e){return O(i,e,{conform:!0})},i})}function u(e){return v(e,function(t){var r,n=t.expr,o=t.opts;if(n.spec)r=n.spec;else if(n.pred)r=g(n.pred);else if(n.specRef)r=n.specRef;else{if(!n.delayedSpec)throw console.error(n),"internal err";r=n.delayedSpec}var i=g(r),u=new a({type:e,exprs:[i],opts:c({},o,{enclosedSpec:i})});return u.conform=function(e){return O(u,e,{conform:!0})},u})}var c=r(4),a=r(0),s=r(2),f=r(6),p=r(11),l=r(32),y=r(5),m=r(72),v=r(37),h=r(14),b=r(36),d=r(52),g=r(7),x=r(12),O=r(10),w=g(s),S=g(m),E=i(d.CAT),j=i(d.OR),_=u(d.Z_OR_M),P=u(d.O_OR_M),T=u(d.Z_OR_O),A=u(d.COLL_OF),R=g(s),C=g(h),F=g(b),N=g(f),k=j({withLabels:[{name:"spec",expr:{spec:R}},{name:"pred",expr:{spec:N}},{name:"delayedSpec",expr:{spec:F}},{name:"specRef",expr:{spec:C}}]}),M=E({withLabels:[{name:"name",expr:{spec:S}},{name:"comment",expr:{spec:T({expr:{pred:y}})}},{name:"expr",expr:{spec:k}}]}),D=j({withLabels:[{name:"withLabels",expr:{spec:j({withoutLabels:[{spec:_({expr:{spec:M}})},{spec:A({expr:{spec:M}})}]})}},{name:"withoutLabels",expr:{spec:_({expr:{spec:k}})}}]}),I=n([{spec:D},{pred:o}]),L=x({args:P({expr:{spec:k}}),ret:s}),$={args:I,ret:w},z=function(e){return{args:E({withLabels:[{name:"expr",expr:{spec:k}},{name:"opts",expr:{spec:T({expr:e})}}]}),ret:w}},q=x(z({pred:l})),Z=q.instrumentConformed(A),V=x($),U=x($),Y=x(z({pred:l})),B=x(z({pred:l})),W=x(z({pred:l})),K=L.instrumentConformed(n),H={cat:V.instrumentConformed(E),or:U.instrumentConformed(j),zeroOrMore:Y.instrumentConformed(_),zeroOrOne:W.instrumentConformed(T),oneOrMore:B.instrumentConformed(P),ExprSpec:k,SpecSpec:R,PredSpec:N,DelayedSpecSpec:F,SpecRefSpec:C,CatFnSpec:V,AndFnSpec:L,OrFnSpec:U,ZeroOrMoreFnSpec:Y,OneOrMoreFnSpec:B,ZeroOrOneFnSpec:W,CollOfSpec:q,collOf:Z,and:K};H.alt=H.or,H["*"]=H.zeroOrMore,H["+"]=H.oneOrMore,H["?"]=H.zeroOrOne,e.exports=H},function(e,t,r){"use strict";function n(e,t,r){var n=r.phase,u=o(e);if(n){if(u[n])return u[n](t,r);throw"!"}var c=u.trailblaze(t,i({phase:"trailblaze"},r));return d(c)?c:u.reconstruct(c,i({phase:"reconstruct"},r))}function o(e){var t=b(e),r=g[t.type];if(!r)throw"unsupported type "+t.type;var o=r(t,n);return o}var i=r(4),u=r(80),c=r(75),a=r(81),s=r(84),f=r(78),p=r(82),l=r(74),y=r(76),m=r(79),v=r(83),h=r(77),b=r(7),d=r(1),g={OR:u,CAT:u,COLL_OF:y,ANY:c,Z_OR_M:u,O_OR_M:u,Z_OR_O:u,PRED:a,WALL:s,SHAPE:p,AND:l,SPEC_REF:v,DELAYED:h,FSPEC:f,MAP_OF:m};e.exports=n},function(e,t,r){"use strict";var n=r(7);e.exports=function(e){if(!e)throw console.error(e),"!";if(e.spec)return e.spec;if(e.pred)return n(e.pred);if(e.specRef)return e.specRef;if(e.delayedSpec)return e.delayedSpec;throw console.error("unsupported:",e),"Not implemented"}},function(e,t,r){"use strict";function n(e){var t=(e.args,e.ret,e.fn,new o({type:"FSPEC",exprs:[],opts:e}));return t.instrumentConformed=function(e){return i(t,e,{conform:!0,instrument:!0})},t.instrument=function(e){return i(t,e,{conform:!1,instrument:!0})},t}var o=r(0),i=r(10);r(8);e.exports=n},function(e,t,r){"use strict";e.exports=function(e){return void 0===e}},function(e,t,r){"use strict";function n(e){return e instanceof o}var o=r(27);e.exports=n},function(e,t,r){"use strict";var n=r(4),o=r(9),i=r(21),u=i.shape,c=i.keys,a=i.mapOf,s=r(57),f=r(58),p=r(47),l=p.wall,y={any:r(51),fspec:r(12),wall:l,spec:l,nullable:s,undefinable:f},m=n({},o,{shape:u,keys:c,mapOf:a},y);e.exports=m},function(e,t,r){"use strict";e.exports={conform:r(17),isValid:r(73),isNamespacePath:r(71),identity:r(35),isProblem:r(1),delayed:r(67),enforce:r(68),isExpr:r(69),isSpec:r(2),isFspec:r(70),isSpecRef:r(14),describe:r(48),deref:r(22)}},function(e,t,r){"use strict";function n(e,t){if(e&&o(e)){var r=e.conform(t);return r}throw new Error("Expression needs to be of type Spec. expression: "+e+", offending value: "+t)}var o=r(2);e.exports=n},function(e,t,r){"use strict";var n=r(96),o=r(90),i="function"==typeof Symbol&&"symbol"==typeof Symbol(),u=Object.prototype.toString,c=function(e){return"function"==typeof e&&"[object Function]"===u.call(e)},a=function(){var e={};try{Object.defineProperty(e,"x",{enumerable:!1,value:e});for(var t in e)return!1;return e.x===e}catch(e){return!1}},s=Object.defineProperty&&a(),f=function(e,t,r,n){(!(t in e)||c(n)&&n())&&(s?Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},p=function(e,t){var r=arguments.length>2?arguments[2]:{},u=n(t);i&&(u=u.concat(Object.getOwnPropertySymbols(t))),o(u,function(n){f(e,n,t[n],r[n])})};p.supportsDescriptors=!!s,e.exports=p},function(e,t,r){"use strict";var n=Function.prototype.toString,o=/^\s*class /,i=function(e){try{var t=n.call(e),r=t.replace(/\/\/.*\n/g,""),i=r.replace(/\/\*[.\s\S]*\*\//g,""),u=i.replace(/\n/gm," ").replace(/ {2}/g," ");return o.test(u)}catch(e){return!1}},u=function(e){try{return!i(e)&&(n.call(e),!0)}catch(e){return!1}},c=Object.prototype.toString,a="[object Function]",s="[object GeneratorFunction]",f="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(f)return u(e);if(i(e))return!1;var t=c.call(e);return t===a||t===s}},function(e,t,r){"use strict";var n=r(31),o=r(63),i=r(29),u=r(61),c=r(28),a=r(32),s=r(59),f=r(33),p=r(5),l=r(62),y=r(60),m=r(64),v=Array.isArray,h={isNull:r(30),isUndefined:r(13),notEmpty:r(65),isBool:u,isBoolean:u,isFn:c,isFunction:c,isNum:n,isNumber:n,isNatInt:o,isNaturalNumber:o,isInt:i,isInteger:i,isObj:a,isObject:a,isStr:p,isString:p,isArray:v,isArr:v,equal:s,equals:s,equalsTo:s,eq:s,oneOf:f,isDate:l,instanceOf:y,isUuid:m,isUUID:m};h.default=h,e.exports=h},function(e,t,r){"use strict";function n(e){return a(e)}function o(e){if(f(e))throw e;var t=e.keyExpression,r=e.valExpression,n=new u({type:x,exprs:[],opts:{keyExpression:t,valExpression:r}});return n.conform=function(e){return b(n,e,{conform:!0})},n}function i(e){if(f(e))throw e;var t=new u({type:g,exprs:[],fragments:[],opts:{conformedArgs:e}});return t.conform=function(e){return b(t,e,{conform:!0})},t}var u=r(0),c=r(2),a=r(5),s=r(33),f=r(1),p=r(7),l=r(9),y=l.cat,m=l.or,v=l.zeroOrMore,h=l.ExprSpec,b=r(10),d=r(12),g="SHAPE",x="MAP_OF",O=i({shapeArgs:{optionalFields:{opt:{fieldDefs:{fields:{fields:{keyValExprPair:{keyExpression:{spec:p(a)},valExpression:{spec:m("valExpressionOnly",h,"keyValExprPair",y("keyExpression",h,"valExpression",h))}}}}}}}}}),w=v(n),S=m("keyList",w,"fieldDefs",O),E=i({shapeArgs:{optionalFields:{opt:{fieldDefs:{fields:{requiredFields:{keyValExprPair:{keyExpression:{pred:s("req","required")},valExpression:{spec:S}}},optionalFields:{keyValExprPair:{keyExpression:{pred:s("opt","optional")},valExpression:{spec:S}}}}}}}}}),j=d({args:y("keyExpression",h,"valExpression",h),ret:c}),_=d({args:y("shapeArgs",E),ret:c}),P=_.instrumentConformed(i),T=j.instrumentConformed(o);e.exports={shape:P,keys:P,mapOf:T,ShapeFnSpec:_,MapOfFnSpec:j}},function(e,t,r){"use strict";e.exports=function(e){for(var t=e;t.get;)t=t.get();return t}},function(e,t,r){"use strict";var n=r(38),o=r(18).supportsDescriptors;e.exports=function(e){var t=o?Object.defineProperty:function(e,t,r){e[t]=r.value},r=this;if(null===e||"undefined"==typeof e)throw new TypeError("`Array.from` requires an array-like object, not `null` or `undefined`");var i,u,c=n.ToObject(e);if("undefined"!=typeof arguments[1]){if(i=arguments[1],!n.IsCallable(i))throw new TypeError("When provided, the second argument to `Array.from` must be a function");arguments.length>2&&(u=arguments[2])}for(var a,s,f=n.ToLength(c.length),p=n.IsCallable(r)?n.ToObject(new r(f)):new Array(f),l=0;l<f;)a=c[l],s=i?"undefined"==typeof u?i(a,l):n.Call(i,u,[a,l]):a,t(p,l,{configurable:!0,enumerable:!0,value:s,writable:!0}),l+=1;return p.length=f,p}},function(e,t,r){"use strict";var n=r(18),o=r(23),i=r(25),u=r(50),c=function(e){return o.apply(this||Array,arguments)};n(c,{getPolyfill:i,implementation:o,shim:u}),e.exports=c},function(e,t,r){"use strict";var n=r(38),o=r(23),i=function(e){try{return e(),!0}catch(e){return!1}};e.exports=function(){var e=n.IsCallable(Array.from)&&i(function(){Array.from({length:-(1/0)})})&&!i(function(){Array.from([],void 0)});return e?Array.from:o}},function(e,t,r){"use strict";function n(e){var t=e.getFn;this.type="DELAYED",this.get=t;var r=this;r.instrument=function(e){var r=t();return r.instrument(e)},r.instrumentConformed=function(e){var r=t();return r.instrumentConformed(e)},r.conform=function(e){var r=t();return r.conform(e)}}var o=r(0);n.prototype=Object.create(o.prototype),e.exports=n},function(e,t,r){"use strict";function n(e){var t=e.ref,r=e.getFn,n=e.conformFn;this.type="SPEC_REF",this.get=r,this.conform=n,this.ref=t}var o=r(0);n.prototype=Object.create(o.prototype),e.exports=n},function(e,t,r){"use strict";function n(e){var t={};return(e||!1)&&"[object Function]"===t.toString.call(e)}e.exports=n},function(e,t,r){"use strict";function n(e){return"number"==typeof e&&(Math.floor(e)===e&&e!==1/0)}e.exports=n},function(e,t,r){"use strict";function n(e){return null===e}e.exports=n},function(e,t,r){"use strict";function n(e){return"number"==typeof e}e.exports=n},function(e,t,r){"use strict";function n(e){return"object"===("undefined"==typeof e?"undefined":o(e))&&null!==e}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=n},function(e,t,r){"use strict";var n=r(24);e.exports=function(){var e;if(1===arguments.length&&Array.isArray(arguments[0]))e=arguments[0];else{if(!(arguments.length>0))throw new Error("Items list is required.");e=n(arguments)}return function(t){return e.indexOf(t)>=0}}},function(e,t,r){"use strict";function n(e){return!!/^[^.@%\&\*#]+/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.NamespaceObjSpec=t.MetaFnSpec=t.isNamespacePath=t.NamespaceFnSpec=t.isSpecRef=void 0;var o=r(15),i=r(16),u=r(20),c=(0,i.delayed)(function(){return o.ExprSpec}),a=(0,o.fspec)({args:(0,o.or)("register",(0,o.cat)("nsPath",i.isNamespacePath,"expression",c),"retrieve",(0,o.cat)("nsPath",i.isNamespacePath)),ret:o.ExprSpec}),s=(0,o.fspec)({args:(0,o.cat)("source",(0,o.or)("namespacePath",i.isNamespacePath,"expression",i.isExpr),"metaObj",u.isObj),ret:i.isExpr}),f=(0,o.shape)({optional:{subNamespaces:[n,(0,i.delayed)(function(){return f})],".meta":u.isObj,".expr":i.isExpr}});t.isSpecRef=i.isSpecRef,t.NamespaceFnSpec=a,t.isNamespacePath=i.isNamespacePath,t.MetaFnSpec=s,t.NamespaceObjSpec=f},function(e,t,r){"use strict";function n(e){return e}e.exports=n},function(e,t,r){"use strict";var n=r(26);e.exports=function(e){return e instanceof n}},function(e,t,r){"use strict";function n(e,t,r){return e?new Function("action","return function "+e+(r||"")+"(){ return action.apply(this, arguments); };")(t):t}e.exports=n},function(e,t,r){"use strict";var n=Object.prototype.toString,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,i=o?Symbol.prototype.toString:n,u=r(40),c=r(39),a=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,s=r(86),f=r(42),p=r(41),l=r(87),y=r(89),m=parseInt,v=r(92),h=v.call(Function.call,String.prototype.slice),b=v.call(Function.call,RegExp.prototype.test,/^0b[01]+$/i),d=v.call(Function.call,RegExp.prototype.test,/^0o[0-7]+$/i),g=["","​","￾"].join(""),x=new RegExp("["+g+"]","g"),O=v.call(Function.call,RegExp.prototype.test,x),w=/^[\-\+]0x[0-9a-f]+$/i,S=v.call(Function.call,RegExp.prototype.test,w),E=["\t\n\v\f\r   ᠎    ","         　\u2028","\u2029\ufeff"].join(""),j=new RegExp("(^["+E+"]+)|(["+E+"]+$)","g"),_=v.call(Function.call,String.prototype.replace),P=function(e){return _(e,j,"")},T=r(85),A=r(94),R=s(s({},T),{Call:function(e,t){var r=arguments.length>2?arguments[2]:[];if(!this.IsCallable(e))throw new TypeError(e+" is not a function");return e.apply(t,r)},ToPrimitive:y,ToNumber:function(e){var t=l(e)?e:y(e,"number");if("symbol"==typeof t)throw new TypeError("Cannot convert a Symbol value to a number");if("string"==typeof t){if(b(t))return this.ToNumber(m(h(t,2),2));if(d(t))return this.ToNumber(m(h(t,2),8));if(O(t)||S(t))return NaN;var r=P(t);if(r!==t)return this.ToNumber(r)}return Number(t)},ToInt16:function(e){var t=this.ToUint16(e);return t>=32768?t-65536:t},ToInt8:function(e){var t=this.ToUint8(e);return t>=128?t-256:t},ToUint8:function(e){var t=this.ToNumber(e);if(u(t)||0===t||!c(t))return 0;var r=f(t)*Math.floor(Math.abs(t));return p(r,256)},ToUint8Clamp:function(e){var t=this.ToNumber(e);if(u(t)||t<=0)return 0;if(t>=255)return 255;var r=Math.floor(e);return r+.5<t?r+1:t<r+.5?r:r%2!==0?r+1:r},ToString:function(e){if("symbol"==typeof e)throw new TypeError("Cannot convert a Symbol value to a string");return String(e)},ToObject:function(e){return this.RequireObjectCoercible(e),Object(e)},ToPropertyKey:function(e){var t=this.ToPrimitive(e,String);return"symbol"==typeof t?i.call(t):this.ToString(t)},ToLength:function(e){var t=this.ToInteger(e);return t<=0?0:t>a?a:t},CanonicalNumericIndexString:function(e){if("[object String]"!==n.call(e))throw new TypeError("must be a string");if("-0"===e)return-0;var t=this.ToNumber(e);return this.SameValue(this.ToString(t),e)?t:void 0},RequireObjectCoercible:T.CheckObjectCoercible,IsArray:Array.isArray||function(e){return"[object Array]"===n.call(e)},IsConstructor:function(e){return"function"==typeof e&&!!e.prototype},IsExtensible:function(e){return!Object.preventExtensions||!l(e)&&Object.isExtensible(e)},IsInteger:function(e){if("number"!=typeof e||u(e)||!c(e))return!1;var t=Math.abs(e);return Math.floor(t)===t},IsPropertyKey:function(e){return"string"==typeof e||"symbol"==typeof e},IsRegExp:function(e){if(!e||"object"!=typeof e)return!1;if(o){var t=e[Symbol.match];if("undefined"!=typeof t)return T.ToBoolean(t)}return A(e)},SameValueZero:function(e,t){return e===t||u(e)&&u(t)},Type:function(e){return"symbol"==typeof e?"Symbol":T.Type(e)},SpeciesConstructor:function(e,t){if("Object"!==this.Type(e))throw new TypeError("Assertion failed: Type(O) is not Object");var r=e.constructor;if("undefined"==typeof r)return t;if("Object"!==this.Type(r))throw new TypeError("O.constructor is not an Object");var n=o&&Symbol.species?r[Symbol.species]:void 0;if(null==n)return t;if(this.IsConstructor(n))return n;throw new TypeError("no constructor found")}});delete R.CheckObjectCoercible,e.exports=R},function(e,t){var r=Number.isNaN||function(e){return e!==e};e.exports=Number.isFinite||function(e){return"number"==typeof e&&!r(e)&&e!==1/0&&e!==-(1/0)}},function(e,t){e.exports=Number.isNaN||function(e){return e!==e}},function(e,t){e.exports=function(e,t){var r=e%t;return Math.floor(r>=0?r:r+t)}},function(e,t){e.exports=function(e){return e>=0?1:-1}},function(e,t){e.exports=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e}},function(e,t,r){"use strict";e.exports="0.0.21"},function(e,t,r){"use strict";(function(e){function n(e){var t=function(t){var r=s;r=t?t+e:e;var n=y.get(s,o(r));return n?m(n[".expr"],n[".meta"]):void 0},r=new v({ref:e,getFn:t,conformFn:null});return r.conform=function(e){var r=t();return O(r,e,{conform:!0})},r}function o(e){return e.replace(/^(.+)(\/)(.+)$/,"$1.$3").replace(/^\//,"")}function i(e){var t;if(e.register){var r=e.register,n=r.nsPath,o=r.expression;t=u(n,o)}else if(e.retrieve){var i=e.retrieve.nsPath,c=S(i);t=c}return t}function u(e,t){if(t){if(t.spec||t.pred){var r=t.spec||t.pred;return j(e,{".expr":r}),r}throw console.error(t),"!"}throw console.error(t),"!"}function c(){return s||a(),s}function a(){s=e[_]={}}Object.defineProperty(t,"__esModule",{value:!0}),t.meta=t.clearRegistry=t.getRegistry=void 0;var s,f=r(15),p=r(16),l=r(34),y=r(98),m=r(4),v=r(27),h=r(21),b=h.shape,d=r(2),g=r(6),x=r(13),O=r(10),w=r(7),S=(0,f.fspec)({args:(0,f.cat)(p.isNamespacePath),ret:p.isSpecRef}).instrument(n),E=b({req:{".expr":(0,f.or)(d,g)}}),j=(0,f.fspec)({args:(0,f.cat)(p.isNamespacePath,E),ret:x}).instrument(function(e,t){c();var r=y.get(s,o(e));y.set(s,o(e),m({},r,t))}),_="___SPECKY_REGISTRY",P=l.MetaFnSpec.instrumentConformed(function(e){var t=e.source,r=t.namespacePath,n=t.expression,i=e.metaObj;if(r){var u=y.get(s,o(r)),c=u&&u[".meta"];return y.set(s,o(r),m({},u,{".meta":m({},c,i)})),S(r)}if(n){var a=w(n);a.meta=m(a.meta,i)}});c();var T=function(){return s},A=l.NamespaceFnSpec.instrumentConformed(i);A.clearRegistry=a,A.getRegistry=T,A.meta=P,t.getRegistry=T,t.clearRegistry=a,t.meta=P,t.default=A}).call(t,r(49))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(45),i=n(o),u=r(4),c=r(15),a=r(16),s=r(20),f={Problem:r(3),Spec:r(0)},p=u(i.default,c,a,f,s);p.VERSION=r(44),e.exports=p,t.default=p},function(e,t,r){"use strict";function n(e){var t=i(e),r=new o({type:"WALL",exprs:[t],opts:{enclosedSpec:t}});return r.conform=function(e){return f(r,e,{conform:!0})},r}var o=r(0),i=r(7),u=r(9),c=u.cat,a=u.ExprSpec,s=r(12),f=r(10),p=s({args:c(a),ret:a}),l=p.instrument(n);e.exports={WallFnSpec:p,wall:l}},function(e,t,r){"use strict";function n(e,t){return o(e,t).join("")}function o(e,t){if(t){var r=t(e);if(r)return r}if(u(e))return[a(e),"()"];if("PRED"===e.type)return o(e.opts.predicate,t);if(c(e))return"DELAYED"===e.type||"SPEC_REF"===e.type?o(e.get(),t):[e.type.toLowerCase(),"("].concat(i(e,t)).concat([")"]);throw console.error(e),new Error("Argument must be an expression")}function i(e,t){var r=l[e.type](e);return r.reduce(function(e,r){return s(r)?e.concat(r):e.concat(o(r,t))},[])}var u=r(6),c=r(2),a=r(8),s=r(5),f=function(e){var t=e.opts.named,r=e.exprs;return 0===r.length?[]:t?r.reduce(function(e,t,n){var o=t.name,i=t.expr;return e.concat(['"'+o+'"',", ",i]).concat(n<r.length-1?[", "]:[])},[]):r.reduce(function(e,t,n){var o=t.expr;return e.concat([o]).concat(n<r.length-1?[", "]:[])},[])},p=function(e){var t=e.opts.enclosedSpec;return[t]},l={PRED:function(e){e.opts.predicate;return[pred]},WALL:function(e){var t=e.opts.enclosedSpec;return[t]},AND:function(e){var t=e.exprs;return t},CAT:f,OR:f,Z_OR_M:p,O_OR_M:p,Z_OR_O:p,ANY:function(){return[]},MAP_OF:function(){return[]},SHAPE:function(){return[]},FSPEC:function(e){var t=e.args,r=e.ret,n=e.fn;return[].concat(t?["args: ",t]:[]).concat(r?["ret: ",r]:[]).concat(n?["fn: ",a(n),"()"]:[])}};e.exports=n},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";var n=r(18),o=r(25);e.exports=function(){var e=o();return n(Array,{from:e},{from:function(){return Array.from!==e}}),e}},function(e,t,r){"use strict";function n(){return new o({type:u,exprs:[],conformFn:i})}var o=r(0),i=r(35),u="ANY";e.exports=n},function(e,t,r){"use strict";e.exports={CAT:"CAT",OR:"OR",Z_OR_M:"Z_OR_M",Z_OR_O:"Z_OR_O",O_OR_M:"O_OR_M",PRED:"PRED",COLL_OF:"COLL_OF"}},function(e,t,r){"use strict";function n(e){e=c(e);var t;if(null===e.type)throw"Spec has no type: "+e;t=e.type in s?s[e.type]:s.PRED;var r=t(e);return r}function o(e){return new u({type:"ROOT",exprs:[e]})}var i=r(54),u=r(0),c=r(22),a=function(e){for(var t=0,r=[e.head],n=[];r.length>0;){var o=r.pop();null===o.index&&(o.index=t,t++,o.transitions.forEach(function(e){r.push(e.target)}),n.push(o))}return n},s={},f=function(e){return function(t){var r=n(t.exprs[0]);return e(r)}},p=function(e){return function(t){var r=t.exprs.map(function(e){var t=n(e.expr);return t.name=e.name,t});return e(r)}};["ROOT","Z_OR_M","O_OR_M","Z_OR_O"].forEach(function(e){s[e]=f(i[e])}),["OR","CAT"].forEach(function(e){s[e]=p(i[e])}),s.PRED=function(e){return i.PRED(e)};var l=function(e){var t,r=o(e),i=n(r),u=a(i),c=u.length,s={};return u.forEach(function(e){0===e.transitions.length&&(t=e.index);var r={};e.transitions.forEach(function(e){r[e.target.index]=e.spec}),s[e.index.toString()]=r}),{initialState:0,numStates:c,finalState:t,transitions:s,expression:e}};e.exports=l},function(e,t,r){"use strict";function n(e,t){return{transitions:null===e?[]:e,index:t||null}}function o(e,t){return{spec:e,target:t}}function i(e,t){return{head:e,tails:t}}function u(e,t,r){var n=i(t,r);return n.name=e,n}function c(e,t){e.forEach(function(e){e.target=t})}function a(){return{isEpsilon:!0}}function s(e,t,r,n){var o=a();return o.name=t,o.op=r,o.group=n,o.dir=e,o}function f(e,t){var r=o(e,t.head),u=n([r]),c=i(u,t.tails);return c}function p(e,t){var r=o(e,null),u=n([r],null);c(t.tails,u);var a=i(t.head,[r]);return a}var l={};l.PRED=function(e){var t=o(e,null),r=n([t],null),u=[t],c=i(r,u);return c},l.OR=function(e){e=e.map(function(e){var t=s("out",e.name,"OR"),r=o(t,null),i=n([r]);c(e.tails,i);var a=o(s("in",e.name,"OR"),e.head),f=n([a]),p=u(e.name,f,[r]);return p});var t=function(e,t){var r=e.head.transitions.concat(t.head.transitions),o=n(r),i=e.tails.concat(t.tails),c=u(e.name,o,i);return c},r=e.reduce(t);return r=f(s("enter",null,"OR","para_in"),r),r=p(s("exit",null,"OR","para_out"),r)},l.CAT=function(e){var t=function(e,t){c(e.tails,t.head);var r=e.head,n=t.tails,o=i(r,n);return o};e=e.map(function(e){var t=o(s("maybe_out",e.name,"CAT"),null),r=n([t]);c(e.tails,r);var i=e.head.transitions.map(function(t){var r=n([t]),i=o(s("maybe_in",e.name,"CAT"),r);return i}),a=n(i),f=u(e.name,a,[t]);return f});var r;if(e.length>0)r=e.reduce(t);else{var l=a(),y=o(l,null),m=n([y]);r=i(m,[y])}return r=f(s("maybe_enter",null,"CAT","in"),r),r=p(s("maybe_exit",null,"CAT","out"),r)},l.Z_OR_M=function(e){var t="Z_OR_M",r=o(s("loop",null,t),e.head),u=o(a(),null),l=n([r,u]);c(e.tails,l);var y=i(l,[u]),m=y.head.transitions.map(function(e){var t=n([e]),r=o(a(),t);return r}),v=n(m);return y=i(v,y.tails),y=f(s("maybe_enter",null,t,"in"),y),y=p(s("maybe_exit",null,t,"out"),y)},l.O_OR_M=function(e){var t="O_OR_M",r=o(s("loop",null,t),e.head),u=o(a(),null),l=n([r,u]);c(e.tails,l);var y=i(e.head,[u]);return y=f(s("maybe_enter",null,t,"in"),y),y=p(s("maybe_exit",null,t,"out"),y)},l.Z_OR_O=function(e){var t="Z_OR_O",r=o(s("loop",null,t),e.head),u=o(a(),null),c=n([r,u]),l=e.tails.concat([u]),y=i(c,l);return y=f(s("maybe_single_enter",null,t,"in"),y),y=p(s("maybe_single_exit",null,t,"out"),y)},l.ROOT=function(e){var t=n(null,null);return c(e.tails,t),i(e.head,[])},e.exports=l},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){this.value=e}function i(e){this.fragment=e}function u(e){this.fragment=e}function c(e,t){this.fragment=t,this.name=e}function a(e){this.fragment=e}function s(e,t){this.fragment=t,this.name=e}function f(){}function p(){}function l(){}function y(e){this.name=e}function m(e,t,r){var c,m=r.conform,x=e.inputType,O=[];if(e.forEach(function(e){if(e.move)switch(e.move.dir){case"maybe_enter":O.push(new l);break;case"maybe_exit":for(var i=void 0,u=new p;!((i=O.pop())instanceof l);)u=b(x,m,u,i);O.push(u);break;case"maybe_single_enter":O.push(new l);break;case"maybe_single_exit":var c=O.pop(),d=void 0;c instanceof l?d=new f:(d=c,O.pop()),O.push(d);break;case"enter":break;case"exit":var w=O.pop(),S=void 0;S=m&&w instanceof s?new a(g({},n({},w.name,w.fragment))):w,O.push(S);break;case"maybe_in":m&&e.move.name&&O.push(new y(e.move.name));break;case"loop":break;case"maybe_out":if(m&&e.move.name){var E=O.pop(),j=O.pop();O.push(v(j,E))}break;case"in":m&&e.move.name&&O.push(new y(e.move.name));break;case"out":if(m&&e.move.name){var _=O.pop(),P=O.pop();O.push(h(P,_))}break;case"spec":var T=t(e.spec,e.guide,r);O.push(new o(T));break;default:throw console.error(e),"FUUU"}}),1!==O.length)throw console.error("valStack",O),"!";c=O.pop();var w=void 0;return w=c instanceof i?c.fragment:c instanceof u?c.fragment:c instanceof a?c.fragment:c instanceof o?c.value:c instanceof p?d(x,[]):c}function v(e,t){if(t instanceof f)return new c(e.name,void 0);if(t instanceof u)return new c(e.name,t.fragment);if(t instanceof i||t instanceof a)return new c(e.name,t.fragment);if(t instanceof o)return new c(e.name,t.value);if(t instanceof p)return new o({});throw console.error(t),"c!!!"}function h(e,t){if(t instanceof f)return new s(e.name,void 0);if(t instanceof a)return new s(e.name,t.fragment);if(t instanceof i)return new s(e.name,t.fragment);if(t instanceof u)return new s(e.name,t.fragment);if(t instanceof o)return new s(e.name,t.value);if(t instanceof p)return new o({});throw console.error(t),"c!!!alt"}function b(e,t,r,s){if(t&&s instanceof c){var l=void 0;if(r instanceof f)l={};else if(r)if(r instanceof p)l={};else if(r instanceof u)l=r.fragment;else{if(!(r instanceof a))throw console.error(r,s),"!!acc_fl_np";l=r.fragment}else l={};return new u(g({},n({},s.name,s.fragment),l))}var y=void 0,m=void 0;if(r instanceof f)m=[];else if(r)if(r instanceof i)m=r.fragment;else{if(!(r instanceof p))throw console.error(r),"!!acc_fl";m=[]}else m=[];if(s instanceof o)y=[s.value];else if(s instanceof i)y=s.fragment;else if(s instanceof u)y=[s.fragment];else if(s instanceof a)y=[s.fragment];else if(s instanceof f)y=[];else{if(!(s instanceof p))throw console.error(s),"cc!!";y=[]}var v=new i(d(e,y.concat(m)));return v}function d(e,t){return"string"===e&&Array.isArray(t)?t.join(""):t}var g=r(4);e.exports=m},function(e,t,r){"use strict";function n(e,t,r,n){for(var a={matched:!1,chain:null},s="undefined"==typeof t?"undefined":u(t),f={state:0,offset:0,input:[t],groupCount:0,arrayed:!1},p=[f];p.length>0;){var l=p.shift(),y=l.offset,m=l.input;if(l.state===e.finalState&&y===m.length)return a.matched=!0,a.chain=i(e,l,s),a;for(var v in e.transitions[l.state]){var h=parseInt(v),b=o(e,h,l,r,n);c(b)?a.lastProblem=b:b&&p.push(b)}}return a}function o(e,t,r,n,o){var i=r.input,u=r.offset,s=r.groupCount,f=r.arrayed,p=i[u],l=e.transitions[r.state][t];"in"===l.group?(0===s&&(Array.isArray(i[0])||a(i[0]))&&(i=i[0],u=0,f=!0),s+=1):"out"===l.group&&(s-=1,0===s&&(f&&(u=u===i.length?1:0,i=[i]),f=!1));var y,m;y=l.isEpsilon?u:u+1;var v,h;if(y<=i.length){if(l.isEpsilon)return m=l.dir?{dir:l.dir,name:l.name,op:l.op,group:l.group}:null,h={input:i,groupCount:s,arrayed:f,state:t,offset:y,move:m,spec:l,prev:r,isEpsilon:!0};if(v=n(l,p,o),c(v))return v;if(u<i.length)return m={dir:"spec"},h={input:i,groupCount:s,arrayed:f,state:t,offset:y,move:m,prev:r,isEpsilon:!1,spec:l,guide:v}}}function i(e,t,r){for(var n,o=[],i=t;i;){if(!n||i.state!==n.state&&i.move){var u={isEpsilon:i.isEpsilon,move:i.move,state:i.state};i.isEpsilon||(u.guide=i.guide,u.spec=i.spec),o.unshift(u)}n=i,i=i.prev}return o.inputType=r,o}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=r(1),a=r(5);e.exports=n},function(e,t,r){"use strict";function n(e){return i(u,e)}var o=r(9),i=o.or,u=r(30);e.exports=n},function(e,t,r){"use strict";function n(e){return i(u,e)}var o=r(9),i=o.or,u=r(13);
e.exports=n},function(e,t,r){"use strict";e.exports=function(e){return function(t){return t===e}}},function(e,t,r){"use strict";e.exports=function(e){return function(t){return t instanceof e}}},function(e,t,r){"use strict";function n(e){return"boolean"==typeof e}e.exports=n},function(e,t,r){"use strict";e.exports=function(e){return e&&e instanceof Date&&!isNaN(e.valueOf())}},function(e,t,r){"use strict";function n(e){return o(e)&&e>=0}var o=r(29);e.exports=n},function(e,t,r){"use strict";e.exports=function(e){return!!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}},function(e,t,r){"use strict";e.exports=function(e){return!!e&&0!==e.length}},function(e,t,r){"use strict";function n(e){throw e}e.exports=n},function(e,t,r){"use strict";function n(e){return new o({getFn:e})}var o=r(26);e.exports=n},function(e,t,r){"use strict";var n=r(1),o=r(17);e.exports=function(e,t){var r=o(e,t);if(n(r))throw r}},function(e,t,r){"use strict";function n(e){return o(e)||i(e)||u(e)}var o=r(6),i=r(2),u=r(14);e.exports=n},function(e,t,r){"use strict";function n(e){return o(e)&&"FSPEC"===e.type}var o=r(2);e.exports=n},function(e,t,r){"use strict";function n(e){return o(e)&&/^[a-zA-Z0-9\-_\.]*\/([a-zA-Z0-9\-_]+)$/.test(e)}var o=r(5);e.exports=n},function(e,t,r){"use strict";var n=r(5);e.exports=function(e){return n(e)}},function(e,t,r){"use strict";function n(e,t){if(e)return u(e)?!o(c(e,t)):!i(e)||e(t);throw new Error("Spec is required")}var o=r(1),i=r(6),u=r(2),c=r(17);e.exports=n},function(e,t,r){"use strict";function n(e,t){function r(e,r){for(var n=e,u=[],s=[],f=0;f<a.length;f+=1){var p=0===f?e:u[f-1];if(n=t(a[f],p,r),i(n)){s.push(n);break}var l=t(a[f],n,c({},r,{phase:"reconstruct"}));u.push(l)}return 0===s.length?{conforms:u}:new o(e,a,s,"One or more expressions failed AND test")}function n(e){var t=e.conforms;return t[a.length-1]}var a=e.opts.conformedExprs.map(u);return{trailblaze:r,reconstruct:n}}var o=r(3),i=r(1),u=r(11),c=r(4);e.exports=n},function(e,t,r){"use strict";function n(){return{trailblaze:o,reconstruct:o}}function o(e){return e}e.exports=n},function(e,t,r){"use strict";function n(e,t){function r(r,n){if(Array.isArray(r)){if(a){var s=a.maxCount,f=a.minCount;if(u(s)&&r.length>s)return new o(r,e,l,"collOf: collection size "+r.length+" exceeds maxCount "+s+".");if(u(f)&&r.length<f)return new o(r,e,l,"collOf: collection size "+r.length+" is less than minCount "+f+".")}for(var p=[],l=[],y=0;y<r.length;y+=1){var m=t(c,r[y],n);if(i(m)){l.push(m);break}p.push(m)}return l.length>0?new o(r,e,l,"One or more elements failed collOf test"):p}return new o(r,e,[],"collOf expects an array")}function n(e,r){for(var n=[],o=0;o<e.length;o+=1){var i=t(c,e[o],r);n.push(i)}return n}var c=e.exprs[0],a=e.opts;return{trailblaze:r,reconstruct:n}}var o=r(3),i=r(1),u=r(31);e.exports=n},function(e,t,r){"use strict";function n(e,t){function r(r,n){var o=e.get();if(o)return t(o,r,n)}return{trailblaze:r,reconstruct:r}}e.exports=n},function(e,t,r){"use strict";function n(e,t){function r(e){return e}function n(e,t){if(!e)throw new Error("A function must be specified for instrumentation.");var r=t.conform,n=t.instrument;return r&&n?p(e,t):n?f(e,t):void 0}function f(e,t){var r=u(e),n=l(r,e,t),o=c(r,n,"__instrumented");return o}function p(e,t){var r=u(e),n=h(r,e,t),o=c(r,n,"__conformed");return o}function l(e,r){return function(){var n=s(arguments),o=m(r,e,n),i=r.apply(this,o),u=v(r,e,i),c=d?t(d,n,{conform:!0,instrument:!0}):n,a=void 0;return a=g?t(g,i,{conform:!0,instrument:!0}):i,y(e,r,x,c,a),u}}function y(t,r,n,o,u){if(n){var c=n.call(null,o,u);if(!c){var s=new i(r,e,[],"Function "+t+" failed valiation on argument-return value relation");a(s)}}}function m(r,n,u){if(!d)return u;var c=t(d,u,{phase:"trailblaze"});if(!o(c))return t(d,c,{phase:"reconstruct",conform:!1,instrument:!0});var s=new i(u,e,[c],"Arguments "+JSON.stringify(u)+" for function "+n+" failed validation");a(s)}function v(r,n,u){if(!g)return u;var c=t(g,u,{phase:"trailblaze"});if(!o(c)){var s=t(g,c,{phase:"reconstruct",instrument:!0,conform:!1});return s}var f=new i(u,e,[c],"Return value "+u+" for function "+n+" is not valid.");a(f)}function h(e,r){return function(){var n=s(arguments),u=t(d,n,{conform:!0,instrument:!0});if(o(u)){var c=new i(n,d,[u],"Arguments "+JSON.stringify(n)+" for function "+e+" is not valid");a(c)}var f=r.call(this,u),p=t(g,f,{conform:!0,instrument:!0});return v(r,e,f),y(e,r,x,u,p),f}}var b=e.opts,d=b.args,g=b.ret,x=b.fn;return{trailblaze:r,reconstruct:n}}var o=r(1),i=r(3),u=r(8),c=r(37),a=r(66),s=r(24);e.exports=n},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){function r(r,o){for(var i in r)if(r.hasOwnProperty(i)){if(p){var a=t(p,i,o);if(u(a))return new c(r,e,n({},i,a),"mapOf: key "+i+" failed validation")}if(l){var s=t(l,r[i],o);if(u(s))return new c(r,e,n({},i,s),"mapOf: value for key "+i+" failed validation")}}return{val:r}}function o(e){var t=e.val;return t}var a=e.opts,s=a.keyExpression,f=a.valExpression,p=s&&i(s),l=f&&i(f);return{trailblaze:r,reconstruct:o}}var i=r(11),u=r(1),c=r(3);e.exports=o},function(e,t,r){"use strict";function n(e,t){function r(r,n){a||(a=u(e));var i=o(a,r,t,n),s=i.chain,f=i.matched,p=i.lastProblem;if(f===!0)return s;var l=[];return p&&l.push(p),new c(r,e,l,"Spec "+e.type+" did not match value")}function n(e,r){var n=i(e,t,r);return n}var a;return{trailblaze:r,reconstruct:n}}var o=r(56),i=r(55),u=r(53),c=r(3);e.exports=n},function(e,t,r){"use strict";function n(e){function t(t){var r=e.exprs[0];return r(t)?t:new i(t,e,[],"Predicate "+o(r)+"() returns false")}function r(e){return e}return{trailblaze:t,reconstruct:r}}var o=r(8),i=r(3);e.exports=n},function(e,t,r){"use strict";function n(e,t){function r(r,n){function o(e){e:for(var o in e.fields)if(e.fields.hasOwnProperty(o)){var i=e.fields[o],u=c(r,o,i,t,n),a=u.noop,s=u.problem,f=u.singleMatch,p=u.groupMatch;if(s){h.push([o,s]);break e}if(f)b.singles.push(f);else if(p)p.matchedKeys.length>0&&b.groups.push(p);else if(!a)throw"!"}}if(["object","function"].indexOf("undefined"==typeof r?"undefined":f(r))<0)return new m(r,e,[],"Value is not an object");a||(a=i(l,v,t,n));var u=a(r);if(p(u))return u;var y,h=[],b={val:r,groups:[],singles:[]};l&&(y=l.fieldDefs),y&&o(y);var d;if(v&&(d=v.fieldDefs),d&&o(d,!0),h.length>0){for(var g={},x=[],O=0;O<h.length;O++){var w=s(h[O],2),S=w[0],E=w[1];x.push(S),g[S]=E}var j=new m(r,e,g,"At least one property failed validation: "+x.join(", "));return j}return b}function n(e,r){var n,i=e.val,c=e.singles,a=e.groups,s={walkOpts:r},f=r.instrument;return n=f?i:y({},i),c.forEach(function(e){o(n,e,t,r)}),a.forEach(function(e){var i=e.name,c=e.matchedKeys;if(s){n[i]={};var a=[];c.forEach(function(e){o(n[i],e,t,r),a.push(e.key)}),u(n,a)}else c.forEach(function(e){o(n,e,t,r)})}),n}var a,l,v,h=e.opts.conformedArgs.shapeArgs,b=h.requiredFields,d=h.optionalFields;return b&&(l=b.req||b.required),d&&(v=d.opt||d.optional),{trailblaze:r,reconstruct:n}}function o(e,t,r,n){var o=t.key,i=t.spec,u=t.guide;e[o]=r(i,u,n)}function i(e,t,r,n){return function(t){if(e){var o,i=[],u=e.fieldDefs,c=e.keyList;if(u){o=[];for(var s in u.fields)u.fields.hasOwnProperty(s)&&o.push(s)}else{if(!c)throw"unsupported";o=[].concat(c)}for(var f=0;f<o.length;f++){var l=o[f];if(u&&u.fields[l].keyValExprPair){var y=!1;e:for(var v in t)if(t.hasOwnProperty(v)){var h=a(v,u.fields[l].keyValExprPair.keyExpression,r,n);if(!p(h)){y=!0;break e}}y||i.push(l)}else if(u&&u.fields[l].valExpressionOnly)if(t.hasOwnProperty(l)){var b=a(t[l],u.fields[l].valExpressionOnly,r,n);p(b)&&i.push(l)}else i.push(l);else{if(!c)throw"!";void 0===t[l]&&i.push(l)}}if(i.length>0)return new m(t,e,[],"req: keys required: "+i.join(", "))}return t}}function u(e,t){for(var r=0;r<t.length;r++)delete e[[t[r]]]}function c(e,t,r,n,o){var i=r.valExpressionOnly,u=r.keyValExprPair;if(u){var c=[],s=u.keyExpression,f=u.valExpression;e:for(var y in e)if(e.hasOwnProperty(y)){var m=a(y,s,n,o);if(!p(m)){if(e===e[y])continue e;var h=a(e[y],f,n,o);if(p(h))return{problem:h};c.push({key:y,spec:v(f),guide:h})}}return{groupMatch:{name:t,matchedKeys:c}}}if(i){var b=e[t];if(l(b)||e[t]===e)return{noop:!0};var d=a(b,i,n,o);return p(d)?{problem:d}:{singleMatch:{key:t,spec:v(i),guide:d}}}throw"!!"}function a(e,t,r,n){var o=v(t),i=r(o,e,n);return i}var s=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(n=(u=c.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&c.return&&c.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=r(1),l=r(13),y=r(4),m=r(3),v=r(11);e.exports=n},function(e,t,r){"use strict";function n(e,t){function r(r,n){var o=e.get();if(o)return t(o,r,n)}return{trailblaze:r,reconstruct:r}}e.exports=n},function(e,t,r){"use strict";function n(e,t){function r(r,n){var i=o(e.exprs,1),u=i[0];return t(u,r,n)}return{trailblaze:r,reconstruct:r}}var o=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(n=(u=c.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&c.return&&c.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.exports=n},function(e,t,r){"use strict";var n=r(40),o=r(39),i=r(42),u=r(41),c=r(19),a=r(88),s={ToPrimitive:a,ToBoolean:function(e){return Boolean(e)},ToNumber:function(e){return Number(e)},ToInteger:function(e){var t=this.ToNumber(e);return n(t)?0:0!==t&&o(t)?i(t)*Math.floor(Math.abs(t)):t},ToInt32:function(e){return this.ToNumber(e)>>0},ToUint32:function(e){return this.ToNumber(e)>>>0},ToUint16:function(e){var t=this.ToNumber(e);if(n(t)||0===t||!o(t))return 0;var r=i(t)*Math.floor(Math.abs(t));return u(r,65536)},ToString:function(e){return String(e)},ToObject:function(e){return this.CheckObjectCoercible(e),Object(e)},CheckObjectCoercible:function(e,t){if(null==e)throw new TypeError(t||"Cannot call method on "+e);return e},IsCallable:c,SameValue:function(e,t){return e===t?0!==e||1/e===1/t:n(e)&&n(t)},Type:function(e){return null===e?"Null":"undefined"==typeof e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0}};e.exports=s},function(e,t){var r=Object.prototype.hasOwnProperty;e.exports=Object.assign||function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);return e}},function(e,t){e.exports=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e}},function(e,t,r){"use strict";var n=Object.prototype.toString,o=r(43),i=r(19),u={"[[DefaultValue]]":function(e,t){var r=t||("[object Date]"===n.call(e)?String:Number);if(r===String||r===Number){var u,c,a=r===String?["toString","valueOf"]:["valueOf","toString"];for(c=0;c<a.length;++c)if(i(e[a[c]])&&(u=e[a[c]](),o(u)))return u;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")}};e.exports=function(e,t){return o(e)?e:u["[[DefaultValue]]"](e,t)}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,o=r(43),i=r(19),u=r(93),c=r(95),a=function(e,t){if("undefined"==typeof e||null===e)throw new TypeError("Cannot call method on "+e);if("string"!=typeof t||"number"!==t&&"string"!==t)throw new TypeError('hint must be "string" or "number"');var r,n,u,c="string"===t?["toString","valueOf"]:["valueOf","toString"];for(u=0;u<c.length;++u)if(r=e[c[u]],i(r)&&(n=r.call(e),o(n)))return n;throw new TypeError("No default value")},s=function(e,t){var r=e[t];if(null!==r&&"undefined"!=typeof r){if(!i(r))throw new TypeError(r+" returned for property "+t+" of object "+e+" is not a function");return r}};e.exports=function(e,t){if(o(e))return e;var r="default";arguments.length>1&&(t===String?r="string":t===Number&&(r="number"));var i;if(n&&(Symbol.toPrimitive?i=s(e,Symbol.toPrimitive):c(e)&&(i=Symbol.prototype.valueOf)),"undefined"!=typeof i){var f=i.call(e,r);if(o(f))return f;throw new TypeError("unable to convert exotic object to primitive")}return"default"===r&&(u(e)||c(e))&&(r="string"),a(e,"default"===r?"number":r)}},function(e,t){var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString;e.exports=function(e,t,o){if("[object Function]"!==n.call(t))throw new TypeError("iterator must be a function");var i=e.length;if(i===+i)for(var u=0;u<i;u++)t.call(o,e[u],u,e);else for(var c in e)r.call(e,c)&&t.call(o,e[c],c,e)}},function(e,t){var r="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,o=Object.prototype.toString,i="[object Function]";e.exports=function(e){var t=this;if("function"!=typeof t||o.call(t)!==i)throw new TypeError(r+t);for(var u,c=n.call(arguments,1),a=function(){if(this instanceof u){var r=t.apply(this,c.concat(n.call(arguments)));return Object(r)===r?r:this}return t.apply(e,c.concat(n.call(arguments)))},s=Math.max(0,t.length-c.length),f=[],p=0;p<s;p++)f.push("$"+p);if(u=Function("binder","return function ("+f.join(",")+"){ return binder.apply(this,arguments); }")(a),t.prototype){var l=function(){};l.prototype=t.prototype,u.prototype=new l,l.prototype=null}return u}},function(e,t,r){var n=r(91);e.exports=Function.prototype.bind||n},function(e,t,r){"use strict";var n=Date.prototype.getDay,o=function(e){try{return n.call(e),!0}catch(e){return!1}},i=Object.prototype.toString,u="[object Date]",c="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(e){return"object"==typeof e&&null!==e&&(c?o(e):i.call(e)===u)}},function(e,t,r){"use strict";var n=RegExp.prototype.exec,o=function(e){try{return n.call(e),!0}catch(e){return!1}},i=Object.prototype.toString,u="[object RegExp]",c="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(e){return"object"==typeof e&&(c?o(e):i.call(e)===u)}},function(e,t,r){"use strict";var n=Object.prototype.toString,o="function"==typeof Symbol&&"symbol"==typeof Symbol();if(o){var i=Symbol.prototype.toString,u=/^Symbol\(.*\)$/,c=function(e){return"symbol"==typeof e.valueOf()&&u.test(i.call(e))};e.exports=function(e){if("symbol"==typeof e)return!0;if("[object Symbol]"!==n.call(e))return!1;try{return c(e)}catch(e){return!1}}}else e.exports=function(e){return!1}},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,o=Object.prototype.toString,i=Array.prototype.slice,u=r(97),c=Object.prototype.propertyIsEnumerable,a=!c.call({toString:null},"toString"),s=c.call(function(){},"prototype"),f=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(e){var t=e.constructor;return t&&t.prototype===e},l={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},y=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!l["$"+e]&&n.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{p(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),m=function(e){if("undefined"==typeof window||!y)return p(e);try{return p(e)}catch(e){return!1}},v=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===o.call(e),i=u(e),c=t&&"[object String]"===o.call(e),p=[];if(!t&&!r&&!i)throw new TypeError("Object.keys called on a non-object");var l=s&&r;if(c&&e.length>0&&!n.call(e,0))for(var y=0;y<e.length;++y)p.push(String(y));if(i&&e.length>0)for(var v=0;v<e.length;++v)p.push(String(v));else for(var h in e)l&&"prototype"===h||!n.call(e,h)||p.push(String(h));if(a)for(var b=m(e),d=0;d<f.length;++d)b&&"constructor"===f[d]||!n.call(e,f[d])||p.push(f[d]);return p};v.shim=function(){if(Object.keys){var e=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!e){var t=Object.keys;Object.keys=function(e){return t(u(e)?i.call(e):e)}}}else Object.keys=v;return Object.keys||v},e.exports=v},function(e,t,r){"use strict";var n=Object.prototype.toString;e.exports=function(e){var t=n.call(e),r="[object Arguments]"===t;return r||(r="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===n.call(e.callee)),r}},function(e,t,r){var n,o,i;!function(r,u){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=u():(o=[],n=u,i="function"==typeof n?n.apply(t,o):n,!(void 0!==i&&(e.exports=i)))}(this,function(){"use strict";function e(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}function t(t){if(!t)return!0;if(a(t)&&0===t.length)return!0;if("string"!=typeof t){for(var r in t)if(e(t,r))return!1;return!0}return!1}function r(e){return c.call(e)}function n(e){return"object"==typeof e&&"[object Object]"===r(e)}function o(e){return"boolean"==typeof e||"[object Boolean]"===r(e)}function i(e){var t=parseInt(e);return t.toString()===e?t:e}function u(r){function u(t,n){if(r.includeInheritedProps||"number"==typeof n&&Array.isArray(t)||e(t,n))return t[n]}function c(e,t,r,n){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if("string"==typeof t)return c(e,t.split(".").map(i),r,n);var o=t[0],a=u(e,o);return 1===t.length?(void 0!==a&&n||(e[o]=r),a):(void 0===a&&("number"==typeof t[1]?e[o]=[]:e[o]={}),c(e[o],t.slice(1),r,n))}r=r||{};var s=function(e){return Object.keys(s).reduce(function(t,r){return"create"===r?t:("function"==typeof s[r]&&(t[r]=s[r].bind(s,e)),t)},{})};return s.has=function(t,n){if("number"==typeof n?n=[n]:"string"==typeof n&&(n=n.split(".")),!n||0===n.length)return!!t;for(var o=0;o<n.length;o++){var u=i(n[o]);if(!("number"==typeof u&&a(t)&&u<t.length||(r.includeInheritedProps?u in Object(t):e(t,u))))return!1;t=t[u]}return!0},s.ensureExists=function(e,t,r){return c(e,t,r,!0)},s.set=function(e,t,r,n){return c(e,t,r,n)},s.insert=function(e,t,r,n){var o=s.get(e,t);n=~~n,a(o)||(o=[],s.set(e,t,o)),o.splice(n,0,r)},s.empty=function(r,i){if(!t(i)&&null!=r){var u,c;if(u=s.get(r,i)){if("string"==typeof u)return s.set(r,i,"");if(o(u))return s.set(r,i,!1);if("number"==typeof u)return s.set(r,i,0);if(a(u))u.length=0;else{if(!n(u))return s.set(r,i,null);for(c in u)e(u,c)&&delete u[c]}}}},s.push=function(e,t){var r=s.get(e,t);a(r)||(r=[],s.set(e,t,r)),r.push.apply(r,Array.prototype.slice.call(arguments,2))},s.coalesce=function(e,t,r){for(var n,o=0,i=t.length;o<i;o++)if(void 0!==(n=s.get(e,t[o])))return n;return r},s.get=function(e,t,r){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if(null==e)return r;if("string"==typeof t)return s.get(e,t.split("."),r);var n=i(t[0]),o=u(e,n);return void 0===o?r:1===t.length?o:s.get(e[n],t.slice(1),r)},s.del=function(e,r){if("number"==typeof r&&(r=[r]),null==e)return e;if(t(r))return e;if("string"==typeof r)return s.del(e,r.split("."));var n=i(r[0]),o=u(e,n);if(null==o)return o;if(1===r.length)a(e)?e.splice(n,1):delete e[n];else if(void 0!==e[n])return s.del(e[n],r.slice(1));return e},s}var c=Object.prototype.toString,a=Array.isArray||function(e){return"[object Array]"===c.call(e)},s=u();return s.create=u,s.withInheritedProps=u({includeInheritedProps:!0}),s})}])});