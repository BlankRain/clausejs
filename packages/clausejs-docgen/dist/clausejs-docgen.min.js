!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.C=e():n.C=e()}(this,function(){return function(n){function e(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return n[t].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=n,e.c=r,e.i=function(n){return n},e.d=function(n,r,t){e.o(n,r)||Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:t})},e.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(r,"a",r),r},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="",e(e.s=85)}([function(n,e,r){"use strict";function t(n){return n instanceof o}var o=r(2);n.exports=t},function(n,e,r){"use strict";function t(n){var e=n.type,r=n.exprs,t=n.opts,o=(n.fragments,n.conformFn),a=n.generateFn;if(this.type=e,t&&(this.opts=t),o&&(this.conform=o),a&&(this.generate=a),!r)throw new Error("Expressions are required when constructing a clause.");this.exprs=r}n.exports=t},function(n,e,r){"use strict";function t(n,e,r,t){var a=this;if(this.isProblem=!0,4!==arguments.length)throw"Problem arg len err";this.val=n,this.name="Problem",this.failsPredicate=e,this.shortMessage=t,this.subproblems=r,this.message=o(this,0),this.toString=function(){return a.message}}function o(n,e){var r=n.subproblems,t=n.val,c=n.shortMessage;if(Array.isArray(r)){var l;return 0===r.length?c+"; val: "+f(t,null,2):(l=r.map(function(n){return""+i(e)+o(n,e+1)+u(e)}),c+", because\n"+a(" ",2*e)+" "+l.join(", "))}if("object"===("undefined"==typeof r?"undefined":s(r))){l=[];for(var p in r)r.hasOwnProperty(p)&&l.push("-> "+p+": "+i(e)+" "+o(r[p],e+1)+u(e));return c+", because\n"+a(" ",2*e)+" "+l.join(", ")}}function a(n,e){for(var r="",t=0;t<e;t+=1)r+=n;return r}function i(n){return c[n]}function u(n){return c[c.length-n-1]}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},c="❰❮❬❨❪﹙₍₎﹚❫❩❭❯❱",f=r(23);n.exports=t},function(n,e,r){"use strict";function t(n){return a(n)?n.__predToString?n.__predToString():o?o(n):n.name:null}var o,a=r(11);if("test"!==function(){}.name){var i=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,u=Function.prototype.toString,s=String.prototype.match,c=String.prototype.replace,f=r(66),l=new RegExp("^["+f+"]*(?:function|class)["+f+"]*\\*?["+f+"]+([\\w\\$]+)["+f+"]*","i");o=function(n){var e=s.call(c.call(u.call(n),i," "),l);return e&&"anonymous"!==e[1]?e[1]:""}}else"anonymous"===(new Function).name&&(o=function(n){return n.name&&"anonymous"!==n.name?n.name:""});n.exports=t},function(n,e,r){"use strict";function t(n){if(null===n||void 0===n)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function o(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de","5"===Object.getOwnPropertyNames(n)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var t=Object.getOwnPropertyNames(e).map(function(n){return e[n]});if("0123456789"!==t.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(n){o[n]=n}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(n){return!1}}var a=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;n.exports=o()?Object.assign:function(n,e){for(var r,o,s=t(n),c=1;c<arguments.length;c++){r=Object(arguments[c]);for(var f in r)i.call(r,f)&&(s[f]=r[f]);if(a){o=a(r);for(var l=0;l<o.length;l++)u.call(r,o[l])&&(s[o[l]]=r[o[l]])}}return s}},function(n,e,r){"use strict";function t(n){return n instanceof o}var o=r(1);n.exports=t},function(n,e,r){"use strict";function t(n){return null!==n&&void 0!==n&&n.constructor===String}n.exports=t},function(n,e,r){"use strict";var t=r(9);n.exports=function(n){if(!n)throw console.error(n),"!";if(n.clause)return n.clause;if(n.pred)return t(n.pred);if(n.clauseRef)return n.clauseRef;if(n.delayedClause)return n.delayedClause;throw console.error("unsupported:",n),"Not implemented"}},function(n,e,r){"use strict";function t(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function o(){var n=Array.prototype.slice.call(arguments);return{expressions:{withLabels:n.map(function(n){var e=d(n,3),r=e[0],o=e[1],a=e[2];return{name:r,expr:t({},o,a)}})}}}function a(){var n=Array.prototype.slice.call(arguments);return{expressions:{withoutLabels:n.map(function(n){var e=d(n,2),r=e[0],o=e[1];return t({},r,o)})}}}function i(n){return R(n)&&!x(n)}function u(n){var e=new y({type:"AND",exprs:[],fragments:n,opts:{conformedExprs:n}});return e.conform=function(n){return j(e,n,{conform:!0})},e}function s(n){var e=n.expressions.withLabels;if(e)for(var r=[],t=0;t<e.length;t+=1){var o=e[t].name;if(r.indexOf(o)>=0)throw new Error("Duplicate label detected: "+o);r.push(o)}return!0}function c(n){return E(n,function(e){var r,t=e.expressions,o=t.withLabels,a=t.withoutLabels,i=e.options;if(o){r=o;var u=r.map(function(n){var e=n.expr,r=b(e);return m({},n,{expr:r,clause:void 0,pred:void 0,clauseRef:void 0,delayedClause:void 0})}),s=m({},i,{named:!0}),c=new y({type:n,exprs:u,opts:s});return c.conform=function(n){return j(c,n,{conform:!0})},c}if(a){r=a,u=r.map(function(n){var e;if(n.clause)return e=n.clause,m({},n,{expr:e,clause:void 0});if(n.pred)return e=P(n.pred),m({},n,{expr:e,pred:void 0});if(n.clauseRef)return e=n.clauseRef,m({},n,{expr:e,clauseRef:void 0});if(n.delayedClause)return e=n.delayedClause,m({},n,{expr:e,delayedClause:void 0});throw console.error(n),"!"});var f=m({},i,{named:!1});return c=new y({type:n,exprs:u,opts:f}),c.conform=function(n){return j(c,n,{conform:!0})},c}return c=new y({type:n,exprs:[]}),c.conform=function(n){return j(c,n,{conform:!0})},c})}function f(n){return E(n,function(e){var r,t=e.expr,o=e.opts;if(t.clause)r=t.clause;else if(t.pred)r=P(t.pred);else if(t.clauseRef)r=t.clauseRef;else{if(!t.delayedClause)throw console.error(t),"internal err";r=t.delayedClause}var a=P(r),i=new y({type:n,exprs:[a],opts:m({},o,{enclosedClause:a})});return i.conform=function(n){return j(i,n,{conform:!0})},i})}function l(n){return k(n)}function p(n){if(O(n))throw n;var e=n.keyExpression,r=n.valExpression,t=new y({type:X,exprs:[],opts:{keyExpression:e,valExpression:r}});return t.conform=function(n){return j(t,n,{conform:!0})},t}function v(n){if(O(n))throw n;var e=new y({type:Q,exprs:[],fragments:[],opts:{conformedArgs:n}});return e.conform=function(n){return j(e,n,{conform:!0})},e}var d=function(){function n(n,e){var r=[],t=!0,o=!1,a=void 0;try{for(var i,u=n[Symbol.iterator]();!(t=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);t=!0);}catch(n){o=!0,a=n}finally{try{!t&&u.return&&u.return()}finally{if(o)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=r(4),y=r(1),h=r(5),g=r(10),x=r(38),b=r(7),O=r(0),w=r(37),E=r(14),C=r(13),_=r(22),A=r(45),P=r(9),S=r(18),j=r(16),R=r(20),k=r(6),F=r(34),M=(r(33),P(h)),L=P(w),N=c(A.CAT),D=c(A.OR),q=f(A.Z_OR_M),T=f(A.O_OR_M),z=f(A.Z_OR_O),Z=f(A.COLL_OF),U=P(h),I=P(C),V=P(_),Y=P(g),G=D(o(["clause","clause",U],["pred","clause",Y],["delayedClause","clause",V],["clauseRef","clause",I])),H=N(o(["name","clause",L],["comment","clause",z({expr:{pred:k}})],["expr","clause",G])),W=N(o(["expressions","clause",D(o(["withLabels","clause",D(a(["clause",q({expr:{clause:H}})],["clause",Z({expr:{clause:H}})]))],["withoutLabels","clause",q({expr:{clause:G}})]))],["options","clause",z({expr:{pred:i}})])),$=u([{clause:W},{pred:s}]),B=S({args:T({expr:{clause:G}}),ret:h}),K={args:$,ret:M},J=function(n){return{args:N(o(["expr","clause",G],["opts","clause",z({expr:n})])),ret:M}},Q="SHAPE",X="MAP_OF",nn=v({shapeArgs:{optionalFields:{opt:{fieldDefs:{fields:{fields:{keyValExprPair:{keyExpression:{clause:P(k)},valExpression:{clause:D(o(["valExpressionOnly","clause",G],["keyValExprPair","clause",N(o(["keyExpression","clause",G],["valExpression","clause",G]))]))}}}}}}}}}),en=q({expr:{pred:l}}),rn=D(o(["keyList","clause",en],["fieldDefs","clause",nn])),tn=v({shapeArgs:{optionalFields:{opt:{fieldDefs:{fields:{requiredFields:{keyValExprPair:{keyExpression:{pred:F("req","required")},valExpression:{clause:rn}}},optionalFields:{keyValExprPair:{keyExpression:{pred:F("opt","optional")},valExpression:{clause:rn}}}}}}}}}),on=S({args:N(o(["keyExpression","clause",G],["valExpression","clause",G])),ret:h}),an=S({args:N(o(["shapeArgs","clause",tn])),ret:h}),un=an.instrumentConformed(v),sn=on.instrumentConformed(p),cn=S(J({pred:R})),fn=cn.instrumentConformed(Z),ln=S(K),pn=S(K),vn=S(J({pred:R})),dn=S(J({pred:R})),mn=S(J({pred:R})),yn=B.instrumentConformed(u),hn={cat:ln.instrumentConformed(N),or:pn.instrumentConformed(D),zeroOrMore:vn.instrumentConformed(q),zeroOrOne:mn.instrumentConformed(z),oneOrMore:dn.instrumentConformed(T),ExprClause:G,ClauseClause:U,PredClause:Y,DelayedClauseClause:V,ClauseRefClause:I,CatFnClause:ln,AndFnClause:B,OrFnClause:pn,ZeroOrMoreFnClause:vn,OneOrMoreFnClause:dn,ZeroOrOneFnClause:mn,CollOfClause:cn,collOf:fn,and:yn,shape:un,keys:un,mapOf:sn,ShapeFnClause:an,MapOfFnClause:on};hn.alt=hn.or,hn["*"]=hn.zeroOrMore,hn["+"]=hn.oneOrMore,hn["?"]=hn.zeroOrOne,n.exports=hn},function(n,e,r){"use strict";function t(n){if(u(n)||s(n)||c(n))return n;if(i(n))return o(n);throw console.error(n),new Error("'Expression must either be a Clause object or a predication function that returns true or false. Given value: "+v(n)+"'")}function o(n){return new f({type:d,exprs:[n],opts:{predicate:n},conformFn:a(n)})}function a(n){return function(e){return n(e)?e:new l(e,n,[],"Predicate "+p(n)+" returns false")}}var i=r(10),u=r(5),s=r(13),c=r(22),f=r(1),l=r(2),p=r(3),v=r(23),d="PRED";n.exports=t},function(n,e,r){"use strict";function t(n){return o(n)}var o=r(11);n.exports=t},function(n,e,r){"use strict";function t(n){var e={};return(n||!1)&&["[object Function]","[object GeneratorFunction]"].indexOf(e.toString.call(n))>=0}n.exports=t},function(n,e,r){"use strict";n.exports=function(n){return void 0===n}},function(n,e,r){"use strict";function t(n){return n instanceof o}var o=r(39);n.exports=t},function(n,e,r){"use strict";function t(n,e,r){if(n){var t="return function "+n+(r||"")+"(){ return action.apply(this, arguments); };";return new Function("action",t)(e)}return e}n.exports=t},function(n,e,r){"use strict";var t=r(4),o=r(8),a=r(8),i=a.shape,u=a.keys,s=a.mapOf,c=r(51),f=r(52),l=r(46),p=r(43),v=p.wall,d=r(29),m=function(n){return o.cat.apply(null,Array.prototype.slice.call(n).map(d))},y={any:r(44),fclause:r(18),wall:v,clause:v,nullable:c,undefinable:f,maybe:l,sCat:m},h=t({},o,{shape:i,keys:u,mapOf:s},y);n.exports=h},function(n,e,r){"use strict";function t(n,e,r){var t=r.phase,i=o(n);if(t){if(i[t])return i[t](e,r);throw"!"}var u=i.trailblaze(e,a({phase:"trailblaze"},r));return g(u)?u:i.reconstruct(u,a({phase:"reconstruct"},r))}function o(n){var e=h(n),r=x[e.type];if(!r)throw"unsupported type "+e.type;var o=r(e,t);return o}var a=r(4),i=r(74),u=r(68),s=r(75),c=r(77),f=r(72),l=r(76),p=r(67),v=r(70),d=r(73),m=r(69),y=r(71),h=r(9),g=r(0),x={OR:i,CAT:i,COLL_OF:v,ANY:u,Z_OR_M:i,O_OR_M:i,Z_OR_O:i,PRED:s,WALL:c,SHAPE:l,AND:p,CLAUSE_REF:m,DELAYED:y,FCLAUSE:f,MAP_OF:d};n.exports=t},function(n,e,r){"use strict";var t=r(32),o=r(54),a=r(31),i=r(40),u=r(11),s=r(20),c=r(55),f=r(29),l=r(34),p=r(6),v=r(53),d=r(33),m=r(30),y=r(56),h=Array.isArray,g={isNull:r(19),isUndefined:r(12),notEmpty:r(57),isBool:i,isBoolean:i,isFn:u,isFunction:u,isNum:t,isNumber:t,isNatInt:o,isNaturalNumber:o,isInt:a,isInteger:a,isObj:s,isObject:s,isPlainObj:c,isPlainObject:c,isStr:p,isString:p,isArray:h,isArr:h,equal:f,equals:f,equalsTo:f,eq:f,oneOf:l,not:d,isDate:v,instanceOf:m,isUuid:y,isUUID:y};g.default=g,n.exports=g},function(n,e,r){"use strict";function t(n){var e=(n.args,n.ret,n.fn,new o({type:"FCLAUSE",exprs:[],opts:n}));return e.instrumentConformed=function(n){return a(e,n,{conform:!0,instrument:!0})},e.instrument=function(n){return a(e,n,{conform:!1,instrument:!0})},e}var o=r(1),a=r(16);r(3),n.exports=t},function(n,e,r){"use strict";function t(n){return null===n}n.exports=t},function(n,e,r){"use strict";function t(n){return"object"===("undefined"==typeof n?"undefined":o(n))&&null!==n}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};n.exports=t},function(n,e,r){"use strict";function t(n,e,r){if(n&&o(n)){var t=n.conform(e);return t}throw new Error("Expression needs to be of type Clause. expression: \n"+n+"\n offending value: "+e)}var o=r(5);n.exports=t},function(n,e,r){"use strict";var t=r(28),o=r(30);n.exports=o(t)},function(n,e,r){"use strict";function t(n,e){var r=Array.prototype.slice.call(arguments);return r[1]=function(n,r){var t;if(o(r)){var i=a(r);t=i?i+"()":r.toString()}else t=r;return e?e(t):t},JSON.stringify.apply(this,r)}var o=r(11),a=r(3);n.exports=t},function(n,e,r){"use strict";function t(n){return!!/^[^.@%\&\*#]+/.test(n)}Object.defineProperty(e,"__esModule",{value:!0}),e.NamespaceObjClause=e.ResolveFnClause=e.MetaFnClause=e.isNamespacePath=e.NamespaceFnClause=e.GetNSFnClause=e.SetNSFnClause=e.isClauseRef=void 0;var o=r(15),a=r(26),i=r(17),u=(0,a.delayed)(function(){return o.ExprClause}),s=(0,o.cat)("nsPath",a.isNamespacePath),c=(0,o.fclause)({args:s,ret:o.ExprClause}),f=(0,o.cat)("nsPath",a.isNamespacePath,"expression",u),l=(0,o.fclause)({args:f,ret:i.isBool}),p=(0,o.fclause)({args:(0,o.or)("register",f,"retrieve",s)}),v=(0,o.fclause)({args:(0,o.cat)("source",(0,o.or)("namespacePath",a.isNamespacePath,"expression",a.isExpr),"metaObj",i.isObj),ret:a.isExpr}),d=(0,o.fclause)({args:(0,o.cat)("expression",o.ExprClause,"registry",(0,o.zeroOrOne)(i.isObj)),ret:a.isNamespacePath}),m=(0,o.shape)({optional:{subNamespaces:[t,(0,a.delayed)(function(){return m})],".meta":i.isObj,".expr":a.isExpr}});e.isClauseRef=a.isClauseRef,e.SetNSFnClause=l,e.GetNSFnClause=c,e.NamespaceFnClause=p,e.isNamespacePath=a.isNamespacePath,e.MetaFnClause=v,e.ResolveFnClause=d,e.NamespaceObjClause=m},function(n,e,r){"use strict";n.exports=function(n){for(var e=n;e.get;)e=e.get();return e}},function(n,e,r){"use strict";function t(n){return n&&n.__esModule?n:{default:n}}var o=r(27),a=t(o);n.exports={conform:r(21),isValid:r(64),isNamespacePath:r(63),identity:r(36),isProblem:r(0),delayed:r(35),enforce:r(59),isExpr:r(38),isClause:r(5),isFclause:r(62),isClauseRef:r(13),describe:r(41),deref:r(25),isClauseName:r(37),sExpression:a.default}},function(n,e,r){"use strict";function t(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function o(n){this.isRecursive=!0,this.expression=n}function a(n){m(this,n)}function i(n){m(this,n)}function u(n,e){var r=e.fieldDefs;r=void 0===r?{}:r;var o=r.fields,u=e.keyList;if(o){var s=new a;for(var f in o)if(o.hasOwnProperty(f)){var l=o[f],p=l.keyValExprPair,v=l.valExpressionOnly;if(p){var y=p.keyExpression,h=p.valExpression;m(s,t({},f,new i({keyExpression:c(n,d(y)),valExpression:c(n,d(h))})))}else v&&m(s,t({},f,c(n,d(v))))}return s}if(u)return u;throw"!w"}function s(n,e){var r=Z[e.type];if(r){var t=r(n,e);return t}throw console.error(e),new Error("Unsupported clause type "+e.type+".")}function c(n,e){if(l(n,e))return new o(e);var r=P(e),t=void 0,a=n;if("DELAYED"===r.type||"CLAUSE_REF"===r.type)return t=r.get(),c(n,t);t=r,a=f(n,r);var i=s(a,t);return[t].concat(i)}function f(n,e){if(!l(n,e))return n.concat([e])}function l(n,e){return n.indexOf(e)>=0}function p(n){var e=[];return c(e,n)}Object.defineProperty(e,"__esModule",{value:!0});var v=r(3),d=r(7),m=r(4),y=r(15),h=y.wall,g=y.any,x=y.zeroOrMore,b=y.and,O=y.cat,w=y.or,E=y.ExprClause,C=y.mapOf,_=y.maybe,A=r(35),P=r(9),S=r(17),j=S.isStr,R=S.isPlainObj,k=S.instanceOf,F=C(g,_(w("keyList",x(A(function(){return D})),"singleParam",A(function(){return N})))),M=b(k(a),F),L=b(k(i),F),N=w("sExpression",A(function(){return q}),"quotedParamsMap",M,"unquotedParamsMap",L,"optionsObj",R,"recursive",k(o)),D=j,q=h(O("head",E,"params",w("labelled",x(O("label",D,"item",N)),"unlabelled",x(N)))),T=function(n,e){var r=e.opts.enclosedClause;return[c(n,r)]},z=function(n,e){var r=e.opts.named,t=e.exprs;if(0===t.length)return[];if(r){var o=t.reduce(function(e,r){var t=r.name,o=r.expr;return e.concat(['"'+t+'"',c(n,o)])},[]);return o}return t.reduce(function(e,r){var t=r.expr;return e.concat([c(n,t)])},[])},Z={PRED:function(){return[]},WALL:function(n,e){var r=e.opts.enclosedClause;return[c(n,r)]},AND:function(n,e){var r=e.opts.conformedExprs;return r.map(d).map(function(e){return c(n,e)})},CAT:z,OR:z,Z_OR_M:T,O_OR_M:T,Z_OR_O:T,COLL_OF:T,ANY:function(){return[]},MAP_OF:function(){return[]},SHAPE:function(n,e){var r=e.opts.conformedArgs.shapeArgs,t=r.optionalFields;t=void 0===t?{}:t;var o=t.opt,a=t.optional,s=r.requiredFields;s=void 0===s?{}:s;var c=s.req,f=s.required;return m(new i,c||f?{required:u(n,c||f)}:{},o||a?{optional:u(n,o||a)}:{})},FCLAUSE:function(n,e){var r=e.opts,t=r.args,o=r.ret,a=r.fn;return m(new i,t?{args:c(n,t)}:{},o?{ret:c(n,o)}:{},a?{fn:[v(a)+"()"]}:{})}};e.default=p,e.SExpressionClause=q,e.ParamItemClause=N,e.Recursive=o,e.QuotedParamsMap=a,e.UnquotedParamsMap=i},function(n,e,r){"use strict";function t(n){var e=n.getFn;this.type="DELAYED",this.get=e;var r=this;r.instrument=function(n){var r=e();return r.instrument(n)},r.instrumentConformed=function(n){var r=e();return r.instrumentConformed(n)},r.conform=function(n){var r=e();return r.conform(n)}}var o=r(1);t.prototype=Object.create(o.prototype),n.exports=t},function(n,e,r){"use strict";n.exports=function(n){return function(e){return e===n}}},function(n,e,r){"use strict";var t=r(3),o=r(14);n.exports=function(n){var e=t(n),r=function(e){return e instanceof n};return e&&(r=o("instanceOf_"+e,r)),r.__predToString=function(){return"instanceOf_"+(e||"anonymous_type")+"_"},r}},function(n,e,r){"use strict";function t(n){return"number"==typeof n&&Math.floor(n)===n&&n!==1/0}n.exports=t},function(n,e,r){"use strict";function t(n){return"number"==typeof n}n.exports=t},function(n,e,r){"use strict";function t(n){var e=o(n),r=function(e){return!n(e)};return e?a("not_"+e,r):r}var o=r(3),a=r(14);n.exports=t},function(n,e,r){"use strict";n.exports=function(){var n;if(1===arguments.length&&Array.isArray(arguments[0]))n=arguments[0];else{if(!(arguments.length>0))throw new Error("Items list is required.");n=Array.prototype.slice.call(arguments)}var e=function(e){return n.indexOf(e)>=0};return e.__predToString=function(){return"oneOf(".concat([n.map(JSON.stringify).join(", ")]).concat(")")},e}},function(n,e,r){"use strict";function t(n){return new o({getFn:n})}var o=r(28);n.exports=t},function(n,e,r){"use strict";function t(n){return n}n.exports=t},function(n,e,r){"use strict";var t=r(6);n.exports=function(n){return t(n)}},function(n,e,r){"use strict";function t(n){return o(n)||a(n)||i(n)||u(n)}var o=r(10),a=r(5),i=r(13),u=r(22);n.exports=t},function(n,e,r){"use strict";function t(n){var e=n.ref,r=n.getFn,t=n.conformFn;this.type="CLAUSE_REF",this.get=r,this.conform=t,this.ref=e}var o=r(1);t.prototype=Object.create(o.prototype),n.exports=t},function(n,e,r){"use strict";function t(n){return"boolean"==typeof n}n.exports=t},function(n,e,r){"use strict";function t(n){return n&&n.__esModule?n:{default:n}}function o(n,e,r){var t=(0,p.default)(n),o=l.SExpressionClause.conform(t);if(m(o))throw console.error(o),new Error("The given expression is not a valid expression.");var i=a(o,e),u=0,s=f(i,u,r);return s}function a(n,e){var r=n.head,t=n.params,o=h(r);if(e){var a=e(o);if(a)return a}if("PRED"===o.type)return[""+g(o.opts.predicate)];var u=v(o),c=void 0;if(t){var f=t.labelled,l=t.unlabelled,p=t.keyList;if(f){var d=f.reduce(function(n,r){var t=r.label,o=r.item;return n.concat([[t,", ",s(o,e)]])},[]);c=i(d,[", ",O])}else if(l){var m=l.map(function(n){return s(n,e)});c=i(m,[", "])}else if(p){var y=p;c=i(y,[", "])}else c=[]}else c=[];return[u,"("].concat(c.length>1?[w,O]:[" "]).concat(c).concat(c.length>1?[E,O]:[" "]).concat([")"])}function i(n,e){return 0===n.length?n:n.reduce(function(r,t,o){return o<n.length-1&&!u(t)?r.concat([t]).concat(e):r.concat([t])},[])}function u(n){return n===O||n===w||n===E}function s(n,e){var r=y(n,{label:function(n){return n},sExpression:function(n){return a(n,e)},quotedParamsMap:function(n){return c(n,e,!0)},unquotedParamsMap:function(n){return c(n,e,!1)},optionsObj:function(n){return x(n)},recursive:function(n){var e=n.expression;return["<recursive>: ",v(e)]}},function(){throw"!s"});return r}function c(n,e,r){var t=["{",w,O],o=[];for(var a in n)if(n.hasOwnProperty(a)){var u=[];u.push(r?'"'+a+'": ':"<"+a+">: ");var c=y(n[a],{keyList:function(n){return["[ "].concat(i(n.map(function(n){return'"'+n+'"'}),[", "])).concat(" ]")},singleParam:function(n){return s(n,e)}},function(){throw"!e"});c&&(u.push(c),o.push(u))}return o=i(o,[", ",O]),t=t.concat(o).concat([E,O,"}"])}function f(n,e,r){var t=e,o=!1;return n.reduce(function(n,e){if(o&&(o=!1,n=n.concat(b(r*t," ").join(""))),d(e))return n.concat(e);if(Array.isArray(e))return n.concat(f(e,t,r));if(e===O){if(r>0)return o=!0,n.concat("\n")}else if(e===w)t+=1;else{if(e!==E)throw console.error(e),"!3";t-=1}return n},"")}var l=r(27),p=t(l),v=r(61),d=r(6),m=r(0),y=r(60),h=r(7),g=r(3),x=r(23),b=r(65),O=function(){},w=function(){},E=function(){};n.exports=o},function(n,e,r){"use strict";function t(n,e){var r=c(p,function(n){var r=f(n,2),t=r[0],o=r[1];if(t===e)return o});return r||(r=a(e),p.push([e,r])),u(r,n)}function o(n){var e=a(n),r={};return e.forEach(function(n){var e=f(n,1),t=e[0];r[t]||(r[t]=[]),r[t].push(n)}),r}function a(n){var e=[],r=l.NamespaceObjClause.conform(n);return i(null,null,r,e),e}function i(n,e,r,t){var o=n?n+"."+e:e,a=void 0;for(var u in r)if(r.hasOwnProperty(u))switch(u){case"subNamespaces":a=r[u];for(var s in a)a.hasOwnProperty(s)&&i(o,s,a[s],t);break;case".expr":t.push([""+(n?n:""),""+e,r[".expr"]])}}function u(n,e){var r=c(n,function(n){var r=f(n,3),t=r[0],o=r[1],a=r[2];if(a===e||s(a)===s(e))return t+"/"+o});return r}function s(n){return"PRED"===n.type?n.opts.predicate:n}function c(n,e){for(var r=0;r<n.length;r++){var t=e(n[r]);if(t)return t}return null}var f=function(){function n(n,e){var r=[],t=!0,o=!1,a=void 0;try{for(var i,u=n[Symbol.iterator]();!(t=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);t=!0);}catch(n){o=!0,a=n}finally{try{!t&&u.return&&u.return()}finally{if(o)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=r(24),p=[];n.exports={resolve:t,getDefList:o}},function(n,e,r){"use strict";function t(n){var e=a(n),r=new o({type:"WALL",exprs:[e],opts:{enclosedClause:e}});return r.conform=function(n){return f(r,n,{conform:!0})},r}var o=r(1),a=r(9),i=r(8),u=i.cat,s=i.ExprClause,c=r(18),f=r(16),l=c({args:u(s),ret:s}),p=l.instrument(t);n.exports={WallFnClause:l,wall:p}},function(n,e,r){"use strict";function t(){return new o({type:i,exprs:[],conformFn:a})}var o=r(1),a=r(36),i="ANY";n.exports=t},function(n,e,r){"use strict";n.exports={CAT:"CAT",OR:"OR",Z_OR_M:"Z_OR_M",Z_OR_O:"Z_OR_O",O_OR_M:"O_OR_M",PRED:"PRED",COLL_OF:"COLL_OF"}},function(n,e,r){"use strict";function t(n){return a(i,u,n)}var o=r(8),a=o.or,i=r(19),u=r(12);n.exports=t},function(n,e,r){"use strict";function t(n){n=u(n);var e;if(null===n.type)throw"Clause has no type: "+n;e=n.type in c?c[n.type]:c.PRED;var r=e(n);return r}function o(n){return new i({type:"ROOT",exprs:[n]})}var a=r(48),i=r(1),u=r(25),s=function(n){for(var e=0,r=[n.head],t=[];r.length>0;){var o=r.pop();null===o.index&&(o.index=e,e++,o.transitions.forEach(function(n){r.push(n.target)}),t.push(o))}return t},c={},f=function(n){return function(e){var r=t(e.exprs[0]);return n(r)}},l=function(n){return function(e){var r=e.exprs.map(function(n){var e=t(n.expr);return e.name=n.name,e});return n(r)}};["ROOT","Z_OR_M","O_OR_M","Z_OR_O"].forEach(function(n){c[n]=f(a[n])}),["OR","CAT"].forEach(function(n){c[n]=l(a[n])}),c.PRED=function(n){return a.PRED(n)};var p=function(n){var e,r=o(n),a=t(r),i=s(a),u=i.length,c={};return i.forEach(function(n){0===n.transitions.length&&(e=n.index);var r={};n.transitions.forEach(function(n){r[n.target.index]=n.clause}),c[n.index.toString()]=r}),{initialState:0,numStates:u,finalState:e,transitions:c,expression:n}};n.exports=p},function(n,e,r){"use strict";function t(n,e){return{transitions:null===n?[]:n,index:e||null}}function o(n,e){return{clause:n,target:e}}function a(n,e){return{head:n,tails:e}}function i(n,e,r){var t=a(e,r);return t.name=n,t}function u(n,e){n.forEach(function(n){n.target=e})}function s(){return{isEpsilon:!0}}function c(n,e,r,t){var o=s();return o.name=e,o.op=r,o.group=t,o.dir=n,o}function f(n,e){var r=o(n,e.head),i=t([r]),u=a(i,e.tails);return u}function l(n,e){var r=o(n,null),i=t([r],null);u(e.tails,i);var s=a(e.head,[r]);return s}var p={};p.PRED=function(n){var e=o(n,null),r=t([e],null),i=[e],u=a(r,i);return u},p.OR=function(n){n=n.map(function(n){var e=c("out",n.name,"OR"),r=o(e,null),a=t([r]);u(n.tails,a);var s=o(c("in",n.name,"OR"),n.head),f=t([s]),l=i(n.name,f,[r]);return l});var e=function(n,e){var r=n.head.transitions.concat(e.head.transitions),o=t(r),a=n.tails.concat(e.tails),u=i(n.name,o,a);return u},r=n.reduce(e);return r=f(c("enter",null,"OR","para_in"),r),r=l(c("exit",null,"OR","para_out"),r)},p.CAT=function(n){var e=function(n,e){u(n.tails,e.head);var r=n.head,t=e.tails,o=a(r,t);return o};n=n.map(function(n){var e=o(c("maybe_out",n.name,"CAT"),null),r=t([e]);u(n.tails,r);var a=n.head.transitions.map(function(e){var r=t([e]),a=o(c("maybe_in",n.name,"CAT"),r);return a}),s=t(a),f=i(n.name,s,[e]);return f});var r;if(n.length>0)r=n.reduce(e);else{var p=s(),v=o(p,null),d=t([v]);r=a(d,[v])}return r=f(c("maybe_enter",null,"CAT","in"),r),r=l(c("maybe_exit",null,"CAT","out"),r)},p.Z_OR_M=function(n){var e="Z_OR_M",r=o(c("loop",null,e),n.head),i=o(s(),null),p=t([r,i]);u(n.tails,p);var v=a(p,[i]),d=v.head.transitions.map(function(n){var e=t([n]),r=o(s(),e);return r}),m=t(d);return v=a(m,v.tails),v=f(c("maybe_enter",null,e,"in"),v),v=l(c("maybe_exit",null,e,"out"),v)},p.O_OR_M=function(n){var e="O_OR_M",r=o(c("loop",null,e),n.head),i=o(s(),null),p=t([r,i]);u(n.tails,p);var v=a(n.head,[i]);return v=f(c("maybe_enter",null,e,"in"),v),v=l(c("maybe_exit",null,e,"out"),v)},p.Z_OR_O=function(n){var e="Z_OR_O",r=o(c("loop",null,e),n.head),i=o(s(),null),u=t([r,i]),p=n.tails.concat([i]),v=a(u,p);return v=f(c("maybe_single_enter",null,e,"in"),v),v=l(c("maybe_single_exit",null,e,"out"),v)},p.ROOT=function(n){var e=t(null,null);return u(n.tails,e),a(n.head,[])},n.exports=p},function(n,e,r){"use strict";function t(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function o(n){this.value=n}function a(n){this.fragment=n}function i(n){this.fragment=n}function u(n,e){this.fragment=e,this.name=n}function s(n){this.fragment=n}function c(n,e){this.fragment=e,this.name=n}function f(){}function l(){}function p(){}function v(n){this.name=n}function d(n,e,r){var u,d=r.conform,x=n.inputType,b=[];if(n.forEach(function(n){if(n.move)switch(n.move.dir){case"maybe_enter":b.push(new p);break;case"maybe_exit":for(var a=void 0,i=new l;!((a=b.pop())instanceof p);)i=h(x,d,i,a);b.push(i);break;case"maybe_single_enter":b.push(new p);break;case"maybe_single_exit":var u=b.pop(),g=void 0;u instanceof p?g=new f:(g=u,b.pop()),b.push(g);break;case"enter":break;case"exit":var O=b.pop(),w=void 0;if(d&&O instanceof c){var E=void 0;E=O.fragment instanceof l?{}:t({},O.name,O.fragment),w=new s(E)}else w=O;b.push(w);break;case"maybe_in":d&&n.move.name&&b.push(new v(n.move.name));break;case"loop":break;case"maybe_out":if(d&&n.move.name){var C=b.pop(),_=b.pop();b.push(m(_,C))}break;case"in":d&&n.move.name&&b.push(new v(n.move.name));break;case"out":if(d&&n.move.name){var A=b.pop(),P=b.pop();b.push(y(P,A))}break;case"clause":var S=e(n.clause,n.guide,r);b.push(new o(S));break;default:throw console.error(n),"FUUU"}}),1!==b.length)throw console.error("valStack",b),"!";u=b.pop();var O=void 0;return O=u instanceof a?u.fragment:u instanceof i?u.fragment:u instanceof s?u.fragment:u instanceof o?u.value:u instanceof l?g(x,[]):u}function m(n,e){if(e instanceof f)return new u(n.name,new l);if(e instanceof i)return new u(n.name,e.fragment);if(e instanceof a||e instanceof s)return new u(n.name,e.fragment);if(e instanceof o)return new u(n.name,e.value);if(e instanceof l)return new u(n.name,new l);throw console.error(e),"c!!!"}function y(n,e){if(e instanceof f)return new c(n.name,new l);if(e instanceof s)return new c(n.name,e.fragment);if(e instanceof a)return new c(n.name,e.fragment);if(e instanceof i)return new c(n.name,e.fragment);if(e instanceof o)return new c(n.name,e.value);if(e instanceof l)return new c(n.name,new l);throw console.error(e),"c!!!alt"}function h(n,e,r,c){if(e&&c instanceof u){var p=void 0;if(r instanceof f)p={};else if(r)if(r instanceof l)p={};else if(r instanceof i)p=r.fragment;else if(r instanceof a)p=r.fragment;else{if(!(r instanceof s))throw console.error(r,c),"!!acc_fl_np";p=r.fragment}else p={};var v=void 0;v=c.fragment instanceof l?{}:t({},c.name,c.fragment);var d=new i(x({},v,p));return d}var m=void 0,y=void 0;if(r instanceof f)y=[];else if(r)if(r instanceof a)y=r.fragment;else if(r instanceof i)y=[r.fragment];else{if(!(r instanceof l))throw console.error(r),"!!acc_fl";y=[]}else y=[];if(c instanceof o)m=[c.value];else if(c instanceof a)m=c.fragment;else if(c instanceof i)m=[c.fragment];else if(c instanceof s)m=[c.fragment];else if(c instanceof f)m=[];else{if(!(c instanceof l))throw console.error(c),"cc!!";m=[]}var h=new a(g(n,m.concat(y)));return h}function g(n,e){return"string"===n&&Array.isArray(e)?e.join(""):e}var x=r(4);n.exports=d},function(n,e,r){"use strict";function t(n,e,r,t){for(var u={matched:!1,chain:null},s="undefined"==typeof e?"undefined":i(e),c={state:0,offset:0,input:[e],groupCount:0,arrayed:!1},f=[c];f.length>0;){var l=f.shift(),p=l.offset,v=l.input;if(l.state===n.finalState&&p===v.length)return u.matched=!0,u.chain=a(n,l,s),u;for(var d in n.transitions[l.state]){var m=parseInt(d),y=o(n,m,l,r,t);if(y)if(y.isProblem){var h=y.name,g=y.problem,x=y.position;u.lastProblem={name:h,problem:g,position:x}}else f.push(y)}}return u}function o(n,e,r,t,o){var a=r.input,i=r.offset,c=r.groupCount,f=r.arrayed,l=a[i],p=n.transitions[r.state][e];"in"===p.group?(0===c&&(Array.isArray(a[0])||s(a[0]))&&(a=a[0],i=0,f=!0),c+=1):"out"===p.group&&(c-=1,0===c&&(f&&(i=i===a.length?1:0,a=[a]),f=!1));var v,d;v=p.isEpsilon?i:i+1;var m,y,h=p.name||r.move&&r.move.name;if(v<=a.length){if(p.isEpsilon)return d=p.dir?{dir:p.dir,name:p.name,op:p.op,group:p.group}:null,y={input:a,groupCount:c,arrayed:f,state:e,offset:v,move:d,clause:p,prev:r,isEpsilon:!0};if(m=t(p,l,o),u(m))return{isProblem:!0,problem:m,name:h,position:i};if(i<a.length)return d={dir:"clause"},y={input:a,groupCount:c,arrayed:f,state:e,offset:v,move:d,prev:r,isEpsilon:!1,clause:p,guide:m}}}function a(n,e,r){for(var t,o=[],a=e;a;){if(!t||a.state!==t.state&&a.move){var i={isEpsilon:a.isEpsilon,move:a.move,state:a.state};a.isEpsilon||(i.guide=a.guide,i.clause=a.clause),o.unshift(i)}t=a,a=a.prev}return o.inputType=r,o}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},u=r(0),s=r(6);n.exports=t},function(n,e,r){"use strict";function t(n){return a(i,n)}var o=r(8),a=o.or,i=r(19);n.exports=t},function(n,e,r){"use strict";function t(n){
return a(i,n)}var o=r(8),a=o.or,i=r(12);n.exports=t},function(n,e,r){"use strict";n.exports=function(n){return n&&n instanceof Date&&!isNaN(n.valueOf())}},function(n,e,r){"use strict";function t(n){return o(n)&&n>=0}var o=r(31);n.exports=t},function(n,e,r){"use strict";function t(n){if(o(n)){if("function"==typeof Object.getPrototypeOf){var e=Object.getPrototypeOf(n);return e===Object.prototype||null===e}return"[object Object]"==Object.prototype.toString.call(n)}return!1}var o=r(20);n.exports=t},function(n,e,r){"use strict";n.exports=function(n){return!!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n)}},function(n,e,r){"use strict";n.exports=function(n){return!!n&&0!==n.length}},function(n,e,r){"use strict";function t(n){throw n}n.exports=t},function(n,e,r){"use strict";var t=r(0),o=r(21);n.exports=function(n,e){var r=o(n,e);if(t(r))throw r}},function(n,e,r){"use strict";function t(n,e,r){for(var t in n)return n.hasOwnProperty(t)&&e.hasOwnProperty(t)?e[t](n[t]):r(n[t]);throw console.error(n),new Error("No cases present in the given object")}n.exports=t},function(n,e,r){"use strict";function t(n){return o(n)?n:n.type?a[n.type]?a[n.type]:n.type.toLowerCase():n.toString()}var o=r(6),a={Z_OR_M:"zeroOrMore",O_OR_M:"oneOrMore",Z_OR_O:"zeroOrOne",COLL_OF:"collOf",MAP_OF:"mapOf"};n.exports=t},function(n,e,r){"use strict";function t(n){return o(n)&&"FCLAUSE"===n.type}var o=r(5);n.exports=t},function(n,e,r){"use strict";function t(n){return o(n)&&/^\/?[a-zA-Z0-9\-_\.]*\/([a-zA-Z0-9\-_]+)$/.test(n)}var o=r(6);n.exports=t},function(n,e,r){"use strict";function t(n,e){if(n)return i(n)?!o(u(n,e)):!a(n)||n(e);throw new Error("Clause is required")}var o=r(0),a=r(10),i=r(5),u=r(21);n.exports=t},function(n,e,r){"use strict";function t(n,e){var r,t=[];for(r=0;r<n;r++)t.push(e);return t}n.exports=t},function(n,e,r){"use strict";var t=[9,10,11,12,13,32,160,5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288,65279];n.exports=t.reduce(function(n,e){return n+String.fromCharCode(e)},"")},function(n,e,r){"use strict";function t(n,e){function r(n,r){for(var t=n,i=[],c=[],f=0;f<s.length;f+=1){var l=0===f?n:i[f-1];if(t=e(s[f],l,r),a(t)){c.push(t);break}var p=e(s[f],t,u({},r,{phase:"reconstruct"}));i.push(p)}return 0===c.length?{conforms:i}:new o(n,s,c,"One or more expressions failed AND test")}function t(n){var e=n.conforms;return e[s.length-1]}var s=n.opts.conformedExprs.map(i);return{trailblaze:r,reconstruct:t}}var o=r(2),a=r(0),i=r(7),u=r(4);n.exports=t},function(n,e,r){"use strict";function t(){return{trailblaze:o,reconstruct:o}}function o(n){return n}n.exports=t},function(n,e,r){"use strict";function t(n,e){function r(r,t){var o=n.get();if(o)return e(o,r,t)}return{trailblaze:r,reconstruct:r}}n.exports=t},function(n,e,r){"use strict";function t(n,e){function r(r,t){var c=[],f=[];if(Array.isArray(r)){if(s){var l=s.maxCount,p=s.minCount;if(i(l)&&r.length>l)return new o(r,n,f,"collOf: collection size "+r.length+" exceeds maxCount "+l+".");if(i(p)&&r.length<p)return new o(r,n,f,"collOf: collection size "+r.length+" is less than minCount "+p+".")}for(var v=0;v<r.length;v+=1){var d=e(u,r[v],t);if(a(d)){f.push(d);break}c.push(d)}return f.length>0?new o(r,n,f,"One or more elements failed collOf test"):c}return new o(r,n,[],"collOf expects an array")}function t(n,r){for(var t=[],o=0;o<n.length;o+=1){var a=e(u,n[o],r);t.push(a)}return t}var u=n.exprs[0],s=n.opts;return{trailblaze:r,reconstruct:t}}var o=r(2),a=r(0),i=r(32);n.exports=t},function(n,e,r){"use strict";function t(n,e){function r(r,t){var o=n.get();if(o)return e(o,r,t)}return{trailblaze:r,reconstruct:r}}n.exports=t},function(n,e,r){"use strict";function t(n,e){function r(n){return n}function t(n,e){if(!n)throw new Error("A function must be clauseified for instrumentation.");var r=e.conform,t=e.instrument;return r&&t?f(n,e):t?c(n,e):void 0}function c(n,e){var r=i(n),t=l(r,n,e),o=u(r,t,"__instrumented");return o}function f(n,e){var r=i(n),t=m(r,n,e),o=u(r,t,"__conformed");return o}function l(n,r){return function(){var t=Array.prototype.slice.call(arguments),o=v(r,n,t),a=r.apply(this,o),i=d(r,n,a),u=h?e(h,t,{conform:!0,instrument:!0}):t,s=void 0;return s=g?e(g,a,{conform:!0,instrument:!0}):a,p(n,r,x,u,s),i}}function p(e,r,t,o,i){if(t){var u=t.call(null,o,i);if(!u){var c=new a({args:o,ret:i},n,[],"Function "+e+" failed valiation on argument-return value relation");s(c)}}}function v(r,t,i){var u=t||"<anonymous>";if(!h)return i;var c=e(h,i,{phase:"trailblaze"});if(!o(c))return e(h,c,{phase:"reconstruct",conform:!1,instrument:!0});var f=new a(i,n,[c],"Arguments for function "+u+"() is not valid");s(f)}function d(r,t,i){var u=t||"<anonymous>";if(!g)return i;var c=e(g,i,{phase:"trailblaze"});if(!o(c)){var f=e(g,c,{phase:"reconstruct",instrument:!0,conform:!1});return f}var l=new a(i,n,[c],"Return value for function "+u+"() is not valid");s(l)}function m(n,r){var t=n||"<anonymous>";return function(){var i=Array.prototype.slice.call(arguments),u=e(h,i,{conform:!0,instrument:!0});if(o(u)){var c=new a(i,h,[u],"Arguments for function "+t+" is not valid");s(c)}var f=r.call(this,u);if(d(r,n,f),x){var l;l=g?e(g,f,{conform:!0,instrument:!0}):f,p(n,r,x,u,l)}return f}}var y=n.opts,h=y.args,g=y.ret,x=y.fn;return{trailblaze:r,reconstruct:t}}var o=r(0),a=r(2),i=r(3),u=r(14),s=r(58);n.exports=t},function(n,e,r){"use strict";function t(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function o(n,e){function r(r,o){var a={};for(var s in r)if(r.hasOwnProperty(s)){var c=e(l,s,o);if(i(c))return new u(r,n,t({},s,c),"mapOf: key "+s+" failed validation");var f=e(p,r[s],o);if(i(f))return new u(r,n,t({},s,f),"mapOf: value for key "+s+" failed validation");a[s]={expr:p,valGuide:f}}return a}function o(n,r){var t={};for(var o in n){var a=n[o],i=a.expr,u=a.valGuide;t[o]=e(i,u,r)}return t}var s=n.opts,c=s.keyExpression,f=s.valExpression,l=c&&a(c),p=f&&a(f);return{trailblaze:r,reconstruct:o}}var a=r(7),i=r(0),u=r(2);n.exports=o},function(n,e,r){"use strict";function t(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function o(n,e){function r(r,o){c||(c=u(n));var i=a(c,r,e,o),f=i.chain,l=i.matched,p=i.lastProblem;if(l===!0)return{chain:f};var v=void 0;if(p){var d=p.name,m=p.position,y=p.problem;v=t({},d?'"'+d+'"':"<At position "+m+">",y)}else v=[];return new s(r,n,v,"Clause "+n.type+" did not match value")}function o(n,r){var t=n.chain,o=i(t,e,r);return o}var c;return{trailblaze:r,reconstruct:o}}var a=r(50),i=r(49),u=r(47),s=r(2);n.exports=o},function(n,e,r){"use strict";function t(n){function e(e){var r=n.exprs[0];return r(e)?e:new a(e,n,[],"Predicate "+o(r)+"() returns false")}function r(n){return n}return{trailblaze:e,reconstruct:r}}var o=r(3),a=r(2);n.exports=t},function(n,e,r){"use strict";function t(n,e){function r(r,t){function o(n){n:for(var o in n.fields)if(n.fields.hasOwnProperty(o)){var a=n.fields[o],i=u(r,o,a,e,t),s=i.noop,c=i.problem,f=i.singleMatch,l=i.groupMatch;if(c){y.push([o,c]);break n}if(f)h.singles.push(f);else if(l)l.matchedKeys.length>0&&h.groups.push(l);else if(!s)throw"!"}}if(["object","function"].indexOf("undefined"==typeof r?"undefined":f(r))<0)return new d(r,n,[],"Value is not an object");s||(s=a(p,m,e,t));var i=s(r);if(l(i))return i;var v,y=[],h={val:r,groups:[],singles:[]};p&&(v=p.fieldDefs),v&&o(v);var g;if(m&&(g=m.fieldDefs),g&&o(g,!0),y.length>0){for(var x={},b=[],O=0;O<y.length;O++){var w=c(y[O],2),E=w[0],C=w[1];b.push(E),x[E]=C}var _=new d(r,n,x,"At least one property failed validation: "+b.join(", "));return _}return h}function t(n,r){var t,a=n.val,u=n.singles,s=n.groups,c={walkOpts:r},f=r.mutate;return t=f?a:v({},a),u.forEach(function(n){o(t,n,e,r)}),s.forEach(function(n){var a=n.name,u=n.matchedKeys;if(c){t[a]={};var s=[];u.forEach(function(n){o(t[a],n,e,r),s.push(n.key)}),i(t,s)}else u.forEach(function(n){o(t,n,e,r)})}),t}var s,p,m,y=n.opts.conformedArgs.shapeArgs,h=y.requiredFields,g=y.optionalFields;return h&&(p=h.req||h.required),g&&(m=g.opt||g.optional),{trailblaze:r,reconstruct:t}}function o(n,e,r,t){var o=e.key,a=e.clause,i=e.guide;n[o]=r(a,i,t)}function a(n,e,r,t){return function(e){if(n){var o,a=[],i=n.fieldDefs,u=n.keyList;if(i){o=[];for(var c in i.fields)i.fields.hasOwnProperty(c)&&o.push(c)}else{if(!u)throw"unsupported";o=[].concat(u)}for(var f=0;f<o.length;f++){var p=o[f];if(i&&i.fields[p].keyValExprPair){var v=!1;n:for(var m in e)if(e.hasOwnProperty(m)){var y=s(m,i.fields[p].keyValExprPair.keyExpression,r,t);if(!l(y)){v=!0;break n}}v||a.push(p)}else if(i&&i.fields[p].valExpressionOnly)if(e.hasOwnProperty(p)){var h=s(e[p],i.fields[p].valExpressionOnly,r,t);l(h)&&a.push(p)}else a.push(p);else{if(!u)throw"!";void 0===e[p]&&a.push(p)}}if(a.length>0)return new d(e,n,[],"req: keys required: "+a.join(", "))}return e}}function i(n,e){for(var r=0;r<e.length;r++)delete n[[e[r]]]}function u(n,e,r,t,o){var a=r.valExpressionOnly,i=r.keyValExprPair;if(i){var u=[],c=i.keyExpression,f=i.valExpression;n:for(var v in n)if(n.hasOwnProperty(v)){var d=s(v,c,t,o);if(!l(d)){if(n===n[v])continue n;var y=s(n[v],f,t,o);if(l(y))return{problem:y};u.push({key:v,clause:m(f),guide:y})}}return{groupMatch:{name:e,matchedKeys:u}}}if(a){var h=n[e];if(p(h)||n[e]===n)return{noop:!0};var g=s(h,a,t,o);return l(g)?{problem:g}:{singleMatch:{key:e,clause:m(a),guide:g}}}throw"!!"}function s(n,e,r,t){var o=m(e),a=r(o,n,t);return a}var c=function(){function n(n,e){var r=[],t=!0,o=!1,a=void 0;try{for(var i,u=n[Symbol.iterator]();!(t=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);t=!0);}catch(n){o=!0,a=n}finally{try{!t&&u.return&&u.return()}finally{if(o)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},l=r(0),p=r(12),v=r(4),d=r(2),m=r(7);n.exports=t},function(n,e,r){"use strict";function t(n,e){function r(r,t){var a=o(n.exprs,1),i=a[0];return e(i,r,t)}return{trailblaze:r,reconstruct:r}}var o=function(){function n(n,e){var r=[],t=!0,o=!1,a=void 0;try{for(var i,u=n[Symbol.iterator]();!(t=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);t=!0);}catch(n){o=!0,a=n}finally{try{!t&&u.return&&u.return()}finally{if(o)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n.exports=t},,,,,,,,function(n,e,r){"use strict";function t(n){return n&&n.__esModule?n:{default:n}}function o(n){var e=D.NamespaceObjClause.conform(n),r=i(n,null,null,e);return r}function a(n){var e=(0,$.getDefList)(n),r=Object.keys(e);return"<dl>\n    "+r.map(function(n){return"\n    <dt>\n      "+n+"\n    </dt>\n    <dd>\n      <ul>\n      "+e[n].map(function(n){var e=N(n,3),r=e[0],t=e[1],o=e[2];return"<li>\n            "+_(r+"/"+t)(function(n){return c((0,W.default)(o),j(n))})+"\n          </li>"}).join("")+"\n      </ul>\n    </dd>\n    "}).join("")+"\n  </dl>"}function i(n,e,r,t){var o=e?e+"."+r:r,a="",c=[],f=void 0,l=void 0,p=void 0;for(var v in t)if(t.hasOwnProperty(v))switch(v){case"subNamespaces":p=t[v];for(var d in p)if(p.hasOwnProperty(d)){var m=i(n,o,d,p[d]);c.push(m)}break;case".nsComment":f="<p><i>"+t[v]+"</i></p>";break;case".expr":l=s(n,r,t[".expr"],t[".meta"])}return l&&(a+=l),o&&(f||u(p))&&(a+="<h3>"+o+"/</h3><hr />"),f&&(a+=f),c.length>0&&(a+=c.join("\n")),a}function u(n){return!!n&&Object.keys(n).filter(function(e){return n[e][".expr"]}).length>0}function s(n,e,r,t){if(!r)throw new Error("Expression "+e+" does not exist in the registry");var o=void 0;return o=l(n,e,r,t)}function c(n,e){return"FCLAUSE"===n.type?e+"()":e}function f(n){return(0,I.default)(n)?K[n.type]||n.type.toLowerCase():(0,Z.default)(n)?"predicate":void 0}function l(n,e,r,t){var o=void 0,a=(0,$.resolve)(r,n);if(a&&!e)o=x(n,e,a,r,t);else if("CLAUSE_REF"===r.type)o=x(n,e,null,r,t);else{if("DELAYED"===r.type)return l(n,e,r.get(),t);o="FCLAUSE"===r.type?L(n,e,r,a,t):"OR"===r.type?M(n,e,a,r,t):"CAT"===r.type?O(n,e,a,r,t):(0,Z.default)(r)||"PRED"===r.type?R(n,e,r,t):(0,Z.default)(r)||"ANY"===r.type?g():"AND"===r.type?b(n,e,a,r,t):F(n,e,a,r,t)}var i=t&&t.name||e,u=e&&a?"\n      <h6>"+c(r,i)+'</h6>&nbsp;\n        <span class="tag tag-primary">\n          '+f(r)+"\n        </span>\n      ":null;return"\n    "+(e&&a?'<a name="'+a+'"></a>':"")+"\n    "+p({header:u,legend:a?'<span class="tag tag-info">[clause]</span>':d(r,n,a),borderlabel:h(r)})(o)}function p(n){var e=n.header,r=n.legend,t=n.borderlabel;return e?function(n){return'\n        <div class="card">\n          <div class="card-header inline-headers">\n            '+e+"\n          </div>\n        "+n+"\n        </div>\n      "}:r?function(n){return'\n    <fieldset class="card card-outline-'+(t||"default")+'">\n    <legend class="clause-type">\n      '+r+"\n    </legend>\n    "+n+"\n    </fieldset>\n    "}:void 0}function v(n){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return n.replace(/[&<>"']/g,function(n){return e[n]})}function d(n,e,r){return'\n    <span \n      role="button"\n      data-toggle="popover"\n      data-trigger="focus hover"\n      data-html="true"\n      data-content="'+v(A(n,e,r))+'"\n      data-container="body"\n      data-animation="false"\n      data-delay="500"\n      class="tag tag-'+h(n)+'">\n      '+y(n)+"\n    </span>\n  "}function m(n){var e=void 0,r=(0,W.default)(n);return e=(0,Z.default)(r)?"pred":r.type.toLowerCase()}function y(n){var e=m(n);switch(e){case"pred":return"[pred] satisfies predicate";case"fclause":return"[fclause] a function";case"z_or_m":return"[*] zero or more";case"o_or_m":return"[+] one or more";case"z_or_o":return"[?] optional";case"coll_of":return"[collOf] a collection of";case"cat":return"[cat] a sequence of";case"or":return"[or] either one of";default:return'<span class="tag tag-info">['+e+"]</span>"}}function h(n){var e=m(n);switch(e){case"pred":return"primary";case"fclause":return"info";case"cat":case"or":return"info";default:return"info"}}function g(){return'\n    <div class="card-block">Any value.</div>\n  '}function x(n,e,r,t,o){var a=r||t.ref;return'\n    <div class="card-block">\n      A value of type\n      '+_(a)(function(n){return n})+"\n    </div>\n  "}function b(n,e,r,t,o){var a=(o&&o.example,t.opts.conformedExprs.map(function(e,r){return'\n        <fieldset class="list-group-item card-outline-'+h(t)+'">\n          <legend class="clause-type">\n            <span class="tag tag-default">Condition '+(r+1)+' </span>\n          </legend>\n          <div class="row">\n            <div class="col-md-12">\n              '+l(n,null,B(e),null)+"\n            </div>\n          </div>\n        </fieldset>\n    "})),i='\n    <div class="card-block">\n      <p class="card-title">\n        Should satisfy <em>all</em> of the following expression:\n      </p>\n    </div>\n    <div class="list-group list-group-flush list-for-cat">\n      '+a.join(" ")+"\n    </div>\n  ";return i}function O(n,e,r,t,o){var a=(o&&o.example,t.exprs.map(function(e,r){var a=e.name,i=e.expr,u=o&&o[a]&&o[a].comment;return'\n        <fieldset class="list-group-item card card-outline-'+h(t)+'">\n          <legend class="clause-type">\n          '+(a?'\n            <span class="tag tag-default">Part '+(r+1)+'</span>\n            <span class="lead font-italic text-primary">\n              &ldquo;'+a+"&rdquo;</span>          \n          ":'<span class="tag tag-default">Part '+(r+1)+"</span>")+'\n          </legend>\n          <div class="row">\n            <div class="col-md-12">\n              '+(u?"<span>"+u+"</span>":"")+'\n            </div>\n          </div>\n          <div class="row">\n            <div class="col-md-12">\n              '+l(n,null,i,o&&o[a])+"\n            </div>\n          </div>\n        </fieldset>\n    "})),i='\n    <div class="card-block">\n      <p class="card-title">\n        Should be <em>an ordered list</em> of the following:\n      </p>\n    </div>\n    <div class="list-group list-group-flush list-for-cat">\n      '+a.join(" ")+"\n    </div>\n  ";return i}function w(n,e,r,t){var o=C([],[],n,e,r,t,[]),a=E(o);return a}function E(n){var e=void 0;if(Array.isArray(n))e=n.map(E).join(""),e="<ul>"+e+"</ul>";else if((0,V.isObj)(n)){var r=[];for(var t in n)r.push([t,n[t]]);e=r.map(function(n){var e=N(n,2),r=e[0],t=e[1];return"<li>&ldquo;"+r+"&rdquo;:<div>"+E(t)+"</div></li>"}).join(""),e="<ul>"+e+"</ul>"}else(0,V.isStr)(n)&&(e=n);return e}function C(n,e,r,t,o,a,i){if(t){if("FCLAUSE"==t.type){var u=a&&a.name||r;return C([u,"("],[")"],null,t.opts.args,o,a&&a.args,i)}if("OR"===t.type){var s=t.opts.named,c=void 0;if(s){c={};var f=!0,l=!1,p=void 0;try{for(var v,d=t.exprs[Symbol.iterator]();!(f=(v=d.next()).done);f=!0){var m=v.value;c[m.name]=C(n,e,null,m.expr,o,a&&a[m.name],i)}}catch(n){l=!0,p=n}finally{try{!f&&d.return&&d.return()}finally{if(l)throw p}}}else{c=[];var y=!0,h=!1,g=void 0;try{for(var x,b=t.exprs[Symbol.iterator]();!(y=(x=b.next()).done);y=!0){var O=x.value;c.push(C(n,e,null,O.expr,o,a&&a[O.name],i))}}catch(n){h=!0,g=n}finally{try{!y&&b.return&&b.return()}finally{if(h)throw g}}}return c}if("CAT"===t.type){for(var s=t.opts.named,w=[],E=function(n){var e=t.exprs[n],r=(0,$.resolve)(e.expr,o);s?w.push(r?_(r)(function(){return e.name}):e.name):r&&w.push(_(r)(j)),n<t.exprs.length-1&&w.push(", ")},A=0;A<t.exprs.length;A++)E(A);return["<em>"].concat(n).concat(w).concat(e).concat(["</em>"])}return console.error("Handler still missing for synopsis type ",t),t.type}return n.concat(e)}function _(n){return function(e){return'<a href="#'+n+'" data-path="'+n+'">'+e(n)+"</a>"}}function A(n,e,r){return"\n    <pre>"+unescape(P((0,G.default)(n,S(e,r),2)))+"</pre>\n  "}function P(n){return n.split("<").join("&lt;").split(">").join("&gt;")}function S(n,e){return function(r){var t=(0,$.resolve)(r,n);if(t&&t!==e){var o=_(t)(j);return o=escape(o),[o]}return null}}function j(n){var e=n.substring(n.indexOf("/")+1);return e}function R(n,e,r,t){var o=r.exprs?r.exprs[0]:r,a='\n    <div class="card-block">\n      '+k("A value that satisfies ",o)+"\n    </div>\n  ";return a}function k(n,e){var r=(0,T.default)(e);return"\n    <em>\n      "+n+'\n      <span\n        data-toggle="popover"\n        data-trigger="hover click"\n        data-html="true"\n        role="button"\n        data-placement="top"\n        data-content="<pre>'+e.toString()+'</pre>"\n        data-container="body"\n        data-animation="false"\n        data-delay="500">\n        '+r+"()\n      </span>\n    </em>\n  "}function F(n,e,r,t,o){var a='\n    <div class="card-block">\n      '+t.exprs.map(function(e){var r=e.name,t=e.expr;return t?l(n,r,t,o&&o[r]):l(n,null,e,null)}).join("")+"\n      TODO\n    </div>\n  ";return a}function M(n,e,r,t,o){o||(o={});var a=t.exprs.map(function(e,r){var a=e.name,i=e.expr,u=o[a]&&o[a].comment,s=o[a]&&o[a].examples;return(0,V.isStr)(s)&&(s=[s]),'\n        <fieldset class="list-group-item card-outline-'+h(t)+'">\n          <legend class="clause-type">\n            <span class="tag tag-default">\n                Option '+(r+1)+"\n            </span>\n            "+(a?'\n                <span class="lead font-italic text-primary">\n                  &ldquo;'+a+"&rdquo;\n                </span>\n            ":"")+'\n          </legend>\n          <div class="row">\n            <div class="col-md-12">\n            '+(u?"<div>"+u+"</div>":"")+"\n            \n            "+(s?"<h6>Examples: </h6>"+s.map(function(n){return"\n              <pre><code>"+n+"</code></pre>\n            "}).join("\n"):"")+'\n            </div>\n          </div>\n          <div class="row">\n            <div class="col-md-12">\n              '+l(n,null,i,o&&o[a])+"\n            </div>\n          </div>\n        </fieldset>\n    "}),i='\n    <div class="card-block">\n      <p class="card-title">\n      '+(e?"":"\n      ")+'\n        Should be <em>one of</em> the following:\n      </p>\n    </div>\n    <div class="list-group list-group-flush list-for-or">\n      '+a.join("")+"\n    </div>\n  ";return i}function L(n,e,r,t){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=[],i=o||{},u=i.comment,s=i.examples;(0,V.isStr)(s)&&(s=[s]);var c=r.opts,f=c.args,p=c.ret,v=c.fn;u&&a.push([null,u]),e&&t&&a.push(["Syntax",'\n      <blockquote class="blockquote">\n        <small>\n          <em class="text-muted">\n            '+A(r,n,t)+"\n          </em>\n        </small>\n      </blockquote>\n    "]),f&&a.push(["Synopsis",w(e,r,n,o)]),s&&a.push(["Examples",s.map(function(n){return"\n      <pre><code>"+n+"</code></pre>\n    "}).join("\n")]),f&&a.push(["Argument Clause",l(n,null,f,o&&o.args)]),p&&a.push(["Return Value Clause",l(n,null,p,o&&o.ret)]),v&&a.push(["Argument-return value relation","<pre>"+(0,T.default)(v)+"</pre>"]);var d='\n    <dl class="card-block">\n    '+a.map(function(n){var e=N(n,2),r=e[0],t=e[1],o=r?"<dt>"+r+"</dt>":"",a="<dd>"+t+"</dd>";return""+o+a}).join("\n")+"\n    </dl>\n  ";return d}var N=function(){function n(n,e){var r=[],t=!0,o=!1,a=void 0;try{for(var i,u=n[Symbol.iterator]();!(t=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);t=!0);}catch(n){o=!0,a=n}finally{try{!t&&u.return&&u.return()}finally{if(o)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),D=r(24),q=r(3),T=t(q),z=r(10),Z=t(z),U=r(5),I=t(U),V=r(17),Y=r(41),G=t(Y),H=r(25),W=t(H),$=r(42),B=r(7),K={FCLAUSE:"function",PRED:"predicate",CAT:"cat sequence"},J={gen:o,genForExpression:l,genCot:a};n.exports=J,n.exports.default=J}])});