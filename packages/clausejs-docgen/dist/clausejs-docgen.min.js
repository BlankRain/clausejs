!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.C=e():n.C=e()}(this,function(){return function(n){function e(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return n[t].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=n,e.c=r,e.i=function(n){return n},e.d=function(n,r,t){e.o(n,r)||Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:t})},e.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(r,"a",r),r},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="",e(e.s=87)}([function(n,e,r){"use strict";function t(n){return n instanceof o}var o=r(2);n.exports=t},function(n,e,r){"use strict";function t(n){var e=n.type,r=n.exprs,t=n.opts,o=(n.fragments,n.conformFn),a=n.generateFn;if(this.type=e,t&&(this.opts=t),o&&(this.conform=o),a&&(this.generate=a),!r)throw new Error("Expressions are required when constructing a clause.");this.exprs=r}n.exports=t},function(n,e,r){"use strict";function t(n,e,r,t){var a=this;if(this.isProblem=!0,4!==arguments.length)throw"Problem arg len err";this.val=n,this.name="Problem",this.failsPredicate=e,this.shortMessage=t,this.subproblems=r,l(this,"message",function(){return o(a,0)}),this.toString=function(){return a.message}}function o(n,e){var r=n.subproblems,t=n.val,c=n.shortMessage;if(Array.isArray(r)){var l;return 0===r.length?c+"; val: "+f(t,null,2):(l=r.map(function(n){return""+i(e)+o(n,e+1)+u(e)}),c+", because\n"+a(" ",2*e)+" "+l.join(", "))}if("object"===("undefined"==typeof r?"undefined":s(r))){l=[];for(var p in r)r.hasOwnProperty(p)&&l.push("-> "+p+": "+i(e)+" "+o(r[p],e+1)+u(e));return c+", because\n"+a(" ",2*e)+" "+l.join(", ")}}function a(n,e){for(var r="",t=0;t<e;t+=1)r+=n;return r}function i(n){return c[n]}function u(n){return c[c.length-n-1]}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},c="❰❮❬❨❪﹙₍₎﹚❫❩❭❯❱",f=r(20),l=r(69);n.exports=t},function(n,e,r){"use strict";function t(n){return a(n)?n.__predToString?n.__predToString():o?o(n):n.name:null}var o,a=r(13);if("test"!==function(){}.name){var i=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,u=Function.prototype.toString,s=String.prototype.match,c=String.prototype.replace,f=r(71),l=new RegExp("^["+f+"]*(?:function|class)["+f+"]*\\*?["+f+"]+([\\w\\$]+)["+f+"]*","i");o=function(n){var e=s.call(c.call(u.call(n),i," "),l);return e&&"anonymous"!==e[1]?e[1]:""}}else"anonymous"===(new Function).name&&(o=function(n){return n.name&&"anonymous"!==n.name?n.name:""});n.exports=t},function(n,e,r){"use strict";function t(n){if(null===n||void 0===n)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function o(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de","5"===Object.getOwnPropertyNames(n)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var t=Object.getOwnPropertyNames(e).map(function(n){return e[n]});if("0123456789"!==t.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(n){o[n]=n}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(n){return!1}}var a=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;n.exports=o()?Object.assign:function(n,e){for(var r,o,s=t(n),c=1;c<arguments.length;c++){r=Object(arguments[c]);for(var f in r)i.call(r,f)&&(s[f]=r[f]);if(a){o=a(r);for(var l=0;l<o.length;l++)u.call(r,o[l])&&(s[o[l]]=r[o[l]])}}return s}},function(n,e,r){"use strict";var t=r(1),o=r(22),a=o(t);n.exports=a},function(n,e,r){"use strict";var t=r(9);n.exports=function(n){if(!n)throw console.error(n),"!";if(n.clause)return n.clause;if(n.pred)return t(n.pred);throw console.error("unsupported:",n),"Not implemented"}},function(n,e,r){"use strict";function t(n){return null!==n&&void 0!==n&&n.constructor===String}n.exports=t},function(n,e,r){"use strict";function t(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function o(){var n=Array.prototype.slice.call(arguments);return{expressions:{withLabels:n.map(function(n){var e=v(n,3),r=e[0],o=e[1],a=e[2];return{name:r,expr:t({},o,a)}})}}}function a(){var n=Array.prototype.slice.call(arguments);return{expressions:{withoutLabels:n.map(function(n){var e=v(n,2),r=e[0],o=e[1];return t({},r,o)})}}}function i(n){var e=new m({type:"AND",exprs:[],fragments:n,opts:{conformedExprs:n}});return e.conform=function(n){return S(e,n,{conform:!0})},e}function u(n){var e=n.expressions.withLabels;if(e)for(var r=[],t=0;t<e.length;t+=1){var o=e[t].name;if(r.indexOf(o)>=0)throw new Error("Duplicate label detected: "+o);r.push(o)}return!0}function s(n){return O(n,function(e){var r,t=e.expressions,o=t.withLabels,a=t.withoutLabels,i=e.options;if(o){r=o;var u=r.map(function(n){var e=n.expr,r=g(e);return d({},n,{expr:r,clause:void 0,pred:void 0,clauseRef:void 0,delayedClause:void 0})}),s=d({},i,{named:!0}),c=new m({type:n,exprs:u,opts:s});return c.conform=function(n){return S(c,n,{conform:!0})},c}if(a){r=a,u=r.map(function(n){var e;if(n.clause)return e=n.clause,d({},n,{expr:e,clause:void 0});if(n.pred)return e=C(n.pred),d({},n,{expr:e,pred:void 0});if(n.clauseRef)return e=n.clauseRef,d({},n,{expr:e,clauseRef:void 0});if(n.delayedClause)return e=n.delayedClause,d({},n,{expr:e,delayedClause:void 0});throw console.error(n),"!"});var f=d({},i,{named:!1});return c=new m({type:n,exprs:u,opts:f}),c.conform=function(n){return S(c,n,{conform:!0})},c}return c=new m({type:n,exprs:[],opts:{}}),c.conform=function(n){return S(c,n,{conform:!0})},c})}function c(n){return O(n,function(e){var r,t=e.expr,o=e.opts;if(t.clause)r=t.clause;else if(t.pred)r=C(t.pred);else if(t.clauseRef)r=t.clauseRef;else{if(!t.delayedClause)throw console.error(t),"internal err";r=t.delayedClause}var a=C(r),i=new m({type:n,exprs:[a],opts:d({},o,{enclosedClause:a})});return i.conform=function(n){return S(i,n,{conform:!0})},i})}function f(n){return j(n)}function l(n){if(b(n))throw n;var e=n.keyExpression,r=n.valExpression,t=new m({type:K,exprs:[],opts:{keyExpression:e,valExpression:r}});return t.conform=function(n){return S(t,n,{conform:!0})},t}function p(n){if(b(n))throw n;var e=new m({type:J,exprs:[],fragments:[],opts:{conformedArgs:n}});return e.conform=function(n){return S(e,n,{conform:!0})},e}var v=function(){function n(n,e){var r=[],t=!0,o=!1,a=void 0;try{for(var i,u=n[Symbol.iterator]();!(t=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);t=!0);}catch(n){o=!0,a=n}finally{try{!t&&u.return&&u.return()}finally{if(o)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=r(4),m=r(1),y=r(5),h=r(10),g=r(6),b=r(0),x=r(42),O=r(16),w=r(15),E=r(26),_=r(48),C=r(9),P=r(21),S=r(17),A=r(24),j=r(7),N=r(39),R=r(38),F=C(y),M=C(x),k=s(_.CAT),L=s(_.OR),q=c(_.Z_OR_M),D=c(_.O_OR_M),T=c(_.Z_OR_O),I=c(_.COLL_OF),z=C(y),U=C(w),Z=C(E),W=C(h),V=L(o(["clause","clause",z],["pred","clause",W])),G=k(o(["name","clause",M],["comment","clause",T({expr:{pred:j}})],["expr","clause",V])),Y=k(o(["expressions","clause",L(o(["withLabels","clause",L(a(["clause",q({expr:{clause:G}})],["clause",I({expr:{clause:G}})]))],["withoutLabels","clause",q({expr:{clause:V}})]))],["options","clause",T({expr:{pred:R}})])),$=i([{clause:Y},{pred:u}]),B=P({args:D({expr:{clause:V}}),ret:y}),Q={args:$,ret:F},H=function(n){return{args:k(o(["expr","clause",V],["opts","clause",T({expr:n})])),ret:F}},J="SHAPE",K="MAP_OF",X=l({keyExpression:{clause:C(j)},valExpression:{clause:L(o(["valExpressionOnly","clause",V],["keyValExprPair","clause",k(o(["keyExpression","clause",V],["valExpression","clause",V]))]))}}),nn=q({expr:{pred:f}}),en=L(o(["keyList","clause",nn],["fieldDefs","clause",X])),rn=p({shapeArgs:{optionalFields:{opt:{fieldDefs:{requiredFields:{keyValExprPair:{keyExpression:{pred:N("req","required")},valExpression:{clause:en}}},optionalFields:{keyValExprPair:{keyExpression:{pred:N("opt","optional")},valExpression:{clause:en}}}}}}}}),tn=P({args:k(o(["keyExpression","clause",V],["valExpression","clause",V])),ret:y}),on=(p({shapeArgs:{optionalFields:{opt:{fieldDefs:{requiredFields:{keyValExprPair:{keyExpression:{pred:N("req","required")},valExpression:{clause:en}}},optionalFields:{keyValExprPair:{keyExpression:{pred:N("opt","optional")},valExpression:{clause:en}}}}}}}}),P({args:k(o(["shapeArgs","clause",rn])),ret:y})),an=on.instrumentConformed(p),un=tn.instrumentConformed(l),sn=P(H({pred:A})),cn=sn.instrumentConformed(I),fn=P(Q),ln=P(Q),pn=P(H({pred:A})),vn=P(H({pred:A})),dn=P(H({pred:A})),mn=B.instrumentConformed(i),yn={cat:fn.instrumentConformed(k),or:ln.instrumentConformed(L),zeroOrMore:pn.instrumentConformed(q),zeroOrOne:dn.instrumentConformed(T),oneOrMore:vn.instrumentConformed(D),ExprClause:V,ClauseClause:z,PredClause:W,DelayedClauseClause:Z,ClauseRefClause:U,CatFnClause:fn,AndFnClause:B,OrFnClause:ln,ZeroOrMoreFnClause:pn,OneOrMoreFnClause:vn,ZeroOrOneFnClause:dn,CollOfClause:sn,collOf:cn,and:mn,shape:an,keys:an,mapOf:un,ShapeFnClause:on,MapOfFnClause:tn};yn.alt=yn.or,yn["*"]=yn.zeroOrMore,yn["+"]=yn.oneOrMore,yn["?"]=yn.zeroOrOne,n.exports=yn},function(n,e,r){"use strict";function t(n){if(u(n)||s(n)||c(n))return n;if(i(n))return o(n);throw console.error(n),new Error("'Expression must either be a Clause object or a predication function that returns true or false. Given value: "+v(n)+"'")}function o(n){return new f({type:d,exprs:[n],opts:{predicate:n},conformFn:a(n)})}function a(n){return function(e){return n(e)?e:new l(e,n,[],"Predicate "+p(n)+" returns false")}}var i=r(10),u=r(5),s=r(15),c=r(26),f=r(1),l=r(2),p=r(3),v=r(20),d="PRED";n.exports=t},function(n,e,r){"use strict";function t(n){return o(n)}var o=r(13);n.exports=t},function(n,e,r){"use strict";var t=r(4),o=r(8),a=r(8),i=a.shape,u=a.keys,s=a.mapOf,c=r(54),f=r(55),l=r(49),p=r(46),v=p.wall,d=r(34),m=function(n){return o.cat.apply(null,Array.prototype.slice.call(n).map(d))},y={any:r(47),fclause:r(21),wall:v,clause:v,nullable:c,undefinable:f,maybe:l,sCat:m},h=t({},o,{shape:i,keys:u,mapOf:s},y);n.exports=h},function(n,e,r){"use strict";var t=r(37),o=r(58),a=r(36),i=r(35),u=r(13),s=r(24),c=r(38),f=r(34),l=r(39),p=r(7),v=r(57),d=r(60),m=r(22),y=r(59),h=Array.isArray,g={isNull:r(23),isUndefined:r(14),notEmpty:r(61),isBool:i,isBoolean:i,isFn:u,isFunction:u,isNum:t,isNumber:t,isNatInt:o,isNaturalNumber:o,isInt:a,isInteger:a,isObj:s,isObject:s,isPlainObj:c,isPlainObject:c,isStr:p,isString:p,isArray:h,isArr:h,equal:f,equals:f,equalsTo:f,eq:f,oneOf:l,not:d,isDate:v,instanceOf:m,isUuid:y,isUUID:y};g.default=g,n.exports=g},function(n,e,r){"use strict";function t(n){var e={};return(n||!1)&&["[object Function]","[object GeneratorFunction]"].indexOf(e.toString.call(n))>=0}n.exports=t},function(n,e,r){"use strict";n.exports=function(n){return void 0===n}},function(n,e,r){"use strict";function t(n){return n instanceof o}var o=r(32);n.exports=t},function(n,e,r){"use strict";function t(n,e,r){if(n){var t="return function "+n+(r||"")+"(){ return action.apply(this, arguments); };";return new Function("action",t)(e)}return e}n.exports=t},function(n,e,r){"use strict";function t(n,e,r){var t=r.phase,i=o(n);if(t){if(i[t])return i[t](e,r);throw"!"}var u=i.trailblaze(e,a({phase:"trailblaze"},r));return g(u)?u:i.reconstruct(u,a({phase:"reconstruct"},r))}function o(n){var e=h(n),r=b[e.type];if(!r)throw"unsupported type "+e.type;var o=r(e,t);return o}var a=r(4),i=r(79),u=r(73),s=r(80),c=r(82),f=r(77),l=r(81),p=r(72),v=r(75),d=r(78),m=r(74),y=r(76),h=r(9),g=r(0),b={OR:i,CAT:i,COLL_OF:v,ANY:u,Z_OR_M:i,O_OR_M:i,Z_OR_O:i,PRED:s,WALL:c,SHAPE:l,AND:p,CLAUSE_REF:m,DELAYED:y,FCLAUSE:f,MAP_OF:d};n.exports=t},function(n,e,r){"use strict";function t(n){return n&&n.__esModule?n:{default:n}}var o=r(28),a=t(o),i=r(30),u=t(i);n.exports={conform:r(25),isValid:r(68),isNamespacePath:r(67),identity:r(41),isProblem:r(0),delayed:r(40),enforce:r(63),isClause:r(5),isFclause:r(66),isClauseRef:r(15),deref:r(29),isClauseName:r(42),describe:u.default,sExpression:a.default,handle:r(19)}},function(n,e,r){"use strict";function t(n,e,r){for(var t in n)return n.hasOwnProperty(t)&&e.hasOwnProperty(t)?e[t](n[t]):r(n[t]);throw console.error(n),new Error("No cases present in the given object")}n.exports=t},function(n,e,r){"use strict";function t(n,e){var r=Array.prototype.slice.call(arguments);return r[1]=function(n,r){var t;if(o(r)){var i=a(r);t=i?i+"()":r.toString()}else t=r;return e?e(t):t},JSON.stringify.apply(this,r)}var o=r(13),a=r(3);n.exports=t},function(n,e,r){"use strict";function t(n){var e=(n.args,n.ret,n.fn,new o({type:"FCLAUSE",exprs:[],opts:n}));return e.instrumentConformed=function(n){return a(e,n,{conform:!0,instrument:!0})},e.instrument=function(n){return a(e,n,{conform:!1,instrument:!0})},e}var o=r(1),a=r(17);r(3),n.exports=t},function(n,e,r){"use strict";var t=r(3),o=r(16);n.exports=function(n){var e=t(n),r=function(e){return e instanceof n};return e&&(r=o("instanceOf_"+e,r)),r.__predToString=function(){return"instanceOf_"+(e||"anonymous_type")+"_"},r}},function(n,e,r){"use strict";function t(n){return null===n}n.exports=t},function(n,e,r){"use strict";function t(n){return"object"===("undefined"==typeof n?"undefined":o(n))&&null!==n}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};n.exports=t},function(n,e,r){"use strict";function t(n,e,r){if(n&&o(n)){var t=n.conform(e);return t}throw new Error("Expression needs to be of type Clause. expression: \n"+n+"\n offending value: "+e)}var o=r(5);n.exports=t},function(n,e,r){"use strict";var t=r(33),o=r(22);n.exports=o(t)},function(n,e,r){"use strict";function t(n){return!!/^[^.@%\&\*#]+/.test(n)}Object.defineProperty(e,"__esModule",{value:!0}),e.NamespaceObjClause=e.ResolveFnClause=e.GetMetaFnClause=e.SetMetaFnClause=e.isNamespacePath=e.NamespaceFnClause=e.GetNSFnClause=e.SetNSFnClause=e.isClauseRef=void 0;var o=r(11),a=r(18),i=r(12),u=r(65),s=(0,a.delayed)(function(){return o.ExprClause}),c=(0,o.cat)("nsPath",a.isNamespacePath),f=(0,o.fclause)({args:c,ret:a.isClauseRef}),l=(0,o.cat)("nsPath",a.isNamespacePath,"expression",s),p=(0,o.fclause)({args:l,ret:i.isBool}),v=(0,o.or)("register",l,"retrieve",c),d=(0,o.fclause)({args:v,ret:(0,o.or)(i.isUndefined,a.isClauseRef)}),m=(0,o.fclause)({args:(0,o.cat)("source",(0,o.or)("namespacePath",a.isNamespacePath,"expression",o.ExprClause),"metaObj",i.isObj,"registry",(0,o.zeroOrOne)(i.isObj)),ret:i.isUndefined}),y=(0,o.fclause)({args:(0,o.cat)("source",(0,o.or)("namespacePath",a.isNamespacePath,"expression",o.ExprClause),"registry",(0,o.zeroOrOne)(i.isObj)),ret:(0,o.maybe)(i.isObj)}),h=(0,o.fclause)({args:(0,o.cat)("expression",o.ExprClause,"registry",(0,o.zeroOrOne)(i.isObj)),ret:a.isNamespacePath}),g=(0,o.shape)({optional:{subNamespaces:[t,(0,a.delayed)(function(){return g})],".meta":i.isObj,".expr":u}});e.isClauseRef=a.isClauseRef,e.SetNSFnClause=p,e.GetNSFnClause=f,e.NamespaceFnClause=d,e.isNamespacePath=a.isNamespacePath,e.SetMetaFnClause=m,e.GetMetaFnClause=y,e.ResolveFnClause=h,e.NamespaceObjClause=g},function(n,e,r){"use strict";function t(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function o(n){this.isRecursive=!0,this.expression=n}function a(n){b(this,n)}function i(n){b(this,n)}function u(n){this.value=n}function s(n){var e=P("sExpression",N(function(){return r}),"quotedParamsMap",N(function(){return u}),"unquotedParamsMap",N(function(){return s}),"optionsObj",L,"recursive",q(o)),r=O(C("head",n,"params",P("labelled",E(C("label",D,"item",N(function(){return e}))),"unlabelled",E(C("item",N(function(){return e})))))),t=A(w,j(P("keyList",E(N(function(){return D})),"singleParam",N(function(){return e})))),u=_(q(a),N(function(){return t})),s=_(q(i),N(function(){return t}));return[r,e]}function c(n,e){var r=e.fieldDefs,o=e.keyList;if(r){var i=new a;for(var u in r)if(r.hasOwnProperty(u)){var s=R(r[u],{keyValExprPair:function(e){return f(n,e)},valExpressionOnly:function(e){return p(n,g(e))}},function(){throw"!g"});b(i,t({},u,s))}return i}if(o)return o;throw"!w"}function f(n,e){var r=e.keyExpression,t=e.valExpression;return new i({key:p(n,g(r)),val:p(n,g(t))})}function l(n,e){var r=V[e.type];if(r){var t=r(n,e);return t}throw console.error(e),new Error("Unsupported clause type "+e.type+".")}function p(n,e){if(d(n,e))return new o(e);var r=F(e),t=void 0,a=n;if("DELAYED"===r.type||"CLAUSE_REF"===r.type)return t=r.get(),p(n,t);t=r,a=v(n,r);var i=l(a,t);return[t].concat(i)}function v(n,e){if(!d(n,e))return n.concat([e])}function d(n,e){return n.indexOf(e)>=0}function m(n){var e=[];return p(e,n)}Object.defineProperty(e,"__esModule",{value:!0});var y=function(){function n(n,e){var r=[],t=!0,o=!1,a=void 0;try{for(var i,u=n[Symbol.iterator]();!(t=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);t=!0);}catch(n){o=!0,a=n}finally{try{!t&&u.return&&u.return()}finally{if(o)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=r(3),g=r(6),b=r(4),x=r(11),O=x.wall,w=x.any,E=x.zeroOrMore,_=x.and,C=x.cat,P=x.or,S=x.ExprClause,A=x.mapOf,j=x.maybe,N=r(40),R=r(19),F=r(9),M=r(12),k=M.isStr,L=M.isPlainObj,q=M.instanceOf,D=P("str",k,"quoted",q(u)),T=s(S),I=y(T,2),z=I[0],U=I[1],Z=function(n,e){var r=e.opts.enclosedClause;return[p(n,r)]},W=function(n,e){var r=e.opts.named,t=e.exprs;if(0===t.length)return[];if(r){var o=t.reduce(function(e,r){var t=r.name,o=r.expr;return e.concat([new u(t),p(n,o)])},[]);return o}return t.reduce(function(e,r){var t=r.expr;return e.concat([p(n,t)])},[])},V={PRED:function(){return[]},WALL:function(n,e){var r=e.opts.enclosedClause;return[p(n,r)]},AND:function(n,e){var r=e.opts.conformedExprs;return r.map(g).map(function(e){return p(n,e)})},CAT:W,OR:W,Z_OR_M:Z,O_OR_M:Z,Z_OR_O:Z,COLL_OF:Z,ANY:function(){return[]},MAP_OF:function(n,e){var r=e.opts;return f(n,r)},SHAPE:function(n,e){var r=e.opts.conformedArgs.shapeArgs,t=r.optionalFields;t=void 0===t?{}:t;var o=t.opt,a=t.optional,u=r.requiredFields;u=void 0===u?{}:u;var s=u.req,f=u.required;return b(new i,s||f?{required:c(n,s||f)}:{},o||a?{optional:c(n,o||a)}:{})},FCLAUSE:function(n,e){var r=e.opts,t=r.args,o=r.ret,a=r.fn;return b(new i,t?{args:p(n,t)}:{},o?{ret:p(n,o)}:{},a?{fn:[h(a)+"()"]}:{})}};e.default=m,e.SExpressionClause=z,e.ParamItemClause=U,e.Recursive=o,e.QuotedParamsMap=a,e.UnquotedParamsMap=i,e.genClauses=s},function(n,e,r){"use strict";n.exports=function(n){for(var e=n;e.get;)e=e.get();return e}},function(n,e,r){"use strict";function t(n){return n&&n.__esModule?n:{default:n}}function o(n,e,r){var t=(0,d.default)(n),o=v.SExpressionClause.conform(t);if(h(o))throw console.error(o),new Error("The given expression is not a valid expression.");var i=a(o,e),u=0,s=p(i,u,r);return s}function a(n,e){return i(function(n){var e=n.head,r=n.params;return{head:b(e),params:r}},n,e)}function i(n,e,r){var t=n(e),o=t.head,a=t.params;if(!o)return[];if(r){var i=r(o);if(i)return i}if("PRED"===o.type)return[""+x(o.opts.predicate)];var s=m(o),l=void 0;if(a){var p=a.labelled,v=a.unlabelled,d=a.keyList;if(p){var y=p.reduce(function(e,t){var o=t.label,a=t.item;return e.concat([[f(o),", ",c(n,a,r)]])},[]);l=u(y,[", ",E])}else if(v){var h=v.map(function(e){var t=e.item;return c(n,t,r)});l=u(h,[", ",E])}else if(d){var g=d;l=u(g,[", "])}else l=[]}else l=[];return[s,"("].concat(l.length>1?[_,E]:[0===l.length?"":" "]).concat(l).concat(l.length>1?[C,E]:[0===l.length?"":" "]).concat([")"])}function u(n,e){return 0===n.length?n:n.reduce(function(r,t,o){return o<n.length-1&&!s(t)?r.concat([t]).concat(e):r.concat([t])},[])}function s(n){return n===E||n===_||n===C}function c(n,e,r){var t=g(e,{label:f,sExpression:function(e){return i(n,e,r)},quotedParamsMap:function(e){return l(n,e,r,!0)},unquotedParamsMap:function(e){return l(n,e,r,!1)},optionsObj:function(n){return O(n)},recursive:function(n){var e=n.expression;return["<recursive>: ",m(e)]}},function(){throw"!s"});return t}function f(n){var e=n.str,r=n.quoted;return e?e:r?'"'+r.value+'"':void 0}function l(n,e,r,t){var o=["{",_,E],a=[];for(var i in e)if(e.hasOwnProperty(i)){var s=[];s.push(t?'"'+i+'": ':"<"+i+">: ");var f=g(e[i],{keyList:function(n){return["[ "].concat(u(n.map(function(n){return'"'+n+'"'}),[", "])).concat(" ]")},singleParam:function(e){return c(n,e,r)}},function(){throw"!e"});f&&(s.push(f),a.push(s))}return a=u(a,[", ",E]),o=o.concat(a).concat([C,E,"}"])}function p(n,e,r){var t=e,o=!1;return n.reduce(function(n,e){if(o&&(o=!1,n=n.concat(w(r*t," ").join(""))),y(e))return n.concat(e);if(Array.isArray(e))return n.concat(p(e,t,r));if(e===E){if(r>0)return o=!0,n.concat("\n")}else if(e===_)t+=1;else{if(e!==C)throw console.error(e),"!3";t-=1}return n},"")}Object.defineProperty(e,"__esModule",{value:!0}),e.isSpecial=e.interpose=e.INDENT_OUT=e.INDENT_IN=e.NEW_LINE=e.fragsToStr=e.humanReadable=void 0;var v=r(28),d=t(v),m=r(64),y=r(7),h=r(0),g=r(19),b=r(6),x=r(3),O=r(20),w=r(70),E=function(){},_=function(){},C=function(){};e.default=o,e.humanReadable=m,e.fragsToStr=p,e.NEW_LINE=E,e.INDENT_IN=_,e.INDENT_OUT=C,e.interpose=u,e.isSpecial=s},function(n,e,r){"use strict";(function(n){function t(n){function e(e){var r=l;r=e?e+n:n;var t=C.get(l,o(r));return t?p(t[".expr"],t[".meta"]):void 0}var r=new v({ref:n,getFn:e,conformFn:null});return r.conform=function(n){var r=e();return w(r,n,{conform:!0})},r}function o(n){return n.replace(/^(.+)(\/)(.+)$/,"$1.$3").replace(/^\//,"")}function a(n){var e,r=n.nsPath,t=L(r);return e=t}function i(n){var e=n.nsPath,r=n.expression;u(e,r)}function u(n,e){if(e){if(e.clause||e.pred){var r=e.clause||e.pred;return D(n,{".expr":r}),r}throw console.error(e),"!"}throw console.error(e),"!"}function s(){return l||c(),l}function c(){l=n[T]={}}function f(n,e){return e?E(n,e):E(n,U())}Object.defineProperty(e,"__esModule",{value:!0});var l,p=r(4),v=r(32),d=r(11),m=d.cat,y=d.or,h=d.fclause,g=d.shape,b=r(5),x=r(10),O=r(35),w=r(17),E=r(43),_=r(9),C=r(56),P=r(18),S=P.isNamespacePath,A=P.isClauseRef,j=r(27),N=j.GetNSFnClause,R=j.SetNSFnClause,F=j.NamespaceFnClause,M=j.SetMetaFnClause,k=j.GetMetaFnClause,L=h({args:m(S),ret:A}).instrument(t),q=g({req:{".expr":y(b,x)}}),D=h({args:m(S,q),ret:O}).instrument(function(n,e){s();var r=C.get(l,o(n));return C.set(l,o(n),p({},r,e)),!0}),T="___CLAUSEJS_REGISTRY",I=M.instrumentConformed(function(n){var e=n.source,r=e.namespacePath,t=e.expression,a=n.metaObj,i=n.registry;if(i||(i=l),r){var u=C.get(i,o(r)),s=u&&u[".meta"];C.set(i,o(r),p({},u,{".meta":p({},s,a)}))}else if(t){var c=_(t);c.meta=p(c.meta,a)}}),z=k.instrumentConformed(function(n){var e=n.source,r=e.namespacePath,t=e.expression,a=n.registry;if(a||(a=l),r){var i=C.get(a,o(r)),u=i&&i[".meta"];return u}if(t){var s=_(t);return s.meta}});s();var U=function(){return l},Z=F.instrumentConformed(function(n){var e=n.register,r=n.retrieve;return e?i(e):r?a(r):void 0});Z.get=N.instrumentConformed(a),Z.set=R.instrumentConformed(i),Z.clearRegistry=c,Z.getRegistry=U,Z.setMeta=I,e.getRegistry=U,e.clearRegistry=c,e.setMeta=I,e.getMeta=z,e.resolve=f,e.default=Z}).call(e,r(83))},function(n,e,r){"use strict";function t(n){var e=n.ref,r=n.getFn,t=n.conformFn;this.type="CLAUSE_REF",this.get=r,this.conform=t,this.ref=e}var o=r(1);t.prototype=Object.create(o.prototype),n.exports=t},function(n,e,r){"use strict";function t(n){var e=n.getFn;this.type="DELAYED",this.get=e;var r=this;r.instrument=function(n){var r=e();return r.instrument(n)},r.instrumentConformed=function(n){var r=e();return r.instrumentConformed(n)},r.conform=function(n){var r=e();return r.conform(n)}}var o=r(1);t.prototype=Object.create(o.prototype),n.exports=t},function(n,e,r){"use strict";n.exports=function(n){return function(e){return e===n}}},function(n,e,r){"use strict";function t(n){return"boolean"==typeof n}n.exports=t},function(n,e,r){"use strict";function t(n){return"number"==typeof n&&Math.floor(n)===n&&n!==1/0}n.exports=t},function(n,e,r){"use strict";function t(n){return"number"==typeof n}n.exports=t},function(n,e,r){"use strict";function t(n){if(o(n)){if("function"==typeof Object.getPrototypeOf){var e=Object.getPrototypeOf(n);return e===Object.prototype||null===e}return"[object Object]"==Object.prototype.toString.call(n)}return!1}var o=r(24);n.exports=t},function(n,e,r){"use strict";n.exports=function(){var n;if(1===arguments.length&&Array.isArray(arguments[0]))n=arguments[0];else{if(!(arguments.length>0))throw new Error("Items list is required.");n=Array.prototype.slice.call(arguments)}var e=function(e){return n.indexOf(e)>=0};return e.__predToString=function(){return"oneOf(".concat([n.map(JSON.stringify).join(", ")]).concat(")")},e}},function(n,e,r){"use strict";function t(n){return new o({getFn:n})}var o=r(33);n.exports=t},function(n,e,r){"use strict";function t(n){return n}n.exports=t},function(n,e,r){"use strict";var t=r(7);n.exports=function(n){return t(n)}},function(n,e,r){"use strict";function t(n,e){var r=c(p,function(n){var r=f(n,2),t=r[0],o=r[1];if(t===e)return o});return r||(r=a(e),p.push([e,r])),u(r,n)}function o(n){var e=a(n),r={};return e.forEach(function(n){var e=f(n,1),t=e[0];r[t]||(r[t]=[]),r[t].push(n)}),r}function a(n){var e=[],r=l.NamespaceObjClause.conform(n);return i(null,null,r,e),e}function i(n,e,r,t){var o=n?n+"."+e:e,a=void 0;for(var u in r)if(r.hasOwnProperty(u))switch(u){case"subNamespaces":a=r[u];for(var s in a)a.hasOwnProperty(s)&&i(o,s,a[s],t);break;case".expr":t.push([""+(n?n:""),""+e,r[".expr"]])}}function u(n,e){var r=c(n,function(n){var r=f(n,3),t=r[0],o=r[1],a=r[2];if(a===e||s(a)===s(e))return t+"/"+o});return r}function s(n){return"PRED"===n.type?n.opts.predicate:n}function c(n,e){for(var r=0;r<n.length;r++){var t=e(n[r]);if(t)return t}return null}var f=function(){function n(n,e){var r=[],t=!0,o=!1,a=void 0;try{for(var i,u=n[Symbol.iterator]();!(t=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);t=!0);}catch(n){o=!0,a=n}finally{try{!t&&u.return&&u.return()}finally{if(o)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=r(27),p=[];n.exports={resolve:t,getDefList:o}},function(n,e,r){"use strict";function t(n){return n&&n.__esModule?n:{default:n}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(31),a=t(o),i=r(4),u=r(11),s=r(18),c=r(12),f={Problem:r(2),Clause:r(1)},l=i(a.default,{resolve:o.resolve},u,s,f,c);l.VERSION=r(45),n.exports=l,e.default=l},function(n,e,r){"use strict";n.exports="0.0.25"},function(n,e,r){"use strict";function t(n){var e=a(n),r=new o({type:"WALL",exprs:[e],opts:{enclosedClause:e}});return r.conform=function(n){return f(r,n,{conform:!0})},r}var o=r(1),a=r(9),i=r(8),u=i.cat,s=i.ExprClause,c=r(21),f=r(17),l=c({args:u(s),ret:s}),p=l.instrument(t);n.exports={WallFnClause:l,wall:p}},function(n,e,r){"use strict";function t(){return new o({type:i,exprs:[],conformFn:a})}var o=r(1),a=r(41),i="ANY";n.exports=t},function(n,e,r){"use strict";n.exports={CAT:"CAT",OR:"OR",Z_OR_M:"Z_OR_M",Z_OR_O:"Z_OR_O",O_OR_M:"O_OR_M",PRED:"PRED",COLL_OF:"COLL_OF"}},function(n,e,r){"use strict";function t(n){return a(i,u,n)}var o=r(8),a=o.or,i=r(23),u=r(14);n.exports=t},function(n,e,r){"use strict";function t(n){n=u(n);var e;if(null===n.type)throw"Clause has no type: "+n;e=n.type in c?c[n.type]:c.PRED;var r=e(n);return r}function o(n){return new i({type:"ROOT",exprs:[n]})}var a=r(51),i=r(1),u=r(29),s=function(n){for(var e=0,r=[n.head],t=[];r.length>0;){var o=r.pop();null===o.index&&(o.index=e,e++,o.transitions.forEach(function(n){r.push(n.target)}),t.push(o))}return t},c={},f=function(n){return function(e){var r=t(e.exprs[0]);return n(r)}},l=function(n){return function(e){var r=e.exprs.map(function(n){var e=t(n.expr);return e.name=n.name,e});return n(r)}};["ROOT","Z_OR_M","O_OR_M","Z_OR_O"].forEach(function(n){c[n]=f(a[n])}),["OR","CAT"].forEach(function(n){c[n]=l(a[n])}),c.PRED=function(n){return a.PRED(n)};var p=function(n){var e,r=o(n),a=t(r),i=s(a),u=i.length,c={};return i.forEach(function(n){0===n.transitions.length&&(e=n.index);var r={};n.transitions.forEach(function(n){r[n.target.index]=n.clause}),c[n.index.toString()]=r}),{initialState:0,numStates:u,finalState:e,transitions:c,expression:n}};n.exports=p},function(n,e,r){"use strict";function t(n,e){return{transitions:null===n?[]:n,index:e||null}}function o(n,e){return{clause:n,target:e}}function a(n,e){return{head:n,tails:e}}function i(n,e,r){var t=a(e,r);return t.name=n,t}function u(n,e){n.forEach(function(n){n.target=e})}function s(){return{isEpsilon:!0}}function c(n,e,r,t){var o=s();return o.name=e,o.op=r,o.group=t,o.dir=n,o}function f(n,e){var r=o(n,e.head),i=t([r]),u=a(i,e.tails);return u}function l(n,e){var r=o(n,null),i=t([r],null);u(e.tails,i);var s=a(e.head,[r]);return s}var p={};p.PRED=function(n){var e=o(n,null),r=t([e],null),i=[e],u=a(r,i);return u},p.OR=function(n){n=n.map(function(n){var e=c("out",n.name,"OR"),r=o(e,null),a=t([r]);u(n.tails,a);var s=o(c("in",n.name,"OR"),n.head),f=t([s]),l=i(n.name,f,[r]);return l});var e=function(n,e){var r=n.head.transitions.concat(e.head.transitions),o=t(r),a=n.tails.concat(e.tails),u=i(n.name,o,a);return u},r=n.reduce(e);return r=f(c("enter",null,"OR","para_in"),r),r=l(c("exit",null,"OR","para_out"),r)},p.CAT=function(n){var e=function(n,e){u(n.tails,e.head);var r=n.head,t=e.tails,o=a(r,t);return o};n=n.map(function(n){var e=o(c("maybe_out",n.name,"CAT"),null),r=t([e]);u(n.tails,r);var a=n.head.transitions.map(function(e){var r=t([e]),a=o(c("maybe_in",n.name,"CAT"),r);return a}),s=t(a),f=i(n.name,s,[e]);return f});var r;if(n.length>0)r=n.reduce(e);else{var p=s(),v=o(p,null),d=t([v]);r=a(d,[v])}return r=f(c("maybe_enter",null,"CAT","in"),r),r=l(c("maybe_exit",null,"CAT","out"),r)},p.Z_OR_M=function(n){var e="Z_OR_M",r=o(c("loop",null,e),n.head),i=o(s(),null),p=t([r,i]);u(n.tails,p);var v=a(p,[i]),d=v.head.transitions.map(function(n){var e=t([n]),r=o(s(),e);return r}),m=t(d);return v=a(m,v.tails),v=f(c("maybe_enter",null,e,"in"),v),v=l(c("maybe_exit",null,e,"out"),v)},p.O_OR_M=function(n){var e="O_OR_M",r=o(c("loop",null,e),n.head),i=o(s(),null),p=t([r,i]);u(n.tails,p);var v=a(n.head,[i]);return v=f(c("maybe_enter",null,e,"in"),v),v=l(c("maybe_exit",null,e,"out"),v)},p.Z_OR_O=function(n){var e="Z_OR_O",r=o(c("loop",null,e),n.head),i=o(s(),null),u=t([r,i]),p=n.tails.concat([i]),v=a(u,p);return v=f(c("maybe_single_enter",null,e,"in"),v),v=l(c("maybe_single_exit",null,e,"out"),v)},p.ROOT=function(n){var e=t(null,null);return u(n.tails,e),a(n.head,[])},n.exports=p},function(n,e,r){"use strict";function t(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function o(n){this.value=n}function a(n){this.fragment=n}function i(n){this.fragment=n}function u(n,e){this.fragment=e,this.name=n}function s(n){this.fragment=n}function c(n,e){this.fragment=e,this.name=n}function f(){}function l(){}function p(){}function v(n){this.name=n}function d(n,e,r){var u,d=r.conform,b=n.inputType,x=[];if(n.forEach(function(n){if(n.move)switch(n.move.dir){case"maybe_enter":x.push(new p);break;case"maybe_exit":for(var a=void 0,i=new l;!((a=x.pop())instanceof p);)i=h(b,d,i,a);x.push(i);break;case"maybe_single_enter":x.push(new p);break;case"maybe_single_exit":var u=x.pop(),g=void 0;u instanceof p?g=new f:(g=u,x.pop()),x.push(g);break;case"enter":break;case"exit":var O=x.pop(),w=void 0;if(d&&O instanceof c){var E=void 0;E=O.fragment instanceof l?{}:t({},O.name,O.fragment),
w=new s(E)}else w=O;x.push(w);break;case"maybe_in":d&&n.move.name&&x.push(new v(n.move.name));break;case"loop":break;case"maybe_out":if(d&&n.move.name){var _=x.pop(),C=x.pop();x.push(m(C,_))}break;case"in":d&&n.move.name&&x.push(new v(n.move.name));break;case"out":if(d&&n.move.name){var P=x.pop(),S=x.pop();x.push(y(S,P))}break;case"clause":var A=e(n.clause,n.guide,r);x.push(new o(A));break;default:throw console.error(n),"FUUU"}}),1!==x.length)throw console.error("valStack",x),"!";u=x.pop();var O=void 0;return O=u instanceof a?u.fragment:u instanceof i?u.fragment:u instanceof s?u.fragment:u instanceof o?u.value:u instanceof l?g(b,[]):u}function m(n,e){if(e instanceof f)return new u(n.name,new l);if(e instanceof i)return new u(n.name,e.fragment);if(e instanceof a||e instanceof s)return new u(n.name,e.fragment);if(e instanceof o)return new u(n.name,e.value);if(e instanceof l)return new u(n.name,new l);throw console.error(e),"c!!!"}function y(n,e){if(e instanceof f)return new c(n.name,new l);if(e instanceof s)return new c(n.name,e.fragment);if(e instanceof a)return new c(n.name,e.fragment);if(e instanceof i)return new c(n.name,e.fragment);if(e instanceof o)return new c(n.name,e.value);if(e instanceof l)return new c(n.name,new l);throw console.error(e),"c!!!alt"}function h(n,e,r,c){if(e&&c instanceof u){var p=void 0;if(r instanceof f)p={};else if(r)if(r instanceof l)p={};else if(r instanceof i)p=r.fragment;else if(r instanceof a)p=r.fragment;else{if(!(r instanceof s))throw console.error(r,c),"!!acc_fl_np";p=r.fragment}else p={};var v=void 0;v=c.fragment instanceof l?{}:t({},c.name,c.fragment);var d=new i(b({},v,p));return d}var m=void 0,y=void 0;if(r instanceof f)y=[];else if(r)if(r instanceof a)y=r.fragment;else if(r instanceof i)y=[r.fragment];else{if(!(r instanceof l))throw console.error(r),"!!acc_fl";y=[]}else y=[];if(c instanceof o)m=[c.value];else if(c instanceof a)m=c.fragment;else if(c instanceof i)m=[c.fragment];else if(c instanceof s)m=[c.fragment];else if(c instanceof f)m=[];else{if(!(c instanceof l))throw console.error(c),"cc!!";m=[]}var h=new a(g(n,m.concat(y)));return h}function g(n,e){return"string"===n&&Array.isArray(e)?e.join(""):e}var b=r(4);n.exports=d},function(n,e,r){"use strict";function t(n,e,r,t){for(var u={matched:!1,chain:null},s="undefined"==typeof e?"undefined":i(e),c={state:0,offset:0,input:[e],groupCount:0,arrayed:!1},f=[c];f.length>0;){var l=f.shift(),p=l.offset,v=l.input;if(l.state===n.finalState&&p===v.length)return u.matched=!0,u.chain=a(n,l,s),u;for(var d in n.transitions[l.state]){var m=parseInt(d),y=o(n,m,l,r,t);if(y)if(y.isProblem){var h=y.name,g=y.problem,b=y.position;u.lastProblem={name:h,problem:g,position:b}}else f.push(y)}}return u}function o(n,e,r,t,o){var a=r.input,i=r.offset,c=r.groupCount,f=r.arrayed,l=a[i],p=n.transitions[r.state][e];"in"===p.group?(0===c&&(Array.isArray(a[0])||s(a[0]))&&(a=a[0],i=0,f=!0),c+=1):"out"===p.group&&(c-=1,0===c&&(f&&(i=i===a.length?1:0,a=[a]),f=!1));var v,d;v=p.isEpsilon?i:i+1;var m,y,h=p.name||r.move&&r.move.name;if(v<=a.length){if(p.isEpsilon)return d=p.dir?{dir:p.dir,name:p.name,op:p.op,group:p.group}:null,y={input:a,groupCount:c,arrayed:f,state:e,offset:v,move:d,clause:p,prev:r,isEpsilon:!0};if(m=t(p,l,o),u(m))return{isProblem:!0,problem:m,name:h,position:i};if(i<a.length)return d={dir:"clause"},y={input:a,groupCount:c,arrayed:f,state:e,offset:v,move:d,prev:r,isEpsilon:!1,clause:p,guide:m}}}function a(n,e,r){for(var t,o=[],a=e;a;){if(!t||a.state!==t.state&&a.move){var i={isEpsilon:a.isEpsilon,move:a.move,state:a.state};a.isEpsilon||(i.guide=a.guide,i.clause=a.clause),o.unshift(i)}t=a,a=a.prev}return o.inputType=r,o}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},u=r(0),s=r(7);n.exports=t},function(n,e,r){"use strict";function t(n){return a(i,n)}var o=r(8),a=o.or,i=r(23);n.exports=t},function(n,e,r){"use strict";function t(n){return a(i,n)}var o=r(8),a=o.or,i=r(14);n.exports=t},function(n,e,r){"use strict";function t(n,e,r){if("number"==typeof e&&(e=[e]),!e||0===e.length)return n;if(null==n)return r;if("string"==typeof e)return t(n,e.split("."),r);var o=a(e[0]),i=n[o];return void 0===i?r:1===e.length?i:t(n[o],e.slice(1),r)}function o(n,e,r){if("number"==typeof e&&(e=[e]),!e||0===e.length)return n;if("string"==typeof e)return o(n,e.split(".").map(a),r);var t=e[0],i=n[t];return 1===e.length?(n[t]=r,i):(void 0===i&&("number"==typeof e[1]?n[t]=[]:n[t]={}),o(n[t],e.slice(1),r))}function a(n){var e=parseInt(n);return e.toString()===n?e:n}n.exports={get:t,set:o}},function(n,e,r){"use strict";n.exports=function(n){return n&&n instanceof Date&&!isNaN(n.valueOf())}},function(n,e,r){"use strict";function t(n){return o(n)&&n>=0}var o=r(36);n.exports=t},function(n,e,r){"use strict";n.exports=function(n){return!!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n)}},function(n,e,r){"use strict";function t(n){var e=o(n),r=function(e){return!n(e)};return e?a("not_"+e,r):r}var o=r(3),a=r(16);n.exports=t},function(n,e,r){"use strict";n.exports=function(n){return!!n&&0!==n.length}},function(n,e,r){"use strict";function t(n){throw n}n.exports=t},function(n,e,r){"use strict";var t=r(0),o=r(25);n.exports=function(n,e){var r=o(n,e);if(t(r))throw r}},function(n,e,r){"use strict";function t(n){return o(n)?n:n.type?a[n.type]?a[n.type]:n.type.toLowerCase():n.toString()}var o=r(7),a={Z_OR_M:"zeroOrMore",O_OR_M:"oneOrMore",Z_OR_O:"zeroOrOne",COLL_OF:"collOf",MAP_OF:"mapOf"};n.exports=t},function(n,e,r){"use strict";function t(n){return o(n)||a(n)||i(n)||u(n)}var o=r(10),a=r(5),i=r(15),u=r(26);n.exports=t},function(n,e,r){"use strict";function t(n){return o(n)&&"FCLAUSE"===n.type}var o=r(5);n.exports=t},function(n,e,r){"use strict";function t(n){return o(n)&&/^\/?[a-zA-Z0-9\-_\.]*\/([a-zA-Z0-9\-_]+)$/.test(n)}var o=r(7);n.exports=t},function(n,e,r){"use strict";function t(n,e){if(n)return i(n)?!o(u(n,e)):!a(n)||n(e);throw new Error("Clause is required")}var o=r(0),a=r(10),i=r(5),u=r(25);n.exports=t},function(n,e,r){"use strict";n.exports=function(n,e,r){var t=function(r){return Object.defineProperty(n,e,{value:r,enumerable:!0,writable:!0})};return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var n=r();return t(n),n},set:function(n){t(n)}}),n}},function(n,e,r){"use strict";function t(n,e){var r,t=[];for(r=0;r<n;r++)t.push(e);return t}n.exports=t},function(n,e,r){"use strict";var t=[9,10,11,12,13,32,160,5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288,65279];n.exports=t.reduce(function(n,e){return n+String.fromCharCode(e)},"")},function(n,e,r){"use strict";function t(n,e){function r(n,r){for(var t=n,i=[],c=[],f=0;f<s.length;f+=1){var l=0===f?n:i[f-1];if(t=e(s[f],l,r),a(t)){c.push(t);break}var p=e(s[f],t,u({},r,{phase:"reconstruct"}));i.push(p)}return 0===c.length?{conforms:i}:new o(n,s,c,"One or more expressions failed AND test")}function t(n){var e=n.conforms;return e[s.length-1]}var s=n.opts.conformedExprs.map(i);return{trailblaze:r,reconstruct:t}}var o=r(2),a=r(0),i=r(6),u=r(4);n.exports=t},function(n,e,r){"use strict";function t(){return{trailblaze:o,reconstruct:o}}function o(n){return n}n.exports=t},function(n,e,r){"use strict";function t(n,e){function r(r,t){var o=n.get();if(o)return e(o,r,t)}return{trailblaze:r,reconstruct:r}}n.exports=t},function(n,e,r){"use strict";function t(n,e){function r(r,t){var c=[],f=[];if(Array.isArray(r)){if(s){var l=s.maxCount,p=s.minCount;if(i(l)&&r.length>l)return new o(r,n,f,"collOf: collection size "+r.length+" exceeds maxCount "+l+".");if(i(p)&&r.length<p)return new o(r,n,f,"collOf: collection size "+r.length+" is less than minCount "+p+".")}for(var v=0;v<r.length;v+=1){var d=e(u,r[v],t);if(a(d)){f.push(d);break}c.push(d)}return f.length>0?new o(r,n,f,"One or more elements failed collOf test"):c}return new o(r,n,[],"collOf expects an array")}function t(n,r){for(var t=[],o=0;o<n.length;o+=1){var a=e(u,n[o],r);t.push(a)}return t}var u=n.exprs[0],s=n.opts;return{trailblaze:r,reconstruct:t}}var o=r(2),a=r(0),i=r(37);n.exports=t},function(n,e,r){"use strict";function t(n,e){function r(r,t){var o=n.get();if(o)return e(o,r,t)}return{trailblaze:r,reconstruct:r}}n.exports=t},function(n,e,r){"use strict";function t(n,e){function r(n){return n}function t(n,e){if(!n)throw new Error("A function must be clauseified for instrumentation.");var r=e.conform,t=e.instrument;return r&&t?f(n,e):t?c(n,e):void 0}function c(n,e){var r=i(n),t=l(r,n,e),o=u(r,t,"__instrumented");return o}function f(n,e){var r=i(n),t=m(r,n,e),o=u(r,t,"__conformed");return o}function l(n,r){return function(){var t=Array.prototype.slice.call(arguments),o=v(r,n,t),a=r.apply(this,o),i=d(r,n,a),u=h?e(h,t,{conform:!0,instrument:!0}):t,s=void 0;return s=g?e(g,a,{conform:!0,instrument:!0}):a,p(n,r,b,u,s),i}}function p(e,r,t,o,i){if(t){var u=t.call(null,o,i);if(!u){var c=new a({args:o,ret:i},n,[],"Function "+e+" failed valiation on argument-return value relation");s(c)}}}function v(r,t,i){var u=t||"<anonymous>";if(!h)return i;var c=e(h,i,{phase:"trailblaze"});if(!o(c))return e(h,c,{phase:"reconstruct",conform:!1,instrument:!0});var f=new a(i,n,[c],"Arguments for function "+u+"() is not valid");s(f)}function d(r,t,i){var u=t||"<anonymous>";if(!g)return i;var c=e(g,i,{phase:"trailblaze"});if(!o(c)){var f=e(g,c,{phase:"reconstruct",instrument:!0,conform:!1});return f}var l=new a(i,n,[c],"Return value for function "+u+"() is not valid");s(l)}function m(n,r){var t=n||"<anonymous>";return function(){var i=Array.prototype.slice.call(arguments),u=e(h,i,{conform:!0,instrument:!0});if(o(u)){var c=new a(i,h,[u],"Arguments for function "+t+" is not valid");s(c)}var f=r.call(this,u);if(d(r,n,f),b){var l;l=g?e(g,f,{conform:!0,instrument:!0}):f,p(n,r,b,u,l)}return f}}var y=n.opts,h=y.args,g=y.ret,b=y.fn;return{trailblaze:r,reconstruct:t}}var o=r(0),a=r(2),i=r(3),u=r(16),s=r(62);n.exports=t},function(n,e,r){"use strict";function t(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function o(n,e){function r(r,o){var a={};for(var s in r)if(r.hasOwnProperty(s)){var c=e(l,s,o);if(i(c))return new u(r,n,t({},s,c),"mapOf: key "+s+" failed validation");var f=e(p,r[s],o);if(i(f))return new u(r,n,t({},s,f),"mapOf: value for key "+s+" failed validation");a[s]={expr:p,valGuide:f}}return a}function o(n,r){var t={};for(var o in n){var a=n[o],i=a.expr,u=a.valGuide;t[o]=e(i,u,r)}return t}var s=n.opts,c=s.keyExpression,f=s.valExpression,l=c&&a(c),p=f&&a(f);return{trailblaze:r,reconstruct:o}}var a=r(6),i=r(0),u=r(2);n.exports=o},function(n,e,r){"use strict";function t(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function o(n,e){function r(r,o){c||(c=u(n));var i=a(c,r,e,o),f=i.chain,l=i.matched,p=i.lastProblem;if(l===!0)return{chain:f};var v=void 0;if(p){var d=p.name,m=p.position,y=p.problem;v=t({},d?'"'+d+'"':"<At position "+m+">",y)}else v=[];return new s(r,n,v,"Clause "+n.type+" did not match value")}function o(n,r){var t=n.chain,o=i(t,e,r);return o}var c;return{trailblaze:r,reconstruct:o}}var a=r(53),i=r(52),u=r(50),s=r(2);n.exports=o},function(n,e,r){"use strict";function t(n){function e(e){var r=n.exprs[0];return r(e)?e:new a(e,n,[],"Predicate "+o(r)+"() returns false")}function r(n){return n}return{trailblaze:e,reconstruct:r}}var o=r(3),a=r(2);n.exports=t},function(n,e,r){"use strict";function t(n,e){function r(r,t){function o(n){n:for(var o in n)if(n.hasOwnProperty(o)){var a=n[o],i=u(r,o,a,e,t),s=i.noop,c=i.problem,f=i.singleMatch,l=i.groupMatch;if(c){y.push([o,c]);break n}if(f)h.singles.push(f);else if(l)l.matchedKeys.length>0&&h.groups.push(l);else if(!s)throw"!"}}if(["object","function"].indexOf("undefined"==typeof r?"undefined":f(r))<0)return new d(r,n,[],"Value is not an object");s||(s=a(p,m,e,t));var i=s(r);if(l(i))return i;var v,y=[],h={val:r,groups:[],singles:[]};p&&(v=p.fieldDefs),v&&o(v);var g;if(m&&(g=m.fieldDefs),g&&o(g,!0),y.length>0){for(var b={},x=[],O=0;O<y.length;O++){var w=c(y[O],2),E=w[0],_=w[1];x.push(E),b[E]=_}var C=new d(r,n,b,"At least one property failed validation: "+x.join(", "));return C}return h}function t(n,r){var t,a=n.val,u=n.singles,s=n.groups,c={walkOpts:r},f=r.mutate;return t=f?a:v({},a),u.forEach(function(n){o(t,n,e,r)}),s.forEach(function(n){var a=n.name,u=n.matchedKeys;if(c){t[a]={};var s=[];u.forEach(function(n){o(t[a],n,e,r),s.push(n.key)}),i(t,s)}else u.forEach(function(n){o(t,n,e,r)})}),t}var s,p,m,y=n.opts.conformedArgs.shapeArgs,h=y.requiredFields,g=y.optionalFields;return h&&(p=h.req||h.required),g&&(m=g.opt||g.optional),{trailblaze:r,reconstruct:t}}function o(n,e,r,t){var o=e.key,a=e.clause,i=e.guide;n[o]=r(a,i,t)}function a(n,e,r,t){return function(e){if(n){var o,a=[],i=n.fieldDefs,u=n.keyList;if(i){o=[];for(var c in i)i.hasOwnProperty(c)&&o.push(c)}else{if(!u)throw"unsupported";o=[].concat(u)}for(var f=0;f<o.length;f++){var p=o[f];if(i&&i[p].keyValExprPair){var v=!1;n:for(var m in e)if(e.hasOwnProperty(m)){var y=s(m,i[p].keyValExprPair.keyExpression,r,t);if(!l(y)){v=!0;break n}}v||a.push(p)}else if(i&&i[p].valExpressionOnly)if(e.hasOwnProperty(p)){var h=s(e[p],i[p].valExpressionOnly,r,t);l(h)&&a.push(p)}else a.push(p);else{if(!u)throw"!";void 0===e[p]&&a.push(p)}}if(a.length>0)return new d(e,n,[],"req: keys required: "+a.join(", "))}return e}}function i(n,e){for(var r=0;r<e.length;r++)delete n[[e[r]]]}function u(n,e,r,t,o){var a=r.valExpressionOnly,i=r.keyValExprPair;if(i){var u=[],c=i.keyExpression,f=i.valExpression;n:for(var v in n)if(n.hasOwnProperty(v)){var d=s(v,c,t,o);if(!l(d)){if(n===n[v])continue n;var y=s(n[v],f,t,o);if(l(y))return{problem:y};u.push({key:v,clause:m(f),guide:y})}}return{groupMatch:{name:e,matchedKeys:u}}}if(a){var h=n[e];if(p(h)||n[e]===n)return{noop:!0};var g=s(h,a,t,o);return l(g)?{problem:g}:{singleMatch:{key:e,clause:m(a),guide:g}}}throw"!!"}function s(n,e,r,t){var o=m(e),a=r(o,n,t);return a}var c=function(){function n(n,e){var r=[],t=!0,o=!1,a=void 0;try{for(var i,u=n[Symbol.iterator]();!(t=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);t=!0);}catch(n){o=!0,a=n}finally{try{!t&&u.return&&u.return()}finally{if(o)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},l=r(0),p=r(14),v=r(4),d=r(2),m=r(6);n.exports=t},function(n,e,r){"use strict";function t(n,e){function r(r,t){var a=o(n.exprs,1),i=a[0];return e(i,r,t)}return{trailblaze:r,reconstruct:r}}var o=function(){function n(n,e){var r=[],t=!0,o=!1,a=void 0;try{for(var i,u=n[Symbol.iterator]();!(t=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);t=!0);}catch(n){o=!0,a=n}finally{try{!t&&u.return&&u.return()}finally{if(o)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n.exports=t},function(n,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(n){"object"==typeof window&&(r=window)}n.exports=r},,function(n,e,r){"use strict";function t(n){return n&&n.__esModule?n:{default:n}}function o(n){return Array.isArray(n)?n:Array.from(n)}function a(n,e,r){this.label=n,this.clause=e,this.enclosed=r}function i(n,e,r){var t=[];n&&(t=t.concat([n,": "]));var o=l(e),a=o.head,i=o.params;if(!a)return[];if(r){var c=r(a);if(c)return t.concat(c)}if("PRED"===a.type)return[""+Z(a.opts.predicate)];var f=(0,E.humanReadable)(a),p=void 0;if("FCLAUSE"===a.type){var v=x(i.unlabelled,1),d=v[0].item.unquotedParamsMap,m=d.args;m=void 0===m?{}:m;var y=m.singleParam,h=d.ret;h=void 0===h?{}:h;var g=h.singleParam;return[].concat(y?s(null,y,r):[]).concat([" → "]).concat(g?s(null,g,r):["any"])}if("CAT"===a.type){var b=i.labelled,O=i.unlabelled,w=[];if(b){var _=b.reduce(function(n,e){var t=e.label,o=e.item,a=u(t);return n.concat([[s(a,o,r)]])},[]);w=(0,E.interpose)(_,[", ",E.NEW_LINE])}else if(O){var C=O.map(function(n){var e=n.item;return s(null,e,r)});w=(0,E.interpose)(C,[", ",E.NEW_LINE])}return t.concat(["("]).concat(w).concat([")"])}if("OR"===a.type){var P=i.labelled,S=i.unlabelled,A=[];if(P){var j=P.reduce(function(n,e){var t=e.item;return n.concat([[s(null,t,r)]])},[]);A=(0,E.interpose)(j,[" | ",E.NEW_LINE])}else if(S){var N=S.map(function(n){var e=n.item;return s(null,e,r)});A=(0,E.interpose)(N,[" | ",E.NEW_LINE])}return t.concat(["{"]).concat(A).concat(["}"])}if("Z_OR_M"===a.type){var R=x(i.unlabelled,1),F=R[0].item,M=s(null,F,r);return["("].concat(t).concat([M,")"]).concat("*")}if("O_OR_M"===a.type){var k=x(i.unlabelled,1),L=k[0].item,q=s(null,L,r);return["("].concat(t).concat([q,")"]).concat("+")}if("Z_OR_O"===a.type){var D=x(i.unlabelled,1),T=D[0].item,I=s(null,T,r);return["("].concat(t).concat([I,")"]).concat("?")}if("COLL_OF"===a.type){var z=x(i.unlabelled,1),U=z[0].item,W=s(null,U,r);return["["].concat(t).concat([W,"]*"])}if("ANY"===a.type)return t.concat(["any"]);if(i){var V=i.labelled,G=i.unlabelled,Y=i.keyList;if(V){var $=V.reduce(function(n,e){var t=e.label,o=e.item;return n.concat([[u(t),", ",s(null,o,r)]])},[]);p=(0,E.interpose)($,[", ",E.NEW_LINE])}else if(G){var B=G.map(function(n){var e=n.item;return s(null,e,r)});p=(0,E.interpose)(B,[", ",E.NEW_LINE])}else if(Y){var Q=Y;p=(0,E.interpose)(Q,[", "])}else p=[]}else p=[];return[f,"("].concat(p.length>1?[E.INDENT_IN,E.NEW_LINE]:[0===p.length?"":" "]).concat(p).concat(p.length>1?[E.INDENT_OUT,E.NEW_LINE]:[0===p.length?"":" "]).concat([")"])}function u(n){var e=n.str,r=n.quoted;return e?e:r?r.value:void 0}function s(n,e,r){var t=V(e,{label:u,sExpression:function(e){return i(n,e,r)},quotedParamsMap:function(n){return c(n,r,!1)},unquotedParamsMap:function(n){return c(n,r,!1)},optionsObj:function(n){return W(n)},recursive:function(n){var e=n.expression;return["<recursive>: ",(0,E.humanReadable)(e)]}},function(n){throw console.error(n),"!s"});return t}function c(n,e){var r=["{",E.INDENT_IN,E.NEW_LINE],t=[];for(var o in n)if(n.hasOwnProperty(o)){var a=[];a.push(o);var i=V(n[o],{keyList:function(n){return["[ "].concat((0,E.interpose)(n.map(function(n){return'"'+n+'"'}),[", "])).concat(" ]")},singleParam:function(n){return s(null,n,e)}},function(){throw"!e"});i&&(a.push(i),t.push(a))}return t=(0,E.interpose)(t,[", ",E.NEW_LINE]),r=r.concat(t).concat([E.INDENT_OUT,E.NEW_LINE,"}"])}function f(n,e){var r=D($,n);if(I.isProblem(r))throw"!!";var t=i(null,r,e),o=(0,E.fragsToStr)(t,0,0);return o}function l(n){var e=n.head,r=n.params;return V(e,{expression:function(n){return{head:U(n),params:r}},altNode:function(n){var e=n.enclosed;return V(e,{sExpression:l},function(){})}},function(){throw"3"})}function p(n,e){if(I.isValid($,n)){var r=o(n),t=r[0],i=r.slice(1);if(t===e){var u=v(t,i);return{found:!0,cases:u}}for(var s=function(r){var t=p(i[r],e),o=t.found,a=t.cases;if(o)return{v:{found:o,cases:a.map(function(e){return d(e,n,r)})}}},c=0;c<i.length;c+=1){var f=s(c);if("object"===("undefined"==typeof f?"undefined":b(f)))return f.v}}if(n[0]instanceof a){var l=function(){for(var r=x(n,1),t=r[0],o=t.enclosed,i=t.label,u=t.clause,s=function(n){var r=p(o[n],e),t=r.found,s=r.cases;if(t)return{v:{v:{found:t,cases:s.map(function(e){return[new a(i,u,d(e,o,n-1))]})}}}},c=0;c<o.length;c+=1){var f=s(c);if("object"===("undefined"==typeof f?"undefined":b(f)))return f.v}}();if("object"===("undefined"==typeof l?"undefined":b(l)))return l.v}if(n instanceof O.QuotedParamsMap||n instanceof O.UnquotedParamsMap){var y=function(r){if(n.hasOwnProperty(r)){var t=n[r],o=p(t,e),a=o.found,i=o.cases;if(a)return{v:{found:a,cases:i.map(function(e){return m(e,n,r)})}}}};for(var h in n){var g=y(h);if("object"===("undefined"==typeof g?"undefined":b(g)))return g.v}}return{found:!1,cases:[n]}}function v(n,e){return n.opts.named?n.exprs.map(function(r,t){var o=r.name;return r.expr,[new a(o,n,e[2*t+1])]}):n.exprs.map(function(r,t){return[new a(null,n,e[t])]})}function d(n,e,r){return e.slice(0,r+1).concat([n]).concat(e.slice(r+2))}function m(n,e,r){var t=void 0;return e instanceof O.QuotedParamsMap?t=new O.QuotedParamsMap:e instanceof O.UnquotedParamsMap&&(t=new O.UnquotedParamsMap),z(t,e),t[r]=n,t}function y(n,e,r,t,o){var a=e.sExpression,i=e.quotedParamsMap,u=e.unquotedParamsMap,s=r;if(a){var c,f=function(){var e=a.head,r=a.params;r=void 0===r?{}:r;var o=r.labelled,i=r.unlabelled,u=U(e);if(t&&(c=t(u)))return{v:s};s=n(s,u);var f=o||i||[];s=f.reduce(function(e,r){var o=r.item;return"FCLAUSE"===u.type?y(n,o,e,t,!0):y(n,o,e,t)},s)}();if("object"===("undefined"==typeof f?"undefined":b(f)))return f.v}else if(i||u){var l=i||u;for(var p in l)if(l.hasOwnProperty(p)&&(!o||!u||"ret"!==p)){var v=l[p].singleParam;v&&(s=y(n,v,s,t,o))}}return s}function h(n,e){return y(function(n,e){return g(e)&&n.indexOf(e)<0?n.concat([e]):n},n,[],e)}function g(n){return"OR"===n.type}Object.defineProperty(e,"__esModule",{value:!0});var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},x=function(){function n(n,e){var r=[],t=!0,o=!1,a=void 0;try{for(var i,u=n[Symbol.iterator]();!(t=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);t=!0);}catch(n){o=!0,a=n}finally{try{!t&&u.return&&u.return()}finally{if(o)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),O=r(28),w=t(O),E=r(30),_=r(11),C=_.cat,P=_.or,S=(_.shape,_.zeroOrOne),A=_.maybe,j=(_.oneOrMore,_.fclause),N=(_.any,_.and),R=(_.wall,_.ExprClause),F=(_.collOf,r(12)),M=(F.isStr,F.isFn),k=(F.isNum,F.isInt),L=(F.isObj,F.isBool,F.instanceOf),q=r(18),D=q.conform,T=(q.isClause,q.deref,q.delayed),I=r(44),z=r(4),U=r(6),Z=r(3),W=r(20),V=r(19),G=(0,O.genClauses)(P("expression",R,"altNode",N(L(a),I.shape({required:{clause:g,enclosed:T(function(){return B})}})))),Y=x(G,2),$=Y[0],B=Y[1],Q=j({args:C(R,S(k),S(A(M)))}).instrument(function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,r=arguments[2],t=(0,w.default)(n),o=D(O.ParamItemClause,t),a=h(o,r),i=a.reduce(function(n,r){var t=n.reduce(function(n,t){if(n.length>e)return n;var o=p(t,r),a=o.cases;return n.concat(a)},[]);return t},[t]),u=i.map(function(n){return f(n,r)});return u});e.default=Q},,function(n,e,r){"use strict";function t(n){return n&&n.__esModule?n:{default:n}}function o(n){var e=k.NamespaceObjClause.conform(n),r=u(n,null,null,e);return r}function a(n){var e=(0,$.getDefList)(n),r=Object.keys(e);return"<dl>\n    "+r.map(function(r){return"\n    <dt>\n      "+r+"\n    </dt>\n    <dd>\n      <ul>\n      "+e[r].map(function(e){var r=M(e,3),t=r[0],o=r[1],a=r[2];return"<li>\n            "+E(t+"/"+o)(function(e){return f((0,Y.default)(a),i(n,e)||S(e),(0,L.getMeta)(e,n))})+"\n          </li>"}).join("")+"\n      </ul>\n    </dd>\n    "}).join("")+"\n  </dl>"}function i(n,e){var r=(0,L.getMeta)(e,n);return r&&r.name}function u(n,e,r,t){var o=e?e+"."+r:r,a="",i=[],f=void 0,l=void 0,p=void 0;for(var v in t)if(t.hasOwnProperty(v))switch(v){case"subNamespaces":p=t[v];for(var d in p)if(p.hasOwnProperty(d)){var m=u(n,o,d,p[d]);i.push(m)}break;case".nsComment":f="<p><i>"+t[v]+"</i></p>";break;case".expr":l=c(n,r,t[".expr"],t[".meta"])}return l&&(a+=l),o&&(f||s(p))&&(a+="<h3>"+o+"/</h3><hr />"),f&&(a+=f),i.length>0&&(a+=i.join("\n")),a}function s(n){return!!n&&Object.keys(n).filter(function(e){return n[e][".expr"]}).length>0}function c(n,e,r,t){if(!r)throw new Error("Expression "+e+" does not exist in the registry");var o=void 0;return o=p(n,e,r,t)}function f(n,e,r){return"FCLAUSE"===n.type&&e[0]===e[0].toLowerCase()||r&&r.showAsFunction?e+"()":e}function l(n){return(0,U.default)(n)?J[n.type]||n.type.toLowerCase():(0,I.default)(n)?"predicate":void 0}function p(n,e,r,t){var o=void 0,a=(0,$.resolve)(r,n);if(a&&!e)o=x(n,e,a,r,t);else if("CLAUSE_REF"===r.type)o=x(n,e,null,r,t);else{if("DELAYED"===r.type)return p(n,e,r.get(),t);o="FCLAUSE"===r.type?F(n,e,r,a,t):"OR"===r.type?R(n,e,a,r,t):"CAT"===r.type?w(n,e,a,r,t):(0,I.default)(r)||"PRED"===r.type?A(n,e,r,t):(0,I.default)(r)||"ANY"===r.type?b():"AND"===r.type?O(n,e,a,r,t):N(n,e,a,r,t)}var i=t&&t.name||e,u=e&&a?"\n      <h6>"+f(r,i)+'</h6>&nbsp;\n        <span class="tag tag-primary">\n          '+l(r)+"\n        </span>\n      ":null;return"\n    "+(e&&a?'<a name="'+a+'"></a>':"")+"\n    "+v({header:u,legend:a?'<span class="tag tag-info">[clause]</span>':m(r,n,a),borderlabel:g(r)})(o)}function v(n){var e=n.header,r=n.legend,t=n.borderlabel;return e?function(n){return'\n        <div class="card">\n          <div class="card-header inline-headers">\n            '+e+"\n          </div>\n        "+n+"\n        </div>\n      "}:r?function(n){return'\n    <fieldset class="card card-outline-'+(t||"default")+'">\n    <legend class="clause-type">\n      '+r+"\n    </legend>\n    "+n+"\n    </fieldset>\n    "}:void 0}function d(n){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return n.replace(/[&<>"']/g,function(n){return e[n]})}function m(n,e,r){return'\n    <span \n      role="button"\n      data-toggle="popover"\n      data-trigger="focus hover"\n      data-html="true"\n      data-content="'+d(_(n,e,r))+'"\n      data-container="body"\n      data-animation="false"\n      data-delay="500"\n      class="tag tag-'+g(n)+'">\n      '+h(n)+"\n    </span>\n  "}function y(n){var e=void 0,r=(0,Y.default)(n);return e=(0,I.default)(r)?"pred":r.type.toLowerCase()}function h(n){var e=y(n);switch(e){case"pred":return"[pred] satisfies predicate";case"fclause":return"[fclause] a function";case"z_or_m":return"[*] zero or more";case"o_or_m":return"[+] one or more";case"z_or_o":return"[?] optional";case"coll_of":return"[collOf] a collection of";case"cat":return"[cat] a sequence of";case"or":return"[or] either one of";default:return'<span class="tag tag-info">['+e+"]</span>"}}function g(n){var e=y(n);switch(e){case"pred":return"primary";case"fclause":return"info";case"cat":case"or":return"info";default:return"info"}}function b(){return'\n    <div class="card-block">Any value.</div>\n  '}function x(n,e,r,t,o){var a=r||t.ref;return'\n    <div class="card-block">\n      A value of type\n      '+E(a)(function(n){return n})+"\n    </div>\n  "}function O(n,e,r,t,o){var a=(o&&o.example,t.opts.conformedExprs.map(function(e,r){return'\n        <fieldset class="list-group-item card-outline-'+g(t)+'">\n          <legend class="clause-type">\n            <span class="tag tag-default">Condition '+(r+1)+' </span>\n          </legend>\n          <div class="row">\n            <div class="col-md-12">\n              '+p(n,null,H(e),null)+"\n            </div>\n          </div>\n        </fieldset>\n    "})),i='\n    <div class="card-block">\n      <p class="card-title">\n        Should satisfy <em>all</em> of the following expression:\n      </p>\n    </div>\n    <div class="list-group list-group-flush list-for-cat">\n      '+a.join(" ")+"\n    </div>\n  ";return i}function w(n,e,r,t,o){var a=(o&&o.example,t.exprs.map(function(e,r){var a=e.name,i=e.expr,u=o&&o[a]&&o[a].comment;return'\n        <fieldset class="list-group-item card card-outline-'+g(t)+'">\n          <legend class="clause-type">\n          '+(a?'\n            <span class="tag tag-default">Part '+(r+1)+'</span>\n            <span class="lead font-italic text-primary">\n              &ldquo;'+a+"&rdquo;</span>          \n          ":'<span class="tag tag-default">Part '+(r+1)+"</span>")+'\n          </legend>\n          <div class="row">\n            <div class="col-md-12">\n              '+(u?"<span>"+u+"</span>":"")+'\n            </div>\n          </div>\n          <div class="row">\n            <div class="col-md-12">\n              '+p(n,null,i,o&&o[a])+"\n            </div>\n          </div>\n        </fieldset>\n    "})),i='\n    <div class="card-block">\n      <p class="card-title">\n        Should be <em>an ordered list</em> of the following:\n      </p>\n    </div>\n    <div class="list-group list-group-flush list-for-cat">\n      '+a.join(" ")+"\n    </div>\n  ";return i}function E(n){return function(e){return'<a href="#'+n+'" data-path="'+n+'">'+e(n)+"</a>"}}function _(n,e,r){return"\n    <pre>"+unescape(C((0,V.default)(n,P(e,r),2)))+"</pre>\n  "}function C(n){return n.split("<").join("&lt;").split(">").join("&gt;")}function P(n,e){return function(r){var t=(0,$.resolve)(r,n);if(t&&t!==e){var o=E(t)(S);return o=escape(o),[o]}return null}}function S(n){var e=n.substring(n.indexOf("/")+1);return e}function A(n,e,r,t){var o=r.exprs?r.exprs[0]:r,a='\n    <div class="card-block">\n      '+j("A value that satisfies ",o)+"\n    </div>\n  ";return a}function j(n,e){var r=(0,D.default)(e);return"\n    <em>\n      "+n+'\n      <span\n        data-toggle="popover"\n        data-trigger="hover click"\n        data-html="true"\n        role="button"\n        data-placement="top"\n        data-content="<pre>'+e.toString()+'</pre>"\n        data-container="body"\n        data-animation="false"\n        data-delay="500">\n        '+r+"()\n      </span>\n    </em>\n  "}function N(n,e,r,t,o){var a='\n    <div class="card-block">\n      '+t.exprs.map(function(e){var r=e.name,t=e.expr;return t?p(n,r,t,o&&o[r]):p(n,null,e,null)}).join("")+"\n      TODO\n    </div>\n  ";return a}function R(n,e,r,t,o){o||(o={});var a=t.exprs.map(function(e,r){var a=e.name,i=e.expr,u=o[a]&&o[a].comment,s=o[a]&&o[a].examples;return(0,Z.isStr)(s)&&(s=[s]),'\n        <fieldset class="list-group-item card-outline-'+g(t)+'">\n          <legend class="clause-type">\n            <span class="tag tag-default">\n                Option '+(r+1)+"\n            </span>\n            "+(a?'\n                <span class="lead font-italic text-primary">\n                  &ldquo;'+a+"&rdquo;\n                </span>\n            ":"")+'\n          </legend>\n          <div class="row">\n            <div class="col-md-12">\n            '+(u?"<div>"+u+"</div>":"")+"\n            \n            "+(s?"<h6>Examples: </h6>"+s.map(function(n){return"\n              <pre><code>"+n+"</code></pre>\n            "}).join("\n"):"")+'\n            </div>\n          </div>\n          <div class="row">\n            <div class="col-md-12">\n              '+p(n,null,i,o&&o[a])+"\n            </div>\n          </div>\n        </fieldset>\n    "}),i='\n    <div class="card-block">\n      <p class="card-title">\n      '+(e?"":"\n      ")+'\n        Should be <em>one of</em> the following:\n      </p>\n    </div>\n    <div class="list-group list-group-flush list-for-or">\n      '+a.join("")+"\n    </div>\n  ";return i}function F(n,e,r,t){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=[],i=o||{},u=i.comment,s=i.examples;(0,Z.isStr)(s)&&(s=[s]);var c=r.opts,f=c.args,l=c.ret,v=c.fn;u&&a.push([null,u]),f&&a.push(["Syntax","<ul>\n        "+(0,Q.default)(r,20,P(n,t)).map(function(n){return"<li>"+unescape(C(n))+"</li>"}).join("")+"\n      </ul>"]),s&&a.push(["Examples",s.map(function(n){return"\n      <pre><code>"+n+"</code></pre>\n    "}).join("\n")]),e&&t&&a.push(["Clause Description",'\n    <blockquote class="blockquote">\n      <small>\n        <em class="text-muted">\n          '+_(r,n,t)+"\n        </em>\n      </small>\n    </blockquote>\n  "]),f&&a.push(["Argument Clause Graph",p(n,null,f,o&&o.args)]),l&&a.push(["Return Value Clause Graph",p(n,null,l,o&&o.ret)]),v&&a.push(["Argument-return value relation","<pre>"+(0,D.default)(v)+"</pre>"]);var d='\n    <dl class="card-block">\n    '+a.map(function(n){
var e=M(n,2),r=e[0],t=e[1],o=r?"<dt>"+r+"</dt>":"",a="<dd>"+t+"</dd>";return""+o+a}).join("\n")+"\n    </dl>\n  ";return d}var M=function(){function n(n,e){var r=[],t=!0,o=!1,a=void 0;try{for(var i,u=n[Symbol.iterator]();!(t=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);t=!0);}catch(n){o=!0,a=n}finally{try{!t&&u.return&&u.return()}finally{if(o)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),k=r(27),L=r(31),q=r(3),D=t(q),T=r(10),I=t(T),z=r(5),U=t(z),Z=r(12),W=r(30),V=t(W),G=r(29),Y=t(G),$=r(43),B=r(85),Q=t(B),H=r(6),J={FCLAUSE:"function",PRED:"predicate",CAT:"cat sequence"},K={gen:o,genForExpression:p,genCot:a,syntax:Q.default};n.exports=K,n.exports.default=K}])});