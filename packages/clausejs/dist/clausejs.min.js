!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.C=r():e.C=r()}(this,function(){return function(e){function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var n={};return r.m=e,r.c=n,r.i=function(e){return e},r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:t})},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=44)}([function(e,r,n){"use strict";function t(e){return e instanceof o}var o=n(2);e.exports=t},function(e,r,n){"use strict";function t(e){var r=e.type,n=e.exprs,t=e.opts,o=(e.fragments,e.conformFn),i=e.generateFn;if(this.type=r,t&&(this.opts=t),o&&(this.conform=o),i&&(this.generate=i),!n)throw new Error("Expressions are required when constructing a clause.");this.exprs=n}e.exports=t},function(e,r,n){"use strict";function t(e,r,n,t){var i=this;if(this.isProblem=!0,4!==arguments.length)throw"Problem arg len err";this.val=e,this.name="Problem",this.failsPredicate=r,this.shortMessage=t,this.subproblems=n,this.message=o(this,0),this.toString=function(){return i.message}}function o(e,r){var n=e.subproblems,t=e.val,c=e.shortMessage;if(Array.isArray(n)){var l;return 0===n.length?c+"; val: "+f(t,null,2):(l=n.map(function(e){return""+u(r)+o(e,r+1)+a(r)}),c+", because\n"+i(" ",2*r)+" "+l.join(", "))}if("object"===("undefined"==typeof n?"undefined":s(n))){l=[];for(var p in n)n.hasOwnProperty(p)&&l.push("-> "+p+": "+u(r)+" "+o(n[p],r+1)+a(r));return c+", because\n"+i(" ",2*r)+" "+l.join(", ")}}function i(e,r){for(var n="",t=0;t<r;t+=1)n+=e;return n}function u(e){return c[e]}function a(e){return c[c.length-e-1]}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c="❰❮❬❨❪﹙₍₎﹚❫❩❭❯❱",f=n(20);e.exports=t},function(e,r,n){"use strict";function t(e){return i(e)?e.__predToString?e.__predToString():o?o(e):e.name:null}var o,i=n(13);if("test"!==function(){}.name){var u=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,a=Function.prototype.toString,s=String.prototype.match,c=String.prototype.replace,f=n(70),l=new RegExp("^["+f+"]*(?:function|class)["+f+"]*\\*?["+f+"]+([\\w\\$]+)["+f+"]*","i");o=function(e){var r=s.call(c.call(a.call(e),u," "),l);return r&&"anonymous"!==r[1]?r[1]:""}}else"anonymous"===(new Function).name&&(o=function(e){return e.name&&"anonymous"!==e.name?e.name:""});e.exports=t},function(e,r,n){"use strict";function t(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function o(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},n=0;n<10;n++)r["_"+String.fromCharCode(n)]=n;var t=Object.getOwnPropertyNames(r).map(function(e){return r[e]});if("0123456789"!==t.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}var i=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=o()?Object.assign:function(e,r){for(var n,o,s=t(e),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var f in n)u.call(n,f)&&(s[f]=n[f]);if(i){o=i(n);for(var l=0;l<o.length;l++)a.call(n,o[l])&&(s[o[l]]=n[o[l]])}}return s}},function(e,r,n){"use strict";var t=n(1),o=n(22),i=o(t);e.exports=i},function(e,r,n){"use strict";var t=n(9);e.exports=function(e){if(!e)throw console.error(e),"!";if(e.clause)return e.clause;if(e.pred)return t(e.pred);throw console.error("unsupported:",e),"Not implemented"}},function(e,r,n){"use strict";function t(e){return null!==e&&void 0!==e&&e.constructor===String}e.exports=t},function(e,r,n){"use strict";function t(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function o(){var e=Array.prototype.slice.call(arguments);return{expressions:{withLabels:e.map(function(e){var r=v(e,3),n=r[0],o=r[1],i=r[2];return{name:n,expr:t({},o,i)}})}}}function i(){var e=Array.prototype.slice.call(arguments);return{expressions:{withoutLabels:e.map(function(e){var r=v(e,2),n=r[0],o=r[1];return t({},n,o)})}}}function u(e){var r=new d({type:"AND",exprs:[],fragments:e,opts:{conformedExprs:e}});return r.conform=function(e){return S(r,e,{conform:!0})},r}function a(e){var r=e.expressions.withLabels;if(r)for(var n=[],t=0;t<r.length;t+=1){var o=r[t].name;if(n.indexOf(o)>=0)throw new Error("Duplicate label detected: "+o);n.push(o)}return!0}function s(e){return O(e,function(r){var n,t=r.expressions,o=t.withLabels,i=t.withoutLabels,u=r.options;if(o){n=o;var a=n.map(function(e){var r=e.expr,n=x(r);return m({},e,{expr:n,clause:void 0,pred:void 0,clauseRef:void 0,delayedClause:void 0})}),s=m({},u,{named:!0}),c=new d({type:e,exprs:a,opts:s});return c.conform=function(e){return S(c,e,{conform:!0})},c}if(i){n=i,a=n.map(function(e){var r;if(e.clause)return r=e.clause,m({},e,{expr:r,clause:void 0});if(e.pred)return r=C(e.pred),m({},e,{expr:r,pred:void 0});if(e.clauseRef)return r=e.clauseRef,m({},e,{expr:r,clauseRef:void 0});if(e.delayedClause)return r=e.delayedClause,m({},e,{expr:r,delayedClause:void 0});throw console.error(e),"!"});var f=m({},u,{named:!1});return c=new d({type:e,exprs:a,opts:f}),c.conform=function(e){return S(c,e,{conform:!0})},c}return c=new d({type:e,exprs:[],opts:{}}),c.conform=function(e){return S(c,e,{conform:!0})},c})}function c(e){return O(e,function(r){var n,t=r.expr,o=r.opts;if(t.clause)n=t.clause;else if(t.pred)n=C(t.pred);else if(t.clauseRef)n=t.clauseRef;else{if(!t.delayedClause)throw console.error(t),"internal err";n=t.delayedClause}var i=C(n),u=new d({type:e,exprs:[i],opts:m({},o,{enclosedClause:i})});return u.conform=function(e){return S(u,e,{conform:!0})},u})}function f(e){return R(e)}function l(e){if(b(e))throw e;var r=e.keyExpression,n=e.valExpression,t=new d({type:Q,exprs:[],opts:{keyExpression:r,valExpression:n}});return t.conform=function(e){return S(t,e,{conform:!0})},t}function p(e){if(b(e))throw e;var r=new d({type:K,exprs:[],fragments:[],opts:{conformedArgs:e}});return r.conform=function(e){return S(r,e,{conform:!0})},r}var v=function(){function e(e,r){var n=[],t=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(t=(u=a.next()).done)&&(n.push(u.value),!r||n.length!==r);t=!0);}catch(e){o=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw i}}return n}return function(r,n){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=n(4),d=n(1),y=n(5),h=n(10),x=n(6),b=n(0),g=n(42),O=n(16),w=n(15),_=n(26),E=n(48),C=n(9),P=n(21),S=n(17),A=n(24),R=n(7),j=n(39),F=n(38),M=C(y),k=C(g),N=s(E.CAT),L=s(E.OR),D=c(E.Z_OR_M),T=c(E.O_OR_M),q=c(E.Z_OR_O),z=c(E.COLL_OF),I=C(y),Z=C(w),U=C(_),V=C(h),G=L(o(["clause","clause",I],["pred","clause",V])),Y=N(o(["name","clause",k],["comment","clause",q({expr:{pred:R}})],["expr","clause",G])),$=N(o(["expressions","clause",L(o(["withLabels","clause",L(i(["clause",D({expr:{clause:Y}})],["clause",z({expr:{clause:Y}})]))],["withoutLabels","clause",D({expr:{clause:G}})]))],["options","clause",q({expr:{pred:F}})])),W=u([{clause:$},{pred:a}]),B=P({args:T({expr:{clause:G}}),ret:y}),H={args:W,ret:M},J=function(e){return{args:N(o(["expr","clause",G],["opts","clause",q({expr:e})])),ret:M}},K="SHAPE",Q="MAP_OF",X=l({keyExpression:{clause:C(R)},valExpression:{clause:L(o(["valExpressionOnly","clause",G],["keyValExprPair","clause",N(o(["keyExpression","clause",G],["valExpression","clause",G]))]))}}),ee=D({expr:{pred:f}}),re=L(o(["keyList","clause",ee],["fieldDefs","clause",X])),ne=p({shapeArgs:{optionalFields:{opt:{fieldDefs:{requiredFields:{keyValExprPair:{keyExpression:{pred:j("req","required")},valExpression:{clause:re}}},optionalFields:{keyValExprPair:{keyExpression:{pred:j("opt","optional")},valExpression:{clause:re}}}}}}}}),te=P({args:N(o(["keyExpression","clause",G],["valExpression","clause",G])),ret:y}),oe=(p({shapeArgs:{optionalFields:{opt:{fieldDefs:{requiredFields:{keyValExprPair:{keyExpression:{pred:j("req","required")},valExpression:{clause:re}}},optionalFields:{keyValExprPair:{keyExpression:{pred:j("opt","optional")},valExpression:{clause:re}}}}}}}}),P({args:N(o(["shapeArgs","clause",ne])),ret:y})),ie=oe.instrumentConformed(p),ue=te.instrumentConformed(l),ae=P(J({pred:A})),se=ae.instrumentConformed(z),ce=P(H),fe=P(H),le=P(J({pred:A})),pe=P(J({pred:A})),ve=P(J({pred:A})),me=B.instrumentConformed(u),de={cat:ce.instrumentConformed(N),or:fe.instrumentConformed(L),zeroOrMore:le.instrumentConformed(D),zeroOrOne:ve.instrumentConformed(q),oneOrMore:pe.instrumentConformed(T),ExprClause:G,ClauseClause:I,PredClause:V,DelayedClauseClause:U,ClauseRefClause:Z,CatFnClause:ce,AndFnClause:B,OrFnClause:fe,ZeroOrMoreFnClause:le,OneOrMoreFnClause:pe,ZeroOrOneFnClause:ve,CollOfClause:ae,collOf:se,and:me,shape:ie,keys:ie,mapOf:ue,ShapeFnClause:oe,MapOfFnClause:te};de.alt=de.or,de["*"]=de.zeroOrMore,de["+"]=de.oneOrMore,de["?"]=de.zeroOrOne,e.exports=de},function(e,r,n){"use strict";function t(e){if(a(e)||s(e)||c(e))return e;if(u(e))return o(e);throw console.error(e),new Error("'Expression must either be a Clause object or a predication function that returns true or false. Given value: "+v(e)+"'")}function o(e){return new f({type:m,exprs:[e],opts:{predicate:e},conformFn:i(e)})}function i(e){return function(r){return e(r)?r:new l(r,e,[],"Predicate "+p(e)+" returns false")}}var u=n(10),a=n(5),s=n(15),c=n(26),f=n(1),l=n(2),p=n(3),v=n(20),m="PRED";e.exports=t},function(e,r,n){"use strict";function t(e){return o(e)}var o=n(13);e.exports=t},function(e,r,n){"use strict";var t=n(4),o=n(8),i=n(8),u=i.shape,a=i.keys,s=i.mapOf,c=n(54),f=n(55),l=n(49),p=n(46),v=p.wall,m=n(34),d=function(e){return o.cat.apply(null,Array.prototype.slice.call(e).map(m))},y={any:n(47),fclause:n(21),wall:v,clause:v,nullable:c,undefinable:f,maybe:l,sCat:d},h=t({},o,{shape:u,keys:a,mapOf:s},y);e.exports=h},function(e,r,n){"use strict";var t=n(37),o=n(58),i=n(36),u=n(35),a=n(13),s=n(24),c=n(38),f=n(34),l=n(39),p=n(7),v=n(57),m=n(60),d=n(22),y=n(59),h=Array.isArray,x={isNull:n(23),isUndefined:n(14),notEmpty:n(61),isBool:u,isBoolean:u,isFn:a,isFunction:a,isNum:t,isNumber:t,isNatInt:o,isNaturalNumber:o,isInt:i,isInteger:i,isObj:s,isObject:s,isPlainObj:c,isPlainObject:c,isStr:p,isString:p,isArray:h,isArr:h,equal:f,equals:f,equalsTo:f,eq:f,oneOf:l,not:m,isDate:v,instanceOf:d,isUuid:y,isUUID:y};x.default=x,e.exports=x},function(e,r,n){"use strict";function t(e){var r={};return(e||!1)&&["[object Function]","[object GeneratorFunction]"].indexOf(r.toString.call(e))>=0}e.exports=t},function(e,r,n){"use strict";e.exports=function(e){return void 0===e}},function(e,r,n){"use strict";function t(e){return e instanceof o}var o=n(32);e.exports=t},function(e,r,n){"use strict";function t(e,r,n){if(e){var t="return function "+e+(n||"")+"(){ return action.apply(this, arguments); };";return new Function("action",t)(r)}return r}e.exports=t},function(e,r,n){"use strict";function t(e,r,n){var t=n.phase,u=o(e);if(t){if(u[t])return u[t](r,n);throw"!"}var a=u.trailblaze(r,i({phase:"trailblaze"},n));return x(a)?a:u.reconstruct(a,i({phase:"reconstruct"},n))}function o(e){var r=h(e),n=b[r.type];if(!n)throw"unsupported type "+r.type;var o=n(r,t);return o}var i=n(4),u=n(78),a=n(72),s=n(79),c=n(81),f=n(76),l=n(80),p=n(71),v=n(74),m=n(77),d=n(73),y=n(75),h=n(9),x=n(0),b={OR:u,CAT:u,COLL_OF:v,ANY:a,Z_OR_M:u,O_OR_M:u,Z_OR_O:u,PRED:s,WALL:c,SHAPE:l,AND:p,CLAUSE_REF:d,DELAYED:y,FCLAUSE:f,MAP_OF:m};e.exports=t},function(e,r,n){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}var o=n(28),i=t(o),u=n(30),a=t(u);e.exports={conform:n(25),isValid:n(68),isNamespacePath:n(67),identity:n(41),isProblem:n(0),delayed:n(40),enforce:n(63),isClause:n(5),isFclause:n(66),isClauseRef:n(15),deref:n(29),isClauseName:n(42),describe:a.default,sExpression:i.default,handle:n(19)}},function(e,r,n){"use strict";function t(e,r,n){for(var t in e)return e.hasOwnProperty(t)&&r.hasOwnProperty(t)?r[t](e[t]):n(e[t]);throw console.error(e),new Error("No cases present in the given object")}e.exports=t},function(e,r,n){"use strict";function t(e,r){var n=Array.prototype.slice.call(arguments);return n[1]=function(e,n){var t;if(o(n)){var u=i(n);t=u?u+"()":n.toString()}else t=n;return r?r(t):t},JSON.stringify.apply(this,n)}var o=n(13),i=n(3);e.exports=t},function(e,r,n){"use strict";function t(e){var r=(e.args,e.ret,e.fn,new o({type:"FCLAUSE",exprs:[],opts:e}));return r.instrumentConformed=function(e){return i(r,e,{conform:!0,instrument:!0})},r.instrument=function(e){return i(r,e,{conform:!1,instrument:!0})},r}var o=n(1),i=n(17);n(3),e.exports=t},function(e,r,n){"use strict";var t=n(3),o=n(16);e.exports=function(e){var r=t(e),n=function(r){return r instanceof e};return r&&(n=o("instanceOf_"+r,n)),n.__predToString=function(){return"instanceOf_"+(r||"anonymous_type")+"_"},n}},function(e,r,n){"use strict";function t(e){return null===e}e.exports=t},function(e,r,n){"use strict";function t(e){return"object"===("undefined"==typeof e?"undefined":o(e))&&null!==e}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=t},function(e,r,n){"use strict";function t(e,r,n){if(e&&o(e)){var t=e.conform(r);return t}throw new Error("Expression needs to be of type Clause. expression: \n"+e+"\n offending value: "+r)}var o=n(5);e.exports=t},function(e,r,n){"use strict";var t=n(33),o=n(22);e.exports=o(t)},function(e,r,n){"use strict";function t(e){return!!/^[^.@%\&\*#]+/.test(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.NamespaceObjClause=r.ResolveFnClause=r.GetMetaFnClause=r.SetMetaFnClause=r.isNamespacePath=r.NamespaceFnClause=r.GetNSFnClause=r.SetNSFnClause=r.isClauseRef=void 0;var o=n(11),i=n(18),u=n(12),a=n(65),s=(0,i.delayed)(function(){return o.ExprClause}),c=(0,o.cat)("nsPath",i.isNamespacePath),f=(0,o.fclause)({args:c,ret:o.ExprClause}),l=(0,o.cat)("nsPath",i.isNamespacePath,"expression",s),p=(0,o.fclause)({args:l,ret:u.isBool}),v=(0,o.or)("register",l,"retrieve",c),m=(0,o.fclause)({args:v}),d=(0,o.fclause)({args:(0,o.cat)("source",(0,o.or)("namespacePath",i.isNamespacePath,"expression",o.ExprClause),"metaObj",u.isObj,"registry",(0,o.zeroOrOne)(u.isObj)),ret:u.isUndefined}),y=(0,o.fclause)({args:(0,o.cat)("source",(0,o.or)("namespacePath",i.isNamespacePath,"expression",o.ExprClause),"registry",(0,o.zeroOrOne)(u.isObj)),ret:(0,o.maybe)(u.isObj)}),h=(0,o.fclause)({args:(0,o.cat)("expression",o.ExprClause,"registry",(0,o.zeroOrOne)(u.isObj)),ret:i.isNamespacePath}),x=(0,o.shape)({optional:{subNamespaces:[t,(0,i.delayed)(function(){return x})],".meta":u.isObj,".expr":a}});r.isClauseRef=i.isClauseRef,r.SetNSFnClause=p,r.GetNSFnClause=f,r.NamespaceFnClause=m,r.isNamespacePath=i.isNamespacePath,r.SetMetaFnClause=d,r.GetMetaFnClause=y,r.ResolveFnClause=h,r.NamespaceObjClause=x},function(e,r,n){"use strict";function t(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function o(e){this.isRecursive=!0,this.expression=e}function i(e){x(this,e)}function u(e){x(this,e)}function a(e){var r=C("sExpression",R(function(){return n}),"quotedParamsMap",R(function(){return a}),"unquotedParamsMap",R(function(){return s}),"optionsObj",N,"recursive",L(o)),n=g(E("head",e,"params",C("labelled",w(E("label",D,"item",R(function(){return r}))),"unlabelled",w(E("item",R(function(){return r})))))),t=S(O,A(C("keyList",w(R(function(){return D})),"singleParam",R(function(){return r})))),a=_(L(i),R(function(){return t})),s=_(L(u),R(function(){return t}));return[n,r]}function s(e,r){var n=r.fieldDefs,o=r.keyList;if(n){var u=new i;for(var a in n)if(n.hasOwnProperty(a)){var s=j(n[a],{keyValExprPair:function(r){return c(e,r)},valExpressionOnly:function(r){return l(e,h(r))}},function(){throw"!g"});x(u,t({},a,s))}return u}if(o)return o;throw"!w"}function c(e,r){var n=r.keyExpression,t=r.valExpression;return new u({key:l(e,h(n)),val:l(e,h(t))})}function f(e,r){var n=V[r.type];if(n){var t=n(e,r);return t}throw console.error(r),new Error("Unsupported clause type "+r.type+".")}function l(e,r){if(v(e,r))return new o(r);var n=F(r),t=void 0,i=e;if("DELAYED"===n.type||"CLAUSE_REF"===n.type)return t=n.get(),l(e,t);t=n,i=p(e,n);var u=f(i,t);return[t].concat(u)}function p(e,r){if(!v(e,r))return e.concat([r])}function v(e,r){return e.indexOf(r)>=0}function m(e){var r=[];return l(r,e)}Object.defineProperty(r,"__esModule",{value:!0});var d=function(){function e(e,r){var n=[],t=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(t=(u=a.next()).done)&&(n.push(u.value),!r||n.length!==r);t=!0);}catch(e){o=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw i}}return n}return function(r,n){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y=n(3),h=n(6),x=n(4),b=n(11),g=b.wall,O=b.any,w=b.zeroOrMore,_=b.and,E=b.cat,C=b.or,P=b.ExprClause,S=b.mapOf,A=b.maybe,R=n(40),j=n(19),F=n(9),M=n(12),k=M.isStr,N=M.isPlainObj,L=M.instanceOf,D=k,T=a(P),q=d(T,2),z=q[0],I=q[1],Z=function(e,r){var n=r.opts.enclosedClause;return[l(e,n)]},U=function(e,r){var n=r.opts.named,t=r.exprs;if(0===t.length)return[];if(n){var o=t.reduce(function(r,n){var t=n.name,o=n.expr;return r.concat(['"'+t+'"',l(e,o)])},[]);return o}return t.reduce(function(r,n){var t=n.expr;return r.concat([l(e,t)])},[])},V={PRED:function(){return[]},WALL:function(e,r){var n=r.opts.enclosedClause;return[l(e,n)]},AND:function(e,r){var n=r.opts.conformedExprs;return n.map(h).map(function(r){return l(e,r)})},CAT:U,OR:U,Z_OR_M:Z,O_OR_M:Z,Z_OR_O:Z,COLL_OF:Z,ANY:function(){return[]},MAP_OF:function(e,r){var n=r.opts;return c(e,n)},SHAPE:function(e,r){var n=r.opts.conformedArgs.shapeArgs,t=n.optionalFields;t=void 0===t?{}:t;var o=t.opt,i=t.optional,a=n.requiredFields;a=void 0===a?{}:a;var c=a.req,f=a.required;return x(new u,c||f?{required:s(e,c||f)}:{},o||i?{optional:s(e,o||i)}:{})},FCLAUSE:function(e,r){var n=r.opts,t=n.args,o=n.ret,i=n.fn;return x(new u,t?{args:l(e,t)}:{},o?{ret:l(e,o)}:{},i?{fn:[y(i)+"()"]}:{})}};r.default=m,r.SExpressionClause=z,r.ParamItemClause=I,r.Recursive=o,r.QuotedParamsMap=i,r.UnquotedParamsMap=u,r.genClauses=a},function(e,r,n){"use strict";e.exports=function(e){for(var r=e;r.get;)r=r.get();return r}},function(e,r,n){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function o(e,r,n){var t=(0,v.default)(e),o=p.SExpressionClause.conform(t);if(y(o))throw console.error(o),new Error("The given expression is not a valid expression.");var u=i(o,r),a=0,s=l(u,a,n);return s}function i(e,r){return u(function(e){var r=e.head,n=e.params;return{head:x(r),params:n}},e,r)}function u(e,r,n){var t=e(r),o=t.head,i=t.params;if(!o)return[];if(n){var u=n(o);if(u)return u}if("PRED"===o.type)return[""+b(o.opts.predicate)];var s=m(o),f=void 0;if(i){var l=i.labelled,p=i.unlabelled,v=i.keyList;if(l){var d=l.reduce(function(r,t){var o=t.label,i=t.item;return r.concat([[o,", ",c(e,i,n)]])},[]);f=a(d,[", ",w])}else if(p){var y=p.map(function(r){var t=r.item;return c(e,t,n)});f=a(y,[", ",w])}else if(v){var h=v;f=a(h,[", "])}else f=[]}else f=[];return[s,"("].concat(f.length>1?[_,w]:[0===f.length?"":" "]).concat(f).concat(f.length>1?[E,w]:[0===f.length?"":" "]).concat([")"])}function a(e,r){return 0===e.length?e:e.reduce(function(n,t,o){return o<e.length-1&&!s(t)?n.concat([t]).concat(r):n.concat([t])},[])}function s(e){return e===w||e===_||e===E}function c(e,r,n){var t=h(r,{label:function(e){return e},sExpression:function(r){return u(e,r,n)},quotedParamsMap:function(r){return f(e,r,n,!0)},unquotedParamsMap:function(r){return f(e,r,n,!1)},optionsObj:function(e){return g(e)},recursive:function(e){var r=e.expression;return["<recursive>: ",m(r)]}},function(){throw"!s"});return t}function f(e,r,n,t){var o=["{",_,w],i=[];for(var u in r)if(r.hasOwnProperty(u)){var s=[];s.push(t?'"'+u+'": ':"<"+u+">: ");var f=h(r[u],{keyList:function(e){return["[ "].concat(a(e.map(function(e){return'"'+e+'"'}),[", "])).concat(" ]")},singleParam:function(r){return c(e,r,n)}},function(){throw"!e"});f&&(s.push(f),i.push(s))}return i=a(i,[", ",w]),o=o.concat(i).concat([E,w,"}"])}function l(e,r,n){var t=r,o=!1;return e.reduce(function(e,r){if(o&&(o=!1,e=e.concat(O(n*t," ").join(""))),d(r))return e.concat(r);if(Array.isArray(r))return e.concat(l(r,t,n));if(r===w){if(n>0)return o=!0,e.concat("\n")}else if(r===_)t+=1;else{if(r!==E)throw console.error(r),"!3";t-=1}return e},"")}Object.defineProperty(r,"__esModule",{value:!0}),r.isSpecial=r.interpose=r.INDENT_OUT=r.INDENT_IN=r.NEW_LINE=r.fragsToStr=r.humanReadable=void 0;var p=n(28),v=t(p),m=n(64),d=n(7),y=n(0),h=n(19),x=n(6),b=n(3),g=n(20),O=n(69),w=function(){},_=function(){},E=function(){};r.default=o,r.humanReadable=m,r.fragsToStr=l,r.NEW_LINE=w,r.INDENT_IN=_,r.INDENT_OUT=E,r.interpose=a,r.isSpecial=s},function(e,r,n){"use strict";(function(e){function t(e){function r(r){var n=l;n=r?r+e:e;var t=C.get(l,o(n));return t?p(t[".expr"],t[".meta"]):void 0}var n=new v({ref:e,getFn:r,conformFn:null});return n.conform=function(e){var n=r();return w(n,e,{conform:!0})},n}function o(e){return e.replace(/^(.+)(\/)(.+)$/,"$1.$3").replace(/^\//,"")}function i(e){var r,n=e.nsPath,t=L(n);return r=t}function u(e){var r=e.nsPath,n=e.expression;a(r,n)}function a(e,r){if(r){if(r.clause||r.pred){var n=r.clause||r.pred;return T(e,{".expr":n}),n}throw console.error(r),"!"}throw console.error(r),"!"}function s(){return l||c(),l}function c(){l=e[q]={}}function f(e,r){return r?_(e,r):_(e,Z())}Object.defineProperty(r,"__esModule",{value:!0});var l,p=n(4),v=n(32),m=n(11),d=m.cat,y=m.or,h=m.fclause,x=m.shape,b=n(5),g=n(10),O=n(35),w=n(17),_=n(43),E=n(9),C=n(56),P=n(18),S=P.isNamespacePath,A=P.isClauseRef,R=n(27),j=R.GetNSFnClause,F=R.SetNSFnClause,M=R.NamespaceFnClause,k=R.SetMetaFnClause,N=R.GetMetaFnClause,L=h({args:d(S),ret:A}).instrument(t),D=x({req:{".expr":y(b,g)}}),T=h({args:d(S,D),ret:O}).instrument(function(e,r){s();var n=C.get(l,o(e));return C.set(l,o(e),p({},n,r)),!0}),q="___CLAUSEJS_REGISTRY",z=k.instrumentConformed(function(e){var r=e.source,n=r.namespacePath,t=r.expression,i=e.metaObj,u=e.registry;if(u||(u=l),n){var a=C.get(u,o(n)),s=a&&a[".meta"];C.set(u,o(n),p({},a,{".meta":p({},s,i)}))}else if(t){var c=E(t);c.meta=p(c.meta,i)}}),I=N.instrumentConformed(function(e){var r=e.source,n=r.namespacePath,t=r.expression,i=e.registry;if(i||(i=l),n){var u=C.get(i,o(n)),a=u&&u[".meta"];return a}if(t){var s=E(t);return s.meta}});s();var Z=function(){return l},U=M.instrumentConformed(function(e){var r=e.register,n=e.retrieve;return r?u(r):n?i(n):void 0});U.get=j.instrumentConformed(i),U.set=F.instrumentConformed(u),U.clearRegistry=c,U.getRegistry=Z,U.setMeta=z,r.getRegistry=Z,r.clearRegistry=c,r.setMeta=z,r.getMeta=I,r.resolve=f,r.default=U}).call(r,n(82))},function(e,r,n){"use strict";function t(e){var r=e.ref,n=e.getFn,t=e.conformFn;this.type="CLAUSE_REF",this.get=n,this.conform=t,this.ref=r}var o=n(1);t.prototype=Object.create(o.prototype),e.exports=t},function(e,r,n){"use strict";function t(e){var r=e.getFn;this.type="DELAYED",this.get=r;var n=this;n.instrument=function(e){var n=r();return n.instrument(e)},n.instrumentConformed=function(e){var n=r();return n.instrumentConformed(e)},n.conform=function(e){var n=r();return n.conform(e)}}var o=n(1);t.prototype=Object.create(o.prototype),e.exports=t},function(e,r,n){"use strict";e.exports=function(e){return function(r){return r===e}}},function(e,r,n){"use strict";function t(e){return"boolean"==typeof e}e.exports=t},function(e,r,n){"use strict";function t(e){return"number"==typeof e&&Math.floor(e)===e&&e!==1/0}e.exports=t},function(e,r,n){"use strict";function t(e){return"number"==typeof e}e.exports=t},function(e,r,n){"use strict";function t(e){if(o(e)){if("function"==typeof Object.getPrototypeOf){var r=Object.getPrototypeOf(e);return r===Object.prototype||null===r}return"[object Object]"==Object.prototype.toString.call(e)}return!1}var o=n(24);e.exports=t},function(e,r,n){"use strict";e.exports=function(){var e;if(1===arguments.length&&Array.isArray(arguments[0]))e=arguments[0];else{if(!(arguments.length>0))throw new Error("Items list is required.");e=Array.prototype.slice.call(arguments)}var r=function(r){return e.indexOf(r)>=0};return r.__predToString=function(){return"oneOf(".concat([e.map(JSON.stringify).join(", ")]).concat(")")},r}},function(e,r,n){"use strict";function t(e){return new o({getFn:e})}var o=n(33);e.exports=t},function(e,r,n){"use strict";function t(e){return e}e.exports=t},function(e,r,n){"use strict";var t=n(7);e.exports=function(e){return t(e)}},function(e,r,n){"use strict";function t(e,r){var n=c(p,function(e){var n=f(e,2),t=n[0],o=n[1];if(t===r)return o});return n||(n=i(r),p.push([r,n])),a(n,e)}function o(e){var r=i(e),n={};return r.forEach(function(e){var r=f(e,1),t=r[0];n[t]||(n[t]=[]),n[t].push(e)}),n}function i(e){var r=[],n=l.NamespaceObjClause.conform(e);return u(null,null,n,r),r}function u(e,r,n,t){var o=e?e+"."+r:r,i=void 0;for(var a in n)if(n.hasOwnProperty(a))switch(a){case"subNamespaces":i=n[a];for(var s in i)i.hasOwnProperty(s)&&u(o,s,i[s],t);break;case".expr":t.push([""+(e?e:""),""+r,n[".expr"]])}}function a(e,r){var n=c(e,function(e){var n=f(e,3),t=n[0],o=n[1],i=n[2];if(i===r||s(i)===s(r))return t+"/"+o});return n}function s(e){return"PRED"===e.type?e.opts.predicate:e}function c(e,r){for(var n=0;n<e.length;n++){var t=r(e[n]);if(t)return t}return null}var f=function(){function e(e,r){var n=[],t=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(t=(u=a.next()).done)&&(n.push(u.value),!r||n.length!==r);t=!0);}catch(e){o=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw i}}return n}return function(r,n){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=n(27),p=[];e.exports={resolve:t,getDefList:o}},function(e,r,n){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o=n(31),i=t(o),u=n(4),a=n(11),s=n(18),c=n(12),f={Problem:n(2),Clause:n(1)},l=u(i.default,{resolve:o.resolve},a,s,f,c);l.VERSION=n(45),e.exports=l,r.default=l},function(e,r,n){"use strict";e.exports="0.0.23"},function(e,r,n){"use strict";function t(e){var r=i(e),n=new o({type:"WALL",exprs:[r],opts:{enclosedClause:r}});return n.conform=function(e){return f(n,e,{conform:!0})},n}var o=n(1),i=n(9),u=n(8),a=u.cat,s=u.ExprClause,c=n(21),f=n(17),l=c({args:a(s),ret:s}),p=l.instrument(t);e.exports={WallFnClause:l,wall:p}},function(e,r,n){"use strict";function t(){return new o({type:u,exprs:[],conformFn:i})}var o=n(1),i=n(41),u="ANY";e.exports=t},function(e,r,n){"use strict";e.exports={CAT:"CAT",OR:"OR",Z_OR_M:"Z_OR_M",Z_OR_O:"Z_OR_O",O_OR_M:"O_OR_M",PRED:"PRED",COLL_OF:"COLL_OF"}},function(e,r,n){"use strict";function t(e){return i(u,a,e)}var o=n(8),i=o.or,u=n(23),a=n(14);e.exports=t},function(e,r,n){"use strict";function t(e){e=a(e);var r;if(null===e.type)throw"Clause has no type: "+e;r=e.type in c?c[e.type]:c.PRED;var n=r(e);return n}function o(e){return new u({type:"ROOT",exprs:[e]})}var i=n(51),u=n(1),a=n(29),s=function(e){for(var r=0,n=[e.head],t=[];n.length>0;){var o=n.pop();null===o.index&&(o.index=r,r++,o.transitions.forEach(function(e){n.push(e.target)}),t.push(o))}return t},c={},f=function(e){return function(r){var n=t(r.exprs[0]);return e(n)}},l=function(e){return function(r){var n=r.exprs.map(function(e){var r=t(e.expr);return r.name=e.name,r});return e(n)}};["ROOT","Z_OR_M","O_OR_M","Z_OR_O"].forEach(function(e){c[e]=f(i[e])}),["OR","CAT"].forEach(function(e){c[e]=l(i[e])}),c.PRED=function(e){return i.PRED(e)};var p=function(e){var r,n=o(e),i=t(n),u=s(i),a=u.length,c={};return u.forEach(function(e){0===e.transitions.length&&(r=e.index);var n={};e.transitions.forEach(function(e){n[e.target.index]=e.clause}),c[e.index.toString()]=n}),{initialState:0,numStates:a,finalState:r,transitions:c,expression:e}};e.exports=p},function(e,r,n){"use strict";function t(e,r){return{transitions:null===e?[]:e,index:r||null}}function o(e,r){return{clause:e,target:r}}function i(e,r){return{head:e,tails:r}}function u(e,r,n){var t=i(r,n);return t.name=e,t}function a(e,r){e.forEach(function(e){e.target=r})}function s(){return{isEpsilon:!0}}function c(e,r,n,t){var o=s();return o.name=r,o.op=n,o.group=t,o.dir=e,o}function f(e,r){var n=o(e,r.head),u=t([n]),a=i(u,r.tails);return a}function l(e,r){var n=o(e,null),u=t([n],null);a(r.tails,u);var s=i(r.head,[n]);return s}var p={};p.PRED=function(e){var r=o(e,null),n=t([r],null),u=[r],a=i(n,u);return a},p.OR=function(e){e=e.map(function(e){var r=c("out",e.name,"OR"),n=o(r,null),i=t([n]);a(e.tails,i);var s=o(c("in",e.name,"OR"),e.head),f=t([s]),l=u(e.name,f,[n]);return l});var r=function(e,r){var n=e.head.transitions.concat(r.head.transitions),o=t(n),i=e.tails.concat(r.tails),a=u(e.name,o,i);return a},n=e.reduce(r);return n=f(c("enter",null,"OR","para_in"),n),n=l(c("exit",null,"OR","para_out"),n)},p.CAT=function(e){var r=function(e,r){a(e.tails,r.head);var n=e.head,t=r.tails,o=i(n,t);return o};e=e.map(function(e){var r=o(c("maybe_out",e.name,"CAT"),null),n=t([r]);a(e.tails,n);var i=e.head.transitions.map(function(r){var n=t([r]),i=o(c("maybe_in",e.name,"CAT"),n);return i}),s=t(i),f=u(e.name,s,[r]);return f});var n;if(e.length>0)n=e.reduce(r);else{var p=s(),v=o(p,null),m=t([v]);n=i(m,[v])}return n=f(c("maybe_enter",null,"CAT","in"),n),n=l(c("maybe_exit",null,"CAT","out"),n)},p.Z_OR_M=function(e){var r="Z_OR_M",n=o(c("loop",null,r),e.head),u=o(s(),null),p=t([n,u]);a(e.tails,p);var v=i(p,[u]),m=v.head.transitions.map(function(e){var r=t([e]),n=o(s(),r);return n}),d=t(m);return v=i(d,v.tails),v=f(c("maybe_enter",null,r,"in"),v),v=l(c("maybe_exit",null,r,"out"),v)},p.O_OR_M=function(e){var r="O_OR_M",n=o(c("loop",null,r),e.head),u=o(s(),null),p=t([n,u]);a(e.tails,p);var v=i(e.head,[u]);return v=f(c("maybe_enter",null,r,"in"),v),v=l(c("maybe_exit",null,r,"out"),v)},p.Z_OR_O=function(e){var r="Z_OR_O",n=o(c("loop",null,r),e.head),u=o(s(),null),a=t([n,u]),p=e.tails.concat([u]),v=i(a,p);return v=f(c("maybe_single_enter",null,r,"in"),v),v=l(c("maybe_single_exit",null,r,"out"),v)},p.ROOT=function(e){var r=t(null,null);return a(e.tails,r),i(e.head,[])},e.exports=p},function(e,r,n){"use strict";function t(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function o(e){this.value=e}function i(e){this.fragment=e}function u(e){this.fragment=e}function a(e,r){this.fragment=r,this.name=e}function s(e){this.fragment=e}function c(e,r){this.fragment=r,this.name=e}function f(){}function l(){}function p(){}function v(e){this.name=e}function m(e,r,n){var a,m=n.conform,b=e.inputType,g=[];if(e.forEach(function(e){if(e.move)switch(e.move.dir){case"maybe_enter":g.push(new p);break;case"maybe_exit":for(var i=void 0,u=new l;!((i=g.pop())instanceof p);)u=h(b,m,u,i);g.push(u);break;case"maybe_single_enter":g.push(new p);break;case"maybe_single_exit":var a=g.pop(),x=void 0;a instanceof p?x=new f:(x=a,g.pop()),g.push(x);break;case"enter":break;case"exit":var O=g.pop(),w=void 0;if(m&&O instanceof c){var _=void 0;_=O.fragment instanceof l?{}:t({},O.name,O.fragment),w=new s(_)}else w=O;g.push(w);break;case"maybe_in":m&&e.move.name&&g.push(new v(e.move.name));break;case"loop":break;case"maybe_out":if(m&&e.move.name){
var E=g.pop(),C=g.pop();g.push(d(C,E))}break;case"in":m&&e.move.name&&g.push(new v(e.move.name));break;case"out":if(m&&e.move.name){var P=g.pop(),S=g.pop();g.push(y(S,P))}break;case"clause":var A=r(e.clause,e.guide,n);g.push(new o(A));break;default:throw console.error(e),"FUUU"}}),1!==g.length)throw console.error("valStack",g),"!";a=g.pop();var O=void 0;return O=a instanceof i?a.fragment:a instanceof u?a.fragment:a instanceof s?a.fragment:a instanceof o?a.value:a instanceof l?x(b,[]):a}function d(e,r){if(r instanceof f)return new a(e.name,new l);if(r instanceof u)return new a(e.name,r.fragment);if(r instanceof i||r instanceof s)return new a(e.name,r.fragment);if(r instanceof o)return new a(e.name,r.value);if(r instanceof l)return new a(e.name,new l);throw console.error(r),"c!!!"}function y(e,r){if(r instanceof f)return new c(e.name,new l);if(r instanceof s)return new c(e.name,r.fragment);if(r instanceof i)return new c(e.name,r.fragment);if(r instanceof u)return new c(e.name,r.fragment);if(r instanceof o)return new c(e.name,r.value);if(r instanceof l)return new c(e.name,new l);throw console.error(r),"c!!!alt"}function h(e,r,n,c){if(r&&c instanceof a){var p=void 0;if(n instanceof f)p={};else if(n)if(n instanceof l)p={};else if(n instanceof u)p=n.fragment;else if(n instanceof i)p=n.fragment;else{if(!(n instanceof s))throw console.error(n,c),"!!acc_fl_np";p=n.fragment}else p={};var v=void 0;v=c.fragment instanceof l?{}:t({},c.name,c.fragment);var m=new u(b({},v,p));return m}var d=void 0,y=void 0;if(n instanceof f)y=[];else if(n)if(n instanceof i)y=n.fragment;else if(n instanceof u)y=[n.fragment];else{if(!(n instanceof l))throw console.error(n),"!!acc_fl";y=[]}else y=[];if(c instanceof o)d=[c.value];else if(c instanceof i)d=c.fragment;else if(c instanceof u)d=[c.fragment];else if(c instanceof s)d=[c.fragment];else if(c instanceof f)d=[];else{if(!(c instanceof l))throw console.error(c),"cc!!";d=[]}var h=new i(x(e,d.concat(y)));return h}function x(e,r){return"string"===e&&Array.isArray(r)?r.join(""):r}var b=n(4);e.exports=m},function(e,r,n){"use strict";function t(e,r,n,t){for(var a={matched:!1,chain:null},s="undefined"==typeof r?"undefined":u(r),c={state:0,offset:0,input:[r],groupCount:0,arrayed:!1},f=[c];f.length>0;){var l=f.shift(),p=l.offset,v=l.input;if(l.state===e.finalState&&p===v.length)return a.matched=!0,a.chain=i(e,l,s),a;for(var m in e.transitions[l.state]){var d=parseInt(m),y=o(e,d,l,n,t);if(y)if(y.isProblem){var h=y.name,x=y.problem,b=y.position;a.lastProblem={name:h,problem:x,position:b}}else f.push(y)}}return a}function o(e,r,n,t,o){var i=n.input,u=n.offset,c=n.groupCount,f=n.arrayed,l=i[u],p=e.transitions[n.state][r];"in"===p.group?(0===c&&(Array.isArray(i[0])||s(i[0]))&&(i=i[0],u=0,f=!0),c+=1):"out"===p.group&&(c-=1,0===c&&(f&&(u=u===i.length?1:0,i=[i]),f=!1));var v,m;v=p.isEpsilon?u:u+1;var d,y,h=p.name||n.move&&n.move.name;if(v<=i.length){if(p.isEpsilon)return m=p.dir?{dir:p.dir,name:p.name,op:p.op,group:p.group}:null,y={input:i,groupCount:c,arrayed:f,state:r,offset:v,move:m,clause:p,prev:n,isEpsilon:!0};if(d=t(p,l,o),a(d))return{isProblem:!0,problem:d,name:h,position:u};if(u<i.length)return m={dir:"clause"},y={input:i,groupCount:c,arrayed:f,state:r,offset:v,move:m,prev:n,isEpsilon:!1,clause:p,guide:d}}}function i(e,r,n){for(var t,o=[],i=r;i;){if(!t||i.state!==t.state&&i.move){var u={isEpsilon:i.isEpsilon,move:i.move,state:i.state};i.isEpsilon||(u.guide=i.guide,u.clause=i.clause),o.unshift(u)}t=i,i=i.prev}return o.inputType=n,o}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(0),s=n(7);e.exports=t},function(e,r,n){"use strict";function t(e){return i(u,e)}var o=n(8),i=o.or,u=n(23);e.exports=t},function(e,r,n){"use strict";function t(e){return i(u,e)}var o=n(8),i=o.or,u=n(14);e.exports=t},function(e,r,n){"use strict";function t(e,r,n){if("number"==typeof r&&(r=[r]),!r||0===r.length)return e;if(null==e)return n;if("string"==typeof r)return t(e,r.split("."),n);var o=i(r[0]),u=e[o];return void 0===u?n:1===r.length?u:t(e[o],r.slice(1),n)}function o(e,r,n){if("number"==typeof r&&(r=[r]),!r||0===r.length)return e;if("string"==typeof r)return o(e,r.split(".").map(i),n);var t=r[0],u=e[t];return 1===r.length?(e[t]=n,u):(void 0===u&&("number"==typeof r[1]?e[t]=[]:e[t]={}),o(e[t],r.slice(1),n))}function i(e){var r=parseInt(e);return r.toString()===e?r:e}e.exports={get:t,set:o}},function(e,r,n){"use strict";e.exports=function(e){return e&&e instanceof Date&&!isNaN(e.valueOf())}},function(e,r,n){"use strict";function t(e){return o(e)&&e>=0}var o=n(36);e.exports=t},function(e,r,n){"use strict";e.exports=function(e){return!!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}},function(e,r,n){"use strict";function t(e){var r=o(e),n=function(r){return!e(r)};return r?i("not_"+r,n):n}var o=n(3),i=n(16);e.exports=t},function(e,r,n){"use strict";e.exports=function(e){return!!e&&0!==e.length}},function(e,r,n){"use strict";function t(e){throw e}e.exports=t},function(e,r,n){"use strict";var t=n(0),o=n(25);e.exports=function(e,r){var n=o(e,r);if(t(n))throw n}},function(e,r,n){"use strict";function t(e){return o(e)?e:e.type?i[e.type]?i[e.type]:e.type.toLowerCase():e.toString()}var o=n(7),i={Z_OR_M:"zeroOrMore",O_OR_M:"oneOrMore",Z_OR_O:"zeroOrOne",COLL_OF:"collOf",MAP_OF:"mapOf"};e.exports=t},function(e,r,n){"use strict";function t(e){return o(e)||i(e)||u(e)||a(e)}var o=n(10),i=n(5),u=n(15),a=n(26);e.exports=t},function(e,r,n){"use strict";function t(e){return o(e)&&"FCLAUSE"===e.type}var o=n(5);e.exports=t},function(e,r,n){"use strict";function t(e){return o(e)&&/^\/?[a-zA-Z0-9\-_\.]*\/([a-zA-Z0-9\-_]+)$/.test(e)}var o=n(7);e.exports=t},function(e,r,n){"use strict";function t(e,r){if(e)return u(e)?!o(a(e,r)):!i(e)||e(r);throw new Error("Clause is required")}var o=n(0),i=n(10),u=n(5),a=n(25);e.exports=t},function(e,r,n){"use strict";function t(e,r){var n,t=[];for(n=0;n<e;n++)t.push(r);return t}e.exports=t},function(e,r,n){"use strict";var t=[9,10,11,12,13,32,160,5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288,65279];e.exports=t.reduce(function(e,r){return e+String.fromCharCode(r)},"")},function(e,r,n){"use strict";function t(e,r){function n(e,n){for(var t=e,u=[],c=[],f=0;f<s.length;f+=1){var l=0===f?e:u[f-1];if(t=r(s[f],l,n),i(t)){c.push(t);break}var p=r(s[f],t,a({},n,{phase:"reconstruct"}));u.push(p)}return 0===c.length?{conforms:u}:new o(e,s,c,"One or more expressions failed AND test")}function t(e){var r=e.conforms;return r[s.length-1]}var s=e.opts.conformedExprs.map(u);return{trailblaze:n,reconstruct:t}}var o=n(2),i=n(0),u=n(6),a=n(4);e.exports=t},function(e,r,n){"use strict";function t(){return{trailblaze:o,reconstruct:o}}function o(e){return e}e.exports=t},function(e,r,n){"use strict";function t(e,r){function n(n,t){var o=e.get();if(o)return r(o,n,t)}return{trailblaze:n,reconstruct:n}}e.exports=t},function(e,r,n){"use strict";function t(e,r){function n(n,t){var c=[],f=[];if(Array.isArray(n)){if(s){var l=s.maxCount,p=s.minCount;if(u(l)&&n.length>l)return new o(n,e,f,"collOf: collection size "+n.length+" exceeds maxCount "+l+".");if(u(p)&&n.length<p)return new o(n,e,f,"collOf: collection size "+n.length+" is less than minCount "+p+".")}for(var v=0;v<n.length;v+=1){var m=r(a,n[v],t);if(i(m)){f.push(m);break}c.push(m)}return f.length>0?new o(n,e,f,"One or more elements failed collOf test"):c}return new o(n,e,[],"collOf expects an array")}function t(e,n){for(var t=[],o=0;o<e.length;o+=1){var i=r(a,e[o],n);t.push(i)}return t}var a=e.exprs[0],s=e.opts;return{trailblaze:n,reconstruct:t}}var o=n(2),i=n(0),u=n(37);e.exports=t},function(e,r,n){"use strict";function t(e,r){function n(n,t){var o=e.get();if(o)return r(o,n,t)}return{trailblaze:n,reconstruct:n}}e.exports=t},function(e,r,n){"use strict";function t(e,r){function n(e){return e}function t(e,r){if(!e)throw new Error("A function must be clauseified for instrumentation.");var n=r.conform,t=r.instrument;return n&&t?f(e,r):t?c(e,r):void 0}function c(e,r){var n=u(e),t=l(n,e,r),o=a(n,t,"__instrumented");return o}function f(e,r){var n=u(e),t=d(n,e,r),o=a(n,t,"__conformed");return o}function l(e,n){return function(){var t=Array.prototype.slice.call(arguments),o=v(n,e,t),i=n.apply(this,o),u=m(n,e,i),a=h?r(h,t,{conform:!0,instrument:!0}):t,s=void 0;return s=x?r(x,i,{conform:!0,instrument:!0}):i,p(e,n,b,a,s),u}}function p(r,n,t,o,u){if(t){var a=t.call(null,o,u);if(!a){var c=new i({args:o,ret:u},e,[],"Function "+r+" failed valiation on argument-return value relation");s(c)}}}function v(n,t,u){var a=t||"<anonymous>";if(!h)return u;var c=r(h,u,{phase:"trailblaze"});if(!o(c))return r(h,c,{phase:"reconstruct",conform:!1,instrument:!0});var f=new i(u,e,[c],"Arguments for function "+a+"() is not valid");s(f)}function m(n,t,u){var a=t||"<anonymous>";if(!x)return u;var c=r(x,u,{phase:"trailblaze"});if(!o(c)){var f=r(x,c,{phase:"reconstruct",instrument:!0,conform:!1});return f}var l=new i(u,e,[c],"Return value for function "+a+"() is not valid");s(l)}function d(e,n){var t=e||"<anonymous>";return function(){var u=Array.prototype.slice.call(arguments),a=r(h,u,{conform:!0,instrument:!0});if(o(a)){var c=new i(u,h,[a],"Arguments for function "+t+" is not valid");s(c)}var f=n.call(this,a);if(m(n,e,f),b){var l;l=x?r(x,f,{conform:!0,instrument:!0}):f,p(e,n,b,a,l)}return f}}var y=e.opts,h=y.args,x=y.ret,b=y.fn;return{trailblaze:n,reconstruct:t}}var o=n(0),i=n(2),u=n(3),a=n(16),s=n(62);e.exports=t},function(e,r,n){"use strict";function t(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function o(e,r){function n(n,o){var i={};for(var s in n)if(n.hasOwnProperty(s)){var c=r(l,s,o);if(u(c))return new a(n,e,t({},s,c),"mapOf: key "+s+" failed validation");var f=r(p,n[s],o);if(u(f))return new a(n,e,t({},s,f),"mapOf: value for key "+s+" failed validation");i[s]={expr:p,valGuide:f}}return i}function o(e,n){var t={};for(var o in e){var i=e[o],u=i.expr,a=i.valGuide;t[o]=r(u,a,n)}return t}var s=e.opts,c=s.keyExpression,f=s.valExpression,l=c&&i(c),p=f&&i(f);return{trailblaze:n,reconstruct:o}}var i=n(6),u=n(0),a=n(2);e.exports=o},function(e,r,n){"use strict";function t(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function o(e,r){function n(n,o){c||(c=a(e));var u=i(c,n,r,o),f=u.chain,l=u.matched,p=u.lastProblem;if(l===!0)return{chain:f};var v=void 0;if(p){var m=p.name,d=p.position,y=p.problem;v=t({},m?'"'+m+'"':"<At position "+d+">",y)}else v=[];return new s(n,e,v,"Clause "+e.type+" did not match value")}function o(e,n){var t=e.chain,o=u(t,r,n);return o}var c;return{trailblaze:n,reconstruct:o}}var i=n(53),u=n(52),a=n(50),s=n(2);e.exports=o},function(e,r,n){"use strict";function t(e){function r(r){var n=e.exprs[0];return n(r)?r:new i(r,e,[],"Predicate "+o(n)+"() returns false")}function n(e){return e}return{trailblaze:r,reconstruct:n}}var o=n(3),i=n(2);e.exports=t},function(e,r,n){"use strict";function t(e,r){function n(n,t){function o(e){e:for(var o in e)if(e.hasOwnProperty(o)){var i=e[o],u=a(n,o,i,r,t),s=u.noop,c=u.problem,f=u.singleMatch,l=u.groupMatch;if(c){y.push([o,c]);break e}if(f)h.singles.push(f);else if(l)l.matchedKeys.length>0&&h.groups.push(l);else if(!s)throw"!"}}if(["object","function"].indexOf("undefined"==typeof n?"undefined":f(n))<0)return new m(n,e,[],"Value is not an object");s||(s=i(p,d,r,t));var u=s(n);if(l(u))return u;var v,y=[],h={val:n,groups:[],singles:[]};p&&(v=p.fieldDefs),v&&o(v);var x;if(d&&(x=d.fieldDefs),x&&o(x,!0),y.length>0){for(var b={},g=[],O=0;O<y.length;O++){var w=c(y[O],2),_=w[0],E=w[1];g.push(_),b[_]=E}var C=new m(n,e,b,"At least one property failed validation: "+g.join(", "));return C}return h}function t(e,n){var t,i=e.val,a=e.singles,s=e.groups,c={walkOpts:n},f=n.mutate;return t=f?i:v({},i),a.forEach(function(e){o(t,e,r,n)}),s.forEach(function(e){var i=e.name,a=e.matchedKeys;if(c){t[i]={};var s=[];a.forEach(function(e){o(t[i],e,r,n),s.push(e.key)}),u(t,s)}else a.forEach(function(e){o(t,e,r,n)})}),t}var s,p,d,y=e.opts.conformedArgs.shapeArgs,h=y.requiredFields,x=y.optionalFields;return h&&(p=h.req||h.required),x&&(d=x.opt||x.optional),{trailblaze:n,reconstruct:t}}function o(e,r,n,t){var o=r.key,i=r.clause,u=r.guide;e[o]=n(i,u,t)}function i(e,r,n,t){return function(r){if(e){var o,i=[],u=e.fieldDefs,a=e.keyList;if(u){o=[];for(var c in u)u.hasOwnProperty(c)&&o.push(c)}else{if(!a)throw"unsupported";o=[].concat(a)}for(var f=0;f<o.length;f++){var p=o[f];if(u&&u[p].keyValExprPair){var v=!1;e:for(var d in r)if(r.hasOwnProperty(d)){var y=s(d,u[p].keyValExprPair.keyExpression,n,t);if(!l(y)){v=!0;break e}}v||i.push(p)}else if(u&&u[p].valExpressionOnly)if(r.hasOwnProperty(p)){var h=s(r[p],u[p].valExpressionOnly,n,t);l(h)&&i.push(p)}else i.push(p);else{if(!a)throw"!";void 0===r[p]&&i.push(p)}}if(i.length>0)return new m(r,e,[],"req: keys required: "+i.join(", "))}return r}}function u(e,r){for(var n=0;n<r.length;n++)delete e[[r[n]]]}function a(e,r,n,t,o){var i=n.valExpressionOnly,u=n.keyValExprPair;if(u){var a=[],c=u.keyExpression,f=u.valExpression;e:for(var v in e)if(e.hasOwnProperty(v)){var m=s(v,c,t,o);if(!l(m)){if(e===e[v])continue e;var y=s(e[v],f,t,o);if(l(y))return{problem:y};a.push({key:v,clause:d(f),guide:y})}}return{groupMatch:{name:r,matchedKeys:a}}}if(i){var h=e[r];if(p(h)||e[r]===e)return{noop:!0};var x=s(h,i,t,o);return l(x)?{problem:x}:{singleMatch:{key:r,clause:d(i),guide:x}}}throw"!!"}function s(e,r,n,t){var o=d(r),i=n(o,e,t);return i}var c=function(){function e(e,r){var n=[],t=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(t=(u=a.next()).done)&&(n.push(u.value),!r||n.length!==r);t=!0);}catch(e){o=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw i}}return n}return function(r,n){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(0),p=n(14),v=n(4),m=n(2),d=n(6);e.exports=t},function(e,r,n){"use strict";function t(e,r){function n(n,t){var i=o(e.exprs,1),u=i[0];return r(u,n,t)}return{trailblaze:n,reconstruct:n}}var o=function(){function e(e,r){var n=[],t=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(t=(u=a.next()).done)&&(n.push(u.value),!r||n.length!==r);t=!0);}catch(e){o=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw i}}return n}return function(r,n){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.exports=t},function(e,r){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n}])});