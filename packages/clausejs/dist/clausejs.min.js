!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.C=n():e.C=n()}(this,function(){return function(e){function n(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var r={};return n.m=e,n.c=r,n.i=function(e){return e},n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:t})},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=84)}([function(e,n,r){"use strict";function t(e){return e instanceof o}var o=r(2);e.exports=t},function(e,n,r){"use strict";function t(e){var n=e.type,r=e.exprs,t=e.opts,o=(e.fragments,e.conformFn),i=e.generateFn;if(this.type=n,t&&(this.opts=t),o&&(this.conform=o),i&&(this.generate=i),!r)throw new Error("Expressions are required when constructing a clause.");this.exprs=r}e.exports=t},function(e,n,r){"use strict";function t(e,n,r,t){var i=this;if(this.isProblem=!0,4!==arguments.length)throw"Problem arg len err";this.val=e,this.name="Problem",this.failsPredicate=n,this.shortMessage=t,this.subproblems=r,this.message=o(this,0),this.toString=function(){return i.message}}function o(e,n){var r=e.subproblems,t=e.val,c=e.shortMessage;if(Array.isArray(r)){var l;return 0===r.length?c+"; val: "+f(t,null,2):(l=r.map(function(e){return""+u(n)+o(e,n+1)+a(n)}),c+", because\n"+i(" ",2*n)+" "+l.join(", "))}if("object"===("undefined"==typeof r?"undefined":s(r))){l=[];for(var p in r)r.hasOwnProperty(p)&&l.push("-> "+p+": "+u(n)+" "+o(r[p],n+1)+a(n));return c+", because\n"+i(" ",2*n)+" "+l.join(", ")}}function i(e,n){for(var r="",t=0;t<n;t+=1)r+=e;return r}function u(e){return c[e]}function a(e){return c[c.length-e-1]}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c="❰❮❬❨❪﹙₍₎﹚❫❩❭❯❱",f=r(35);e.exports=t},function(e,n,r){"use strict";function t(e){return i(e)?e.__predToString?e.__predToString():o?o(e):e.name:null}var o,i=r(11);if("test"!==function(){}.name){var u=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,a=Function.prototype.toString,s=String.prototype.match,c=String.prototype.replace,f=r(81).ws,l=new RegExp("^["+f+"]*(?:function|class)["+f+"]*\\*?["+f+"]+([\\w\\$]+)["+f+"]*","i");o=function(e){var n=s.call(c.call(a.call(e),u," "),l);return n&&"anonymous"!==n[1]?n[1]:""}}else"anonymous"===(new Function).name&&(o=function(e){return e.name&&"anonymous"!==e.name?e.name:""});e.exports=t},function(e,n,r){"use strict";function t(e){return e instanceof o}var o=r(1);e.exports=t},function(e,n,r){"use strict";function t(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function o(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},r=0;r<10;r++)n["_"+String.fromCharCode(r)]=r;var t=Object.getOwnPropertyNames(n).map(function(e){return n[e]});if("0123456789"!==t.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}var i=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;e.exports=o()?Object.assign:function(e,n){for(var r,o,a=t(e),s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var c in r)i.call(r,c)&&(a[c]=r[c]);if(Object.getOwnPropertySymbols){o=Object.getOwnPropertySymbols(r);for(var f=0;f<o.length;f++)u.call(r,o[f])&&(a[o[f]]=r[o[f]])}}return a}},function(e,n,r){"use strict";function t(e){return o(e)}var o=r(11);e.exports=t},function(e,n,r){"use strict";function t(e){return null!==e&&void 0!==e&&e.constructor===String}e.exports=t},function(e,n,r){"use strict";var t=r(10);e.exports=function(e){if(!e)throw console.error(e),"!";if(e.clause)return e.clause;if(e.pred)return t(e.pred);if(e.clauseRef)return e.clauseRef;if(e.delayedClause)return e.delayedClause;throw console.error("unsupported:",e),"Not implemented"}},function(e,n,r){"use strict";function t(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(){var e=Array.prototype.slice.call(arguments);return{expressions:{withLabels:e.map(function(e){var n=m(e,3),r=n[0],o=n[1],i=n[2];return{name:r,expr:t({},o,i)}})}}}function i(){var e=Array.prototype.slice.call(arguments);return{expressions:{withoutLabels:e.map(function(e){var n=m(e,2),r=n[0],o=n[1];return t({},r,o)})}}}function u(e){return j(e)&&!g(e)}function a(e){var n=new d({type:"AND",exprs:[],fragments:e,opts:{conformedExprs:e}});return n.conform=function(e){return P(n,e,{conform:!0})},n}function s(e){var n=e.expressions.withLabels;if(n)for(var r=[],t=0;t<n.length;t+=1){var o=n[t].name;if(r.indexOf(o)>=0)throw new Error("Duplicate label detected: "+o);r.push(o)}return!0}function c(e){return _(e,function(n){var r,t=n.expressions,o=t.withLabels,i=t.withoutLabels,u=n.options;if(o){r=o;var a=r.map(function(e){var n=e.expr,r=b(n);return y({},e,{expr:r,clause:void 0,pred:void 0,clauseRef:void 0,delayedClause:void 0})}),s=y({},u,{named:!0}),c=new d({type:e,exprs:a,opts:s});return c.conform=function(e){return P(c,e,{conform:!0})},c}if(i){r=i,a=r.map(function(e){var n;if(e.clause)return n=e.clause,y({},e,{expr:n,clause:void 0});if(e.pred)return n=A(e.pred),y({},e,{expr:n,pred:void 0});if(e.clauseRef)return n=e.clauseRef,y({},e,{expr:n,clauseRef:void 0});if(e.delayedClause)return n=e.delayedClause,y({},e,{expr:n,delayedClause:void 0});throw console.error(e),"!"});var f=y({},u,{named:!1});return c=new d({type:e,exprs:a,opts:f}),c.conform=function(e){return P(c,e,{conform:!0})},c}return c=new d({type:e,exprs:[]}),c.conform=function(e){return P(c,e,{conform:!0})},c})}function f(e){return _(e,function(n){var r,t=n.expr,o=n.opts;if(t.clause)r=t.clause;else if(t.pred)r=A(t.pred);else if(t.clauseRef)r=t.clauseRef;else{if(!t.delayedClause)throw console.error(t),"internal err";r=t.delayedClause}var i=A(r),u=new d({type:e,exprs:[i],opts:y({},o,{enclosedClause:i})});return u.conform=function(e){return P(u,e,{conform:!0})},u})}function l(e){return F(e)}function p(e){if(O(e))throw e;var n=e.keyExpression,r=e.valExpression,t=new d({type:X,exprs:[],opts:{keyExpression:n,valExpression:r}});return t.conform=function(e){return P(t,e,{conform:!0})},t}function v(e){if(O(e))throw e;var n=new d({type:Q,exprs:[],fragments:[],opts:{conformedArgs:e}});return n.conform=function(e){return P(n,e,{conform:!0})},n}var m=function(){function e(e,n){var r=[],t=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(t=(u=a.next()).done)&&(r.push(u.value),!n||r.length!==n);t=!0);}catch(e){o=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw i}}return r}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y=r(5),d=r(1),h=r(4),x=r(6),g=r(34),b=r(8),O=r(0),w=r(59),_=r(13),E=r(12),C=r(18),S=r(44),A=r(10),R=r(15),P=r(14),j=r(30),F=r(7),k=r(32),L=(r(31),A(h)),M=A(w),N=c(S.CAT),D=c(S.OR),T=f(S.Z_OR_M),z=f(S.O_OR_M),q=f(S.Z_OR_O),Z=f(S.COLL_OF),U=A(h),I=A(E),V=A(C),Y=A(x),$=D(o(["clause","clause",U],["pred","clause",Y],["delayedClause","clause",V],["clauseRef","clause",I])),G=N(o(["name","clause",M],["comment","clause",q({expr:{pred:F}})],["expr","clause",$])),B=N(o(["expressions","clause",D(o(["withLabels","clause",D(i(["clause",T({expr:{clause:G}})],["clause",Z({expr:{clause:G}})]))],["withoutLabels","clause",T({expr:{clause:$}})]))],["options","clause",q({expr:{pred:u}})])),J=a([{clause:B},{pred:s}]),W=R({args:z({expr:{clause:$}}),ret:h}),H={args:J,ret:L},K=function(e){return{args:N(o(["expr","clause",$],["opts","clause",q({expr:e})])),ret:L}},Q="SHAPE",X="MAP_OF",ee=v({shapeArgs:{optionalFields:{opt:{fieldDefs:{fields:{fields:{keyValExprPair:{keyExpression:{clause:A(F)},valExpression:{clause:D(o(["valExpressionOnly","clause",$],["keyValExprPair","clause",N(o(["keyExpression","clause",$],["valExpression","clause",$]))]))}}}}}}}}}),ne=T({expr:{pred:l}}),re=D(o(["keyList","clause",ne],["fieldDefs","clause",ee])),te=v({shapeArgs:{optionalFields:{opt:{fieldDefs:{fields:{requiredFields:{keyValExprPair:{keyExpression:{pred:k("req","required")},valExpression:{clause:re}}},optionalFields:{keyValExprPair:{keyExpression:{pred:k("opt","optional")},valExpression:{clause:re}}}}}}}}}),oe=R({args:N(o(["keyExpression","clause",$],["valExpression","clause",$])),ret:h}),ie=R({args:N(o(["shapeArgs","clause",te])),ret:h}),ue=ie.instrumentConformed(v),ae=oe.instrumentConformed(p),se=R(K({pred:j})),ce=se.instrumentConformed(Z),fe=R(H),le=R(H),pe=R(K({pred:j})),ve=R(K({pred:j})),me=R(K({pred:j})),ye=W.instrumentConformed(a),de={cat:fe.instrumentConformed(N),or:le.instrumentConformed(D),zeroOrMore:pe.instrumentConformed(T),zeroOrOne:me.instrumentConformed(q),oneOrMore:ve.instrumentConformed(z),ExprClause:$,ClauseClause:U,PredClause:Y,DelayedClauseClause:V,ClauseRefClause:I,CatFnClause:fe,AndFnClause:W,OrFnClause:le,ZeroOrMoreFnClause:pe,OneOrMoreFnClause:ve,ZeroOrOneFnClause:me,CollOfClause:se,collOf:ce,and:ye,shape:ue,keys:ue,mapOf:ae,ShapeFnClause:ie,MapOfFnClause:oe};de.alt=de.or,de["*"]=de.zeroOrMore,de["+"]=de.oneOrMore,de["?"]=de.zeroOrOne,e.exports=de},function(e,n,r){"use strict";function t(e){if(a(e)||s(e)||c(e))return e;if(u(e))return o(e);throw console.error(e),new Error("Expression must either be a Clause object or a predication function that returns true or false. ")}function o(e){return new f({type:v,exprs:[e],opts:{predicate:e},conformFn:i(e)})}function i(e){return function(n){return e(n)?n:new l(n,e,[],"Predicate "+p(e)+" returns false")}}var u=r(6),a=r(4),s=r(12),c=r(18),f=r(1),l=r(2),p=r(3),v="PRED";e.exports=t},function(e,n,r){"use strict";function t(e){var n={};return(e||!1)&&["[object Function]","[object GeneratorFunction]"].indexOf(n.toString.call(e))>=0}e.exports=t},function(e,n,r){"use strict";function t(e){return e instanceof o}var o=r(38);e.exports=t},function(e,n,r){"use strict";function t(e,n,r){if(e){var t="return function "+e+(r||"")+"(){ return action.apply(this, arguments); };";return new Function("action",t)(n)}return n}e.exports=t},function(e,n,r){"use strict";function t(e,n,r){var t=r.phase,u=o(e);if(t){if(u[t])return u[t](n,r);throw"!"}var a=u.trailblaze(n,i({phase:"trailblaze"},r));return x(a)?a:u.reconstruct(a,i({phase:"reconstruct"},r))}function o(e){var n=h(e),r=g[n.type];if(!r)throw"unsupported type "+n.type;var o=r(n,t);return o}var i=r(5),u=r(71),a=r(65),s=r(72),c=r(74),f=r(69),l=r(73),p=r(64),v=r(67),m=r(70),y=r(66),d=r(68),h=r(10),x=r(0),g={OR:u,CAT:u,COLL_OF:v,ANY:a,Z_OR_M:u,O_OR_M:u,Z_OR_O:u,PRED:s,WALL:c,SHAPE:l,AND:p,CLAUSE_REF:y,DELAYED:d,FCLAUSE:f,MAP_OF:m};e.exports=t},function(e,n,r){"use strict";function t(e){var n=(e.args,e.ret,e.fn,new o({type:"FCLAUSE",exprs:[],opts:e}));return n.instrumentConformed=function(e){return i(n,e,{conform:!0,instrument:!0})},n.instrument=function(e){return i(n,e,{conform:!1,instrument:!0})},n}var o=r(1),i=r(14);r(3),e.exports=t},function(e,n,r){"use strict";e.exports=function(e){return void 0===e}},function(e,n,r){"use strict";function t(e,n,r){if(e&&o(e)){var t=e.conform(n);return t}throw new Error("Expression needs to be of type Clause. expression: \n"+e+"\n offending value: "+n)}var o=r(4);e.exports=t},function(e,n,r){"use strict";var t=r(24),o=r(26);e.exports=o(t)},function(e,n,r){"use strict";var t=r(5),o=r(9),i=r(9),u=i.shape,a=i.keys,s=i.mapOf,c=r(49),f=r(50),l=r(41),p=l.wall,v=r(25),m=function(e){return o.cat.apply(null,Array.prototype.slice.call(e).map(v))},y={any:r(43),fclause:r(15),wall:p,clause:p,nullable:c,undefinable:f,sCat:m},d=t({},o,{shape:u,keys:a,mapOf:s},y);e.exports=d},function(e,n,r){"use strict";e.exports=function(e){for(var n=e;n.get;)n=n.get();return n}},function(e,n,r){"use strict";e.exports={conform:r(17),isValid:r(62),isNamespacePath:r(61),identity:r(33),isProblem:r(0),delayed:r(56),enforce:r(57),isExpr:r(34),isClause:r(4),isFclause:r(60),isClauseRef:r(12),describe:r(40),deref:r(20)}},function(e,n,r){"use strict";var t=r(29),o=r(52),i=r(27),u=r(39),a=r(11),s=r(30),c=r(25),f=r(32),l=r(7),p=r(51),v=r(31),m=r(26),y=r(53),d=Array.isArray,h={isNull:r(28),isUndefined:r(16),notEmpty:r(54),isBool:u,isBoolean:u,isFn:a,isFunction:a,isNum:t,isNumber:t,isNatInt:o,isNaturalNumber:o,isInt:i,isInteger:i,isObj:s,isObject:s,isStr:l,isString:l,isArray:d,isArr:d,equal:c,equals:c,equalsTo:c,eq:c,oneOf:f,not:v,isDate:p,instanceOf:m,isUuid:y,isUUID:y};h.default=h,e.exports=h},function(e,n,r){"use strict";function t(e){return!!/^[^.@%\&\*#]+/.test(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.NamespaceObjClause=n.MetaFnClause=n.isNamespacePath=n.NamespaceFnClause=n.GetNSFnClause=n.SetNSFnClause=n.isClauseRef=void 0;var o=r(19),i=r(21),u=r(22),a=(0,i.delayed)(function(){return o.ExprClause}),s=(0,o.cat)("nsPath",i.isNamespacePath),c=(0,o.fclause)({args:s,ret:o.ExprClause}),f=(0,o.cat)("nsPath",i.isNamespacePath,"expression",a),l=(0,o.fclause)({args:f,ret:u.isBool}),p=(0,o.fclause)({args:(0,o.or)("register",f,"retrieve",s)}),v=(0,o.fclause)({args:(0,o.cat)("source",(0,o.or)("namespacePath",i.isNamespacePath,"expression",i.isExpr),"metaObj",u.isObj),ret:i.isExpr}),m=(0,o.shape)({optional:{subNamespaces:[t,(0,i.delayed)(function(){return m})],".meta":u.isObj,".expr":i.isExpr}});n.isClauseRef=i.isClauseRef,n.SetNSFnClause=l,n.GetNSFnClause=c,n.NamespaceFnClause=p,n.isNamespacePath=i.isNamespacePath,n.MetaFnClause=v,n.NamespaceObjClause=m},function(e,n,r){"use strict";function t(e){var n=e.getFn;this.type="DELAYED",this.get=n;var r=this;r.instrument=function(e){var r=n();return r.instrument(e)},r.instrumentConformed=function(e){var r=n();return r.instrumentConformed(e)},r.conform=function(e){var r=n();return r.conform(e)}}var o=r(1);t.prototype=Object.create(o.prototype),e.exports=t},function(e,n,r){"use strict";e.exports=function(e){return function(n){return n===e}}},function(e,n,r){"use strict";var t=r(3),o=r(13);e.exports=function(e){var n=t(e),r=function(n){return n instanceof e};return n&&(r=o("instanceOf_"+n,r)),r.__predToString=function(){return"instanceOf("+(n||"(anonymous_type)")+")"},r}},function(e,n,r){"use strict";function t(e){return"number"==typeof e&&Math.floor(e)===e&&e!==1/0}e.exports=t},function(e,n,r){"use strict";function t(e){return null===e}e.exports=t},function(e,n,r){"use strict";function t(e){return"number"==typeof e}e.exports=t},function(e,n,r){"use strict";function t(e){return"object"===("undefined"==typeof e?"undefined":o(e))&&null!==e}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=t},function(e,n,r){"use strict";function t(e){var n=o(e),r=function(n){return!e(n)};return n?i("not_"+n,r):r}var o=r(3),i=r(13);e.exports=t},function(e,n,r){"use strict";e.exports=function(){var e;if(1===arguments.length&&Array.isArray(arguments[0]))e=arguments[0];else{if(!(arguments.length>0))throw new Error("Items list is required.");e=Array.prototype.slice.call(arguments)}var n=function(n){return e.indexOf(n)>=0};return n.__predToString=function(){return"oneOf(".concat([e.map(JSON.stringify).join(", ")]).concat(")")},n}},function(e,n,r){"use strict";function t(e){return e}e.exports=t},function(e,n,r){"use strict";function t(e){return o(e)||i(e)||u(e)||a(e)}var o=r(6),i=r(4),u=r(12),a=r(18);e.exports=t},function(e,n,r){"use strict";function t(e,n){var r=Array.prototype.slice.call(arguments);return r[1]=function(e,r){var t;if(o(r)){var u=i(r);t=u?u+"()":r.toString()}else t=r;return n?n(t):t},JSON.stringify.apply(this,r)}var o=r(11),i=r(3);e.exports=t},function(e,n){!function(){"use strict";e.exports="function"==typeof Symbol&&"symbol"==typeof Symbol()}()},function(e,n,r){"use strict";function t(e){return void 0===e}e.exports=t},function(e,n,r){"use strict";function t(e){var n=e.ref,r=e.getFn,t=e.conformFn;this.type="CLAUSE_REF",this.get=r,this.conform=t,this.ref=n}var o=r(1);t.prototype=Object.create(o.prototype),e.exports=t},function(e,n,r){"use strict";function t(e){return"boolean"==typeof e}e.exports=t},function(e,n,r){"use strict";function t(e,n,r){var t=[];return o(t,e,n,r,1).join("")}function o(e,n,r,t,m){var h=void 0;if(r&&(h=r(n)))return h;if(c(e,n))return["<recursive: "+u(n)+">"];if(p(n))return[y(n)];if("PRED"===n.type)return o(e,n.opts.predicate,r,t,m+1);if(v(n)){if("DELAYED"===n.type||"CLAUSE_REF"===n.type){var x=n.get();return o(e,x,r,t,m+1)}var g=s(e,n),b=a(g,n,r,t,m),O=i(b);return[u(n),"("].concat(O&&t?["\n",d(m*t," ").join("")]:[]).concat(b.length>0?[" "]:[]).concat(b.map(function(e){var n=f(e,2),r=n[0],o=n[1];return o===l.SEPARATOR?O&&t?["\n"].concat(d(r*t," ")).join(""):"":o})).concat(b.length>0?[" "]:[]).concat(O&&t?["\n",d((m-1)*t," ").join("")]:[]).concat([")"])}throw console.error(n),new Error("Argument must be an expression")}function i(e){return e.filter(function(e){var n=f(e,2),r=n[1];return r===l.SEPARATOR}).length>0}function u(e){return e.type?h[e.type]?h[e.type]:e.type.toLowerCase():e.toString()}function a(e,n,r,t,i){var u=l(n);return u.reduce(function(n,i){var u=n.acc,a=n.lvl;return m(i)?{acc:u.concat([[a,i]]),lvl:a}:i.isLevelIn?{acc:u,lvl:a+i.level}:i.isLevelOut?{acc:u,lvl:a-i.level}:{acc:u.concat(o(e,i,r,t,a+1).map(function(e){return[a+1,e]})),lvl:a}},{acc:[],lvl:i}).acc}function s(e,n){if(!c(e,n))return e.concat([n])}function c(e,n){return e.indexOf(n)>=0}var f=function(){function e(e,n){var r=[],t=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(t=(u=a.next()).done)&&(r.push(u.value),!n||r.length!==n);t=!0);}catch(e){o=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw i}}return r}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=r(58),p=r(6),v=r(4),m=r(7),y=r(3),d=r(63),h={Z_OR_M:"zeroOrMore",O_OR_M:"oneOrMore",Z_OR_O:"zeroOrOne",COLL_OF:"collOf"};e.exports=t},function(e,n,r){"use strict";function t(e){var n=i(e),r=new o({type:"WALL",exprs:[n],opts:{enclosedClause:n}});return r.conform=function(e){return f(r,e,{conform:!0})},r}var o=r(1),i=r(10),u=r(9),a=u.cat,s=u.ExprClause,c=r(15),f=r(14),l=c({args:a(s),ret:s}),p=l.instrument(t);e.exports={WallFnClause:l,wall:p}},function(e,n){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,n,r){"use strict";function t(){return new o({type:u,exprs:[],conformFn:i})}var o=r(1),i=r(33),u="ANY";e.exports=t},function(e,n,r){"use strict";e.exports={CAT:"CAT",OR:"OR",Z_OR_M:"Z_OR_M",Z_OR_O:"Z_OR_O",O_OR_M:"O_OR_M",PRED:"PRED",COLL_OF:"COLL_OF"}},function(e,n,r){"use strict";function t(e){e=a(e);var n;if(null===e.type)throw"Clause has no type: "+e;n=e.type in c?c[e.type]:c.PRED;var r=n(e);return r}function o(e){return new u({type:"ROOT",exprs:[e]})}var i=r(46),u=r(1),a=r(20),s=function(e){for(var n=0,r=[e.head],t=[];r.length>0;){var o=r.pop();null===o.index&&(o.index=n,n++,o.transitions.forEach(function(e){r.push(e.target)}),t.push(o))}return t},c={},f=function(e){return function(n){var r=t(n.exprs[0]);return e(r)}},l=function(e){return function(n){var r=n.exprs.map(function(e){var n=t(e.expr);return n.name=e.name,n});return e(r)}};["ROOT","Z_OR_M","O_OR_M","Z_OR_O"].forEach(function(e){c[e]=f(i[e])}),["OR","CAT"].forEach(function(e){c[e]=l(i[e])}),c.PRED=function(e){return i.PRED(e)};var p=function(e){var n,r=o(e),i=t(r),u=s(i),a=u.length,c={};return u.forEach(function(e){0===e.transitions.length&&(n=e.index);var r={};e.transitions.forEach(function(e){r[e.target.index]=e.clause}),c[e.index.toString()]=r}),{initialState:0,numStates:a,finalState:n,transitions:c,expression:e}};e.exports=p},function(e,n,r){"use strict";function t(e,n){return{transitions:null===e?[]:e,index:n||null}}function o(e,n){return{clause:e,target:n}}function i(e,n){return{head:e,tails:n}}function u(e,n,r){var t=i(n,r);return t.name=e,t}function a(e,n){e.forEach(function(e){e.target=n})}function s(){return{isEpsilon:!0}}function c(e,n,r,t){var o=s();return o.name=n,o.op=r,o.group=t,o.dir=e,o}function f(e,n){var r=o(e,n.head),u=t([r]),a=i(u,n.tails);return a}function l(e,n){var r=o(e,null),u=t([r],null);a(n.tails,u);var s=i(n.head,[r]);return s}var p={};p.PRED=function(e){var n=o(e,null),r=t([n],null),u=[n],a=i(r,u);return a},p.OR=function(e){e=e.map(function(e){var n=c("out",e.name,"OR"),r=o(n,null),i=t([r]);a(e.tails,i);var s=o(c("in",e.name,"OR"),e.head),f=t([s]),l=u(e.name,f,[r]);return l});var n=function(e,n){var r=e.head.transitions.concat(n.head.transitions),o=t(r),i=e.tails.concat(n.tails),a=u(e.name,o,i);return a},r=e.reduce(n);return r=f(c("enter",null,"OR","para_in"),r),r=l(c("exit",null,"OR","para_out"),r)},p.CAT=function(e){var n=function(e,n){a(e.tails,n.head);var r=e.head,t=n.tails,o=i(r,t);return o};e=e.map(function(e){var n=o(c("maybe_out",e.name,"CAT"),null),r=t([n]);a(e.tails,r);var i=e.head.transitions.map(function(n){var r=t([n]),i=o(c("maybe_in",e.name,"CAT"),r);return i}),s=t(i),f=u(e.name,s,[n]);return f});var r;if(e.length>0)r=e.reduce(n);else{var p=s(),v=o(p,null),m=t([v]);r=i(m,[v])}return r=f(c("maybe_enter",null,"CAT","in"),r),r=l(c("maybe_exit",null,"CAT","out"),r)},p.Z_OR_M=function(e){var n="Z_OR_M",r=o(c("loop",null,n),e.head),u=o(s(),null),p=t([r,u]);a(e.tails,p);var v=i(p,[u]),m=v.head.transitions.map(function(e){var n=t([e]),r=o(s(),n);return r}),y=t(m);return v=i(y,v.tails),v=f(c("maybe_enter",null,n,"in"),v),v=l(c("maybe_exit",null,n,"out"),v)},p.O_OR_M=function(e){var n="O_OR_M",r=o(c("loop",null,n),e.head),u=o(s(),null),p=t([r,u]);a(e.tails,p);var v=i(e.head,[u]);return v=f(c("maybe_enter",null,n,"in"),v),v=l(c("maybe_exit",null,n,"out"),v)},p.Z_OR_O=function(e){var n="Z_OR_O",r=o(c("loop",null,n),e.head),u=o(s(),null),a=t([r,u]),p=e.tails.concat([u]),v=i(a,p);return v=f(c("maybe_single_enter",null,n,"in"),v),v=l(c("maybe_single_exit",null,n,"out"),v)},p.ROOT=function(e){var n=t(null,null);return a(e.tails,n),i(e.head,[])},e.exports=p},function(e,n,r){"use strict";function t(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(e){this.value=e}function i(e){this.fragment=e}function u(e){this.fragment=e}function a(e,n){this.fragment=n,this.name=e}function s(e){this.fragment=e}function c(e,n){this.fragment=n,this.name=e}function f(){}function l(){}function p(){}function v(e){this.name=e}function m(e,n,r){var a,m=r.conform,g=e.inputType,b=[];if(e.forEach(function(e){if(e.move)switch(e.move.dir){case"maybe_enter":b.push(new p);break;case"maybe_exit":for(var i=void 0,u=new l;!((i=b.pop())instanceof p);)u=h(g,m,u,i);b.push(u);break;case"maybe_single_enter":b.push(new p);break;case"maybe_single_exit":var a=b.pop(),x=void 0;a instanceof p?x=new f:(x=a,b.pop()),b.push(x);break;case"enter":break;case"exit":var O=b.pop(),w=void 0;if(m&&O instanceof c){var _=void 0;_=O.fragment instanceof l?{}:t({},O.name,O.fragment),w=new s(_)}else w=O;b.push(w);break;case"maybe_in":m&&e.move.name&&b.push(new v(e.move.name));break;case"loop":break;case"maybe_out":if(m&&e.move.name){var E=b.pop(),C=b.pop();b.push(y(C,E))}break;case"in":m&&e.move.name&&b.push(new v(e.move.name));break;case"out":if(m&&e.move.name){var S=b.pop(),A=b.pop();b.push(d(A,S))}break;case"clause":var R=n(e.clause,e.guide,r);b.push(new o(R));break;default:throw console.error(e),"FUUU"}}),1!==b.length)throw console.error("valStack",b),"!";a=b.pop();var O=void 0;return O=a instanceof i?a.fragment:a instanceof u?a.fragment:a instanceof s?a.fragment:a instanceof o?a.value:a instanceof l?x(g,[]):a}function y(e,n){if(n instanceof f)return new a(e.name,void 0);if(n instanceof u)return new a(e.name,n.fragment);if(n instanceof i||n instanceof s)return new a(e.name,n.fragment);if(n instanceof o)return new a(e.name,n.value);if(n instanceof l)return new a(e.name,new l);throw console.error(n),"c!!!"}function d(e,n){if(n instanceof f)return new c(e.name,void 0);if(n instanceof s)return new c(e.name,n.fragment);if(n instanceof i)return new c(e.name,n.fragment);if(n instanceof u)return new c(e.name,n.fragment);if(n instanceof o)return new c(e.name,n.value);if(n instanceof l)return new c(e.name,new l);throw console.error(n),"c!!!alt"}function h(e,n,r,c){if(n&&c instanceof a){var p=void 0;if(r instanceof f)p={};else if(r)if(r instanceof l)p={};else if(r instanceof u)p=r.fragment;else if(r instanceof i)p=r.fragment;else{if(!(r instanceof s))throw console.error(r,c),"!!acc_fl_np";p=r.fragment}else p={};var v=void 0;v=c.fragment instanceof l?{}:t({},c.name,c.fragment);var m=new u(g({},v,p));return m}var y=void 0,d=void 0;if(r instanceof f)d=[];else if(r)if(r instanceof i)d=r.fragment;else if(r instanceof u)d=[r.fragment];else{if(!(r instanceof l))throw console.error(r),"!!acc_fl";d=[]}else d=[];if(c instanceof o)y=[c.value];else if(c instanceof i)y=c.fragment;else if(c instanceof u)y=[c.fragment];else if(c instanceof s)y=[c.fragment];else if(c instanceof f)y=[];else{if(!(c instanceof l))throw console.error(c),"cc!!";y=[]}var h=new i(x(e,y.concat(d)));return h}function x(e,n){return"string"===e&&Array.isArray(n)?n.join(""):n}var g=r(5);e.exports=m},function(e,n,r){"use strict";function t(e,n,r,t){for(var a={matched:!1,chain:null},s="undefined"==typeof n?"undefined":u(n),c={state:0,offset:0,input:[n],groupCount:0,arrayed:!1},f=[c];f.length>0;){var l=f.shift(),p=l.offset,v=l.input;if(l.state===e.finalState&&p===v.length)return a.matched=!0,a.chain=i(e,l,s),a;for(var m in e.transitions[l.state]){var y=parseInt(m),d=o(e,y,l,r,t);if(d)if(d.isProblem){var h=d.name,x=d.problem,g=d.position;a.lastProblem={name:h,problem:x,position:g}}else f.push(d)}}return a}function o(e,n,r,t,o){var i=r.input,u=r.offset,c=r.groupCount,f=r.arrayed,l=i[u],p=e.transitions[r.state][n];"in"===p.group?(0===c&&(Array.isArray(i[0])||s(i[0]))&&(i=i[0],u=0,f=!0),c+=1):"out"===p.group&&(c-=1,0===c&&(f&&(u=u===i.length?1:0,i=[i]),f=!1));var v,m;v=p.isEpsilon?u:u+1;var y,d,h=p.name||r.move&&r.move.name;if(v<=i.length){if(p.isEpsilon)return m=p.dir?{dir:p.dir,name:p.name,op:p.op,group:p.group}:null,d={input:i,groupCount:c,arrayed:f,state:n,offset:v,move:m,clause:p,prev:r,isEpsilon:!0};if(y=t(p,l,o),a(y))return{isProblem:!0,problem:y,name:h,position:u};if(u<i.length)return m={dir:"clause"},d={input:i,groupCount:c,arrayed:f,state:n,offset:v,move:m,prev:r,isEpsilon:!1,clause:p,guide:y}}}function i(e,n,r){for(var t,o=[],i=n;i;){if(!t||i.state!==t.state&&i.move){var u={isEpsilon:i.isEpsilon,move:i.move,state:i.state};i.isEpsilon||(u.guide=i.guide,u.clause=i.clause),o.unshift(u)}t=i,i=i.prev}return o.inputType=r,o}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=r(0),s=r(7);e.exports=t},function(e,n,r){"use strict";function t(e){return i(u,e)}var o=r(9),i=o.or,u=r(28);e.exports=t},function(e,n,r){"use strict";function t(e){return i(u,e)}var o=r(9),i=o.or,u=r(16);e.exports=t},function(e,n,r){"use strict";e.exports=function(e){return e&&e instanceof Date&&!isNaN(e.valueOf())}},function(e,n,r){"use strict";function t(e){return o(e)&&e>=0}var o=r(27);e.exports=t},function(e,n,r){"use strict";e.exports=function(e){return!!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}},function(e,n,r){"use strict";e.exports=function(e){return!!e&&0!==e.length}},function(e,n,r){"use strict";function t(e){throw e}e.exports=t},function(e,n,r){"use strict";function t(e){return new o({getFn:e})}var o=r(24);e.exports=t},function(e,n,r){"use strict";var t=r(0),o=r(17);e.exports=function(e,n){var r=o(e,n);if(t(r))throw r}},function(e,n,r){"use strict";function t(e){this.level=e,this.isLevelIn=!0}function o(e){this.level=e,this.isLevelOut=!0}function i(e){var n=e.fieldDefs.fields,r=["{ ",l,new t(1)];for(var i in n)if(n.hasOwnProperty(i)){r.push('"'+i+'"'),r.push(": ");var u=n[i],a=u.keyValExprPair,s=u.valExpressionOnly;if(a){var c=a.keyExpression,p=a.valExpression;r=r.concat(["["]).concat([l,"<keyExpression>: ",f(c),", ",l,"<valExpression>: ",f(p)]).concat(["]"])}else s&&r.push(f(s));r.push(", "),r.push(l)}return r.concat([new o(1),l," }"])}function u(e){return e.length>0?e.slice(0,e.length-2):e}function a(e){var n=m[e.type];if(!n)throw console.error(e),new Error("Unsupported clause type "+e.type);return n(e)}function s(e,n){return 0===e.length?e:e.reduce(function(r,t,o){return o<e.length-1?r.concat([t]).concat(n):r.concat([t])},[])}var c=r(3),f=r(8),l="___CLAUSEJS_SEPARATOR___",p=function(e){var n=e.opts.named,r=e.exprs;return 0===r.length?[]:n?r.reduce(function(e,n,t){var o=n.name,i=n.expr;return e.concat(['"'+o+'"',", ",i]).concat(t<r.length-1?[", ",l]:[])},[]):r.reduce(function(e,n,t){var o=n.expr;return e.concat([o]).concat(t<r.length-1?[", ",l]:[])},[])},v=function(e){var n=e.opts.enclosedClause;return[n]},m={PRED:function(e){var n=e.opts.predicate;return[n]},WALL:function(e){var n=e.opts.enclosedClause;return[n]},AND:function(e){var n=e.opts.conformedExprs;return s(n.map(f),[", ",l])},CAT:p,OR:p,Z_OR_M:v,O_OR_M:v,Z_OR_O:v,COLL_OF:v,ANY:function(){return[]},MAP_OF:function(){return[]},SHAPE:function(e){var n=e.opts.conformedArgs.shapeArgs,r=n.optionalFields;r=void 0===r?{}:r;var a=r.opt,s=r.optional,c=n.requiredFields;c=void 0===c?{}:c;var f=c.req,p=c.required;return["{ ",l,new t(1)].concat(u([].concat(f||p?["required: "].concat(i(f||p)).concat([", ",l]):[]).concat(a||s?["optional: "].concat(i(a||s)).concat([", ",l]):[]))).concat([new o(1)," }"])},FCLAUSE:function(e){var n=e.opts,r=n.args,i=n.ret,a=n.fn;return["{ ",l,new t(1)].concat(u([].concat(r?["args: ",r,", ",l]:[]).concat(i?["ret: ",i,", ",l]:[]).concat(a?["fn: ",c(a),"()",", ",l]:[]))).concat([new o(1),l," }"])}};a.SEPARATOR=l,a.LevelIn=t,a.LevelOut=o,e.exports=a},function(e,n,r){"use strict";var t=r(7);e.exports=function(e){return t(e)}},function(e,n,r){"use strict";function t(e){return o(e)&&"FCLAUSE"===e.type}var o=r(4);e.exports=t},function(e,n,r){"use strict";function t(e){return o(e)&&/^\/?[a-zA-Z0-9\-_\.]*\/([a-zA-Z0-9\-_]+)$/.test(e)}var o=r(7);e.exports=t},function(e,n,r){"use strict";function t(e,n){if(e)return u(e)?!o(a(e,n)):!i(e)||e(n);throw new Error("Clause is required")}var o=r(0),i=r(6),u=r(4),a=r(17);e.exports=t},function(e,n,r){"use strict";function t(e,n){var r,t=[];for(r=0;r<e;r++)t.push(n);return t}e.exports=t},function(e,n,r){"use strict";function t(e,n){function r(e,r){for(var t=e,u=[],c=[],f=0;f<s.length;f+=1){var l=0===f?e:u[f-1];if(t=n(s[f],l,r),i(t)){c.push(t);break}var p=n(s[f],t,a({},r,{phase:"reconstruct"}));u.push(p)}return 0===c.length?{conforms:u}:new o(e,s,c,"One or more expressions failed AND test")}function t(e){var n=e.conforms;return n[s.length-1]}var s=e.opts.conformedExprs.map(u);return{trailblaze:r,reconstruct:t}}var o=r(2),i=r(0),u=r(8),a=r(5);e.exports=t},function(e,n,r){"use strict";function t(){return{trailblaze:o,reconstruct:o}}function o(e){return e}e.exports=t},function(e,n,r){"use strict";function t(e,n){function r(r,t){var o=e.get();if(o)return n(o,r,t)}return{trailblaze:r,reconstruct:r}}e.exports=t},function(e,n,r){"use strict";function t(e,n){function r(r,t){var c=[],f=[];if(Array.isArray(r)){if(s){var l=s.maxCount,p=s.minCount;if(u(l)&&r.length>l)return new o(r,e,f,"collOf: collection size "+r.length+" exceeds maxCount "+l+".");if(u(p)&&r.length<p)return new o(r,e,f,"collOf: collection size "+r.length+" is less than minCount "+p+".")}for(var v=0;v<r.length;v+=1){
var m=n(a,r[v],t);if(i(m)){f.push(m);break}c.push(m)}return f.length>0?new o(r,e,f,"One or more elements failed collOf test"):c}return new o(r,e,[],"collOf expects an array")}function t(e,r){for(var t=[],o=0;o<e.length;o+=1){var i=n(a,e[o],r);t.push(i)}return t}var a=e.exprs[0],s=e.opts;return{trailblaze:r,reconstruct:t}}var o=r(2),i=r(0),u=r(29);e.exports=t},function(e,n,r){"use strict";function t(e,n){function r(r,t){var o=e.get();if(o)return n(o,r,t)}return{trailblaze:r,reconstruct:r}}e.exports=t},function(e,n,r){"use strict";function t(e,n){function r(e){return e}function t(e,n){if(!e)throw new Error("A function must be clauseified for instrumentation.");var r=n.conform,t=n.instrument;return r&&t?f(e,n):t?c(e,n):void 0}function c(e,n){var r=u(e),t=l(r,e,n),o=a(r,t,"__instrumented");return o}function f(e,n){var r=u(e),t=y(r,e,n),o=a(r,t,"__conformed");return o}function l(e,r){return function(){var t=Array.prototype.slice.call(arguments),o=v(r,e,t),i=r.apply(this,o),u=m(r,e,i),a=h?n(h,t,{conform:!0,instrument:!0}):t,s=void 0;return s=x?n(x,i,{conform:!0,instrument:!0}):i,p(e,r,g,a,s),u}}function p(n,r,t,o,u){if(t){var a=t.call(null,o,u);if(!a){var c=new i({args:o,ret:u},e,[],"Function "+n+" failed valiation on argument-return value relation");s(c)}}}function v(r,t,u){var a=t||"<anonymous>";if(!h)return u;var c=n(h,u,{phase:"trailblaze"});if(!o(c))return n(h,c,{phase:"reconstruct",conform:!1,instrument:!0});var f=new i(u,e,[c],"Arguments for function "+a+"() is not valid");s(f)}function m(r,t,u){var a=t||"<anonymous>";if(!x)return u;var c=n(x,u,{phase:"trailblaze"});if(!o(c)){var f=n(x,c,{phase:"reconstruct",instrument:!0,conform:!1});return f}var l=new i(u,e,[c],"Return value for function "+a+"() is not valid");s(l)}function y(e,r){var t=e||"<anonymous>";return function(){var u=Array.prototype.slice.call(arguments),a=n(h,u,{conform:!0,instrument:!0});if(o(a)){var c=new i(u,h,[a],"Arguments for function "+t+" is not valid");s(c)}var f=r.call(this,a);if(m(r,e,f),g){var l;l=x?n(x,f,{conform:!0,instrument:!0}):f,p(e,r,g,a,l)}return f}}var d=e.opts,h=d.args,x=d.ret,g=d.fn;return{trailblaze:r,reconstruct:t}}var o=r(0),i=r(2),u=r(3),a=r(13),s=r(55);r(35),e.exports=t},function(e,n,r){"use strict";function t(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(e,n){function r(r,o){for(var i in r)if(r.hasOwnProperty(i)){if(l){var s=n(l,i,o);if(u(s))return new a(r,e,t({},i,s),"mapOf: key "+i+" failed validation")}if(p){var c=n(p,r[i],o);if(u(c))return new a(r,e,t({},i,c),"mapOf: value for key "+i+" failed validation")}}return{val:r}}function o(e){var n=e.val;return n}var s=e.opts,c=s.keyExpression,f=s.valExpression,l=c&&i(c),p=f&&i(f);return{trailblaze:r,reconstruct:o}}var i=r(8),u=r(0),a=r(2);e.exports=o},function(e,n,r){"use strict";function t(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(e,n){function r(r,o){c||(c=a(e));var u=i(c,r,n,o),f=u.chain,l=u.matched,p=u.lastProblem;if(l===!0)return f;var v=void 0;if(p){var m=p.name,y=p.position,d=p.problem;v=t({},m?'"'+m+'"':"<At position "+y+">",d)}else v=[];return new s(r,e,v,"Clause "+e.type+" did not match value")}function o(e,r){var t=u(e,n,r);return t}var c;return{trailblaze:r,reconstruct:o}}var i=r(48),u=r(47),a=r(45),s=r(2);e.exports=o},function(e,n,r){"use strict";function t(e){function n(n){var r=e.exprs[0];return r(n)?n:new i(n,e,[],"Predicate "+o(r)+"() returns false")}function r(e){return e}return{trailblaze:n,reconstruct:r}}var o=r(3),i=r(2);e.exports=t},function(e,n,r){"use strict";function t(e,n){function r(r,t){function o(e){e:for(var o in e.fields)if(e.fields.hasOwnProperty(o)){var i=e.fields[o],u=a(r,o,i,n,t),s=u.noop,c=u.problem,f=u.singleMatch,l=u.groupMatch;if(c){d.push([o,c]);break e}if(f)h.singles.push(f);else if(l)l.matchedKeys.length>0&&h.groups.push(l);else if(!s)throw"!"}}if(["object","function"].indexOf("undefined"==typeof r?"undefined":f(r))<0)return new m(r,e,[],"Value is not an object");s||(s=i(p,y,n,t));var u=s(r);if(l(u))return u;var v,d=[],h={val:r,groups:[],singles:[]};p&&(v=p.fieldDefs),v&&o(v);var x;if(y&&(x=y.fieldDefs),x&&o(x,!0),d.length>0){for(var g={},b=[],O=0;O<d.length;O++){var w=c(d[O],2),_=w[0],E=w[1];b.push(_),g[_]=E}var C=new m(r,e,g,"At least one property failed validation: "+b.join(", "));return C}return h}function t(e,r){var t,i=e.val,a=e.singles,s=e.groups,c={walkOpts:r},f=r.mutate;return t=f?i:v({},i),a.forEach(function(e){o(t,e,n,r)}),s.forEach(function(e){var i=e.name,a=e.matchedKeys;if(c){t[i]={};var s=[];a.forEach(function(e){o(t[i],e,n,r),s.push(e.key)}),u(t,s)}else a.forEach(function(e){o(t,e,n,r)})}),t}var s,p,y,d=e.opts.conformedArgs.shapeArgs,h=d.requiredFields,x=d.optionalFields;return h&&(p=h.req||h.required),x&&(y=x.opt||x.optional),{trailblaze:r,reconstruct:t}}function o(e,n,r,t){var o=n.key,i=n.clause,u=n.guide;e[o]=r(i,u,t)}function i(e,n,r,t){return function(n){if(e){var o,i=[],u=e.fieldDefs,a=e.keyList;if(u){o=[];for(var c in u.fields)u.fields.hasOwnProperty(c)&&o.push(c)}else{if(!a)throw"unsupported";o=[].concat(a)}for(var f=0;f<o.length;f++){var p=o[f];if(u&&u.fields[p].keyValExprPair){var v=!1;e:for(var y in n)if(n.hasOwnProperty(y)){var d=s(y,u.fields[p].keyValExprPair.keyExpression,r,t);if(!l(d)){v=!0;break e}}v||i.push(p)}else if(u&&u.fields[p].valExpressionOnly)if(n.hasOwnProperty(p)){var h=s(n[p],u.fields[p].valExpressionOnly,r,t);l(h)&&i.push(p)}else i.push(p);else{if(!a)throw"!";void 0===n[p]&&i.push(p)}}if(i.length>0)return new m(n,e,[],"req: keys required: "+i.join(", "))}return n}}function u(e,n){for(var r=0;r<n.length;r++)delete e[[n[r]]]}function a(e,n,r,t,o){var i=r.valExpressionOnly,u=r.keyValExprPair;if(u){var a=[],c=u.keyExpression,f=u.valExpression;e:for(var v in e)if(e.hasOwnProperty(v)){var m=s(v,c,t,o);if(!l(m)){if(e===e[v])continue e;var d=s(e[v],f,t,o);if(l(d))return{problem:d};a.push({key:v,clause:y(f),guide:d})}}return{groupMatch:{name:n,matchedKeys:a}}}if(i){var h=e[n];if(p(h)||e[n]===e)return{noop:!0};var x=s(h,i,t,o);return l(x)?{problem:x}:{singleMatch:{key:n,clause:y(i),guide:x}}}throw"!!"}function s(e,n,r,t){var o=y(n),i=r(o,e,t);return i}var c=function(){function e(e,n){var r=[],t=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(t=(u=a.next()).done)&&(r.push(u.value),!n||r.length!==n);t=!0);}catch(e){o=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw i}}return r}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=r(0),p=r(16),v=r(5),m=r(2),y=r(8);e.exports=t},function(e,n,r){"use strict";function t(e,n){function r(r,t){var i=o(e.exprs,1),u=i[0];return n(u,r,t)}return{trailblaze:r,reconstruct:r}}var o=function(){function e(e,n){var r=[],t=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(t=(u=a.next()).done)&&(r.push(u.value),!n||r.length!==n);t=!0);}catch(e){o=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw i}}return r}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.exports=t},function(e,n,r){!function(){"use strict";function n(e,n,r,t){n in e&&!t||(p?l(e,n,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[n]=r)}function t(e,r,t){var l=u(t)?{}:t,p=c(r);o&&f&&(p=a.call(p,f(r))),s.call(p,function(t){var o=l[t];n(e,t,r[t],i(o)&&o())})}var o=r(36),i=r(77),u=r(37),a=Array.prototype.concat,s=Array.prototype.forEach,c=Object.keys,f=i(Object.getOwnPropertySymbols)&&Object.getOwnPropertySymbols,l=i(Object.defineProperty)&&Object.defineProperty,p=Boolean(l)&&function(e){var n={};try{l(n,"x",{enumerable:!1,value:n});for(e in n)return!1;return n.x===n}catch(e){return!1}}();t(e.exports,{property:n,properties:t,supportsDescriptors:p})}()},function(e,n,r){!function(){"use strict";e.exports=r(36)&&"symbol"==typeof Symbol.toStringTag}()},function(e,n,r){!function(){"use strict";function n(e){try{return t.call(e),!0}catch(e){}return!1}var t=Function.prototype.toString,o=r(80),i=r(76),u=r(78),a="[object Function]",s="[object GeneratorFunction]";e.exports=function(e){if(u(e))return!1;if(i)return n(e);var r=o(e);return r===a||r===s}}()},function(e,n,r){"use strict";e.exports=function(e){return null==e||"function"!=typeof e&&"object"!=typeof e}},function(e,n){function r(e){return null===e}e.exports=r},function(e,n,r){!function(){"use strict";var n=Object.prototype.toString,t=r(79),o=r(37),i="[object Null]",u="[object Undefined]";e.exports=function(e){return t(e)?i:o(e)?u:n.call(e)}}()},function(e,n,r){!function(){"use strict";var n=r(75);n.property(e.exports,"whiteSpaces",[9,10,11,12,13,32,160,5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288,65279]),n.property(e.exports,"ws",e.exports.whiteSpaces.reduce(function(e,n){return e+String.fromCharCode(n)},""))}()},function(e,n,r){"use strict";e.exports="0.0.23"},function(e,n,r){"use strict";(function(e){function t(e){function n(n){var r=f;r=n?n+e:e;var t=_.get(f,o(r));return t?l(t[".expr"],t[".meta"]):void 0}var r=new p({ref:e,getFn:n,conformFn:null});return r.conform=function(e){var r=n();return O(r,e,{conform:!0})},r}function o(e){return e.replace(/^(.+)(\/)(.+)$/,"$1.$3").replace(/^\//,"")}function i(e){var n,r=e.nsPath,t=k(r);return n=t}function u(e){var n=e.nsPath,r=e.expression;a(n,r)}function a(e,n){if(n){if(n.clause||n.pred){var r=n.clause||n.pred;return M(e,{".expr":r}),r}throw console.error(n),"!"}throw console.error(n),"!"}function s(){return f||c(),f}function c(){f=e[N]={}}Object.defineProperty(n,"__esModule",{value:!0});var f,l=r(5),p=r(38),v=r(19),m=v.cat,y=v.or,d=v.fclause,h=v.shape,x=r(4),g=r(6),b=r(39),O=r(14),w=r(10),_=r(85),E=r(21),C=E.isNamespacePath,S=E.isClauseRef,A=r(23),R=A.GetNSFnClause,P=A.SetNSFnClause,j=A.NamespaceFnClause,F=A.MetaFnClause,k=d({args:m(C),ret:S}).instrument(t),L=h({req:{".expr":y(x,g)}}),M=d({args:m(C,L),ret:b}).instrument(function(e,n){s();var r=_.get(f,o(e));return _.set(f,o(e),l({},r,n)),!0}),N="___CLAUSEJS_REGISTRY",D=F.instrumentConformed(function(e){var n=e.source,r=n.namespacePath,t=n.expression,i=e.metaObj;if(r){var u=_.get(f,o(r)),a=u&&u[".meta"];return _.set(f,o(r),l({},u,{".meta":l({},a,i)})),k(r)}if(t){var s=w(t);s.meta=l(s.meta,i)}});s();var T=function(){return f},z=j.instrumentConformed(function(e){var n=e.register,r=e.retrieve;return n?u(n):r?i(r):void 0});z.get=R.instrumentConformed(i),z.set=P.instrumentConformed(u),z.clearRegistry=c,z.getRegistry=T,z.meta=D,n.getRegistry=T,n.clearRegistry=c,n.meta=D,n.default=z}).call(n,r(42))},function(e,n,r){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=r(83),i=t(o),u=r(5),a=r(19),s=r(21),c=r(22),f={Problem:r(2),Clause:r(1)},l=u(i.default,a,s,f,c);l.VERSION=r(82),e.exports=l,n.default=l},function(e,n,r){"use strict";function t(e,n,r){if("number"==typeof n&&(n=[n]),!n||0===n.length)return e;if(null==e)return r;if("string"==typeof n)return t(e,n.split("."),r);var o=i(n[0]),u=e[o];return void 0===u?r:1===n.length?u:t(e[o],n.slice(1),r)}function o(e,n,r){if("number"==typeof n&&(n=[n]),!n||0===n.length)return e;if("string"==typeof n)return o(e,n.split(".").map(i),r);var t=n[0],u=e[t];return 1===n.length?(e[t]=r,u):(void 0===u&&("number"==typeof n[1]?e[t]=[]:e[t]={}),o(e[t],n.slice(1),r))}function i(e){var n=parseInt(e);return n.toString()===e?n:e}e.exports={get:t,set:o}}])});