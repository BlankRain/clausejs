!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.S=r():e.S=r()}(this,function(){return function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var t={};return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,r,t){Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:t})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=76)}([function(e,r){"use strict";function t(e,r,t,u){if(this.isProblem=!0,4!==arguments.length)throw"Problem arg len err";this.val=e,this.name="Problem",this.failsPredicate=r,this.rawMsg=u,this.subproblems=t,this.constructMessage=function(r){if(Array.isArray(t)){if(0===t.length)return u+"; val: "+JSON.stringify(e);var s=t.map(function(e){return""+n(r)+e.constructMessage(r+1)+o(r)});return u+", because "+s.join(", ")}if("object"===("undefined"==typeof t?"undefined":i(t))){var s=[];for(var a in t)s.push(""+n(r)+a+": "+t[a].constructMessage(r+1)+o(r));return u+", because "+s.join(", ")}},this.message=this.constructMessage(0)}function n(e){return u[e]}function o(e){return u[u.length-e-1]}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u="❰❮❬❨❪﹙₍₎﹚❫❩❭❯❱";t.prototype=new Error,e.exports=t},function(e,r){"use strict";function t(e,r,t,n,o){if(5!==arguments.length)throw new Error("Wrong number of arguments ("+arguments.length+") passed to Spec constructor");if(!Array.isArray(r))throw new Error("Expect an array of specs");this.type=e,t&&(this.opts=t),n&&(this.conform=n),o&&(this.generate=o),this.exprs=r}e.exports=t},function(e,r,t){"use strict";function n(e){return e instanceof o}var o=t(0);e.exports=n},function(e,r,t){"use strict";function n(e){return!!e&&e instanceof o}var o=t(1);e.exports=n},function(e,r){"use strict";function t(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function n(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(r).map(function(e){return r[e]});if("0123456789"!==n.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}var o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=n()?Object.assign:function(e,r){for(var n,u,s=t(e),a=1;a<arguments.length;a++){n=Object(arguments[a]);for(var c in n)o.call(n,c)&&(s[c]=n[c]);if(Object.getOwnPropertySymbols){u=Object.getOwnPropertySymbols(n);for(var f=0;f<u.length;f++)i.call(n,u[f])&&(s[u[f]]=n[u[f]])}}return s}},function(e,r,t){"use strict";function n(e){if(s(e)||a(e)||c(e))return e;if(u(e))return o(e);throw new Error("Expression must either be a Spec object or a predication function that returns true or false. ")}function o(e){return new f(v,[e],null,i(e),null)}function i(e){return function(r){return e(r)?r:new p(r,e,[],"Predicate "+l(e)+" returns false")}}var u=t(8),s=t(3),a=t(12),c=t(31),f=t(1),p=t(0),l=t(13),v="PRED";e.exports=n},function(e,r){"use strict";function t(e){return null!==e&&void 0!==e&&e.constructor===String}e.exports=t},function(e,r,t){"use strict";function n(e,r,t){var n=t.phase,u=(t.conform,t.instrument,o(e));if(n){if(u[n])return u[n](r,t);throw"!"}var s=u.trailblaze(r,i({phase:"trailblaze"},t));return h(s)?s:u.reconstruct(s,i({phase:"reconstruct"},t))}function o(e){var r,t=m(e);if(["OR","CAT","Z_OR_M","O_OR_M","Z_OR_O"].indexOf(t.type)>=0)r=u;else if(["COLL_OF"].indexOf(t.type)>=0)r=l;else if("PRED"===t.type)r=s;else if("WALL"===t.type)r=a;else if("PROPS"===t.type)r=f;else if("AND"===t.type)r=p;else if("SpecRef"===t.type)r=v;else if("Delayed"===t.type)r=d;else{if("FSPEC"!==t.type)throw"unsupported type "+t.type;r=c}var o=r(t,n);return o}var i=t(4),u=t(60),s=t(61),a=t(64),c=t(59),f=t(62),p=t(56),l=t(57),v=t(63),d=t(58),m=t(5),h=t(2);e.exports=n},function(e,r,t){"use strict";function n(e){return o(e)}var o=t(17);t(1);e.exports=n},function(e,r,t){"use strict";function n(e){var r=new o("FSPEC",[],e,null,null);return r.instrumentConformed=function(e){return i(r,e,{conform:!0,instrument:!0})},r.instrument=function(e){return i(r,e,{conform:!1,instrument:!0})},r}var o=t(1),i=t(7);e.exports=n},function(e,r,t){"use strict";function n(e){return v(e,function(r){var t;if(r.named){t=r.named;var n=t.map(function(e){var r=e.expr,t=c(r);return i({},e,{expr:t,spec:void 0,pred:void 0,specRef:void 0,delayedSpec:void 0})}),o=new u(e,n,null,null,null);return o.conform=function(e){return g(o,e,{conform:!0})},o}if(r.unnamed){t=r.unnamed;var n=t.map(function(e){if(e.spec){var r=e.spec;return i({},e,{expr:r,spec:void 0})}if(e.pred){var r=y(e.pred);return i({},e,{expr:r,pred:void 0})}if(e.specRef){var r=e.specRef;return i({},e,{expr:r,specRef:void 0})}if(e.delayedSpec){var r=e.delayedSpec;return i({},e,{expr:r,delayedSpec:void 0})}throw console.error(e),"Not implemented"}),o=new u(e,n,null,null,null);return o.conform=function(e){return g(o,e,{conform:!0})},o}})}function o(e){return v(e,function(r){var t,n=r.expr,o=r.opts;if(n.spec)t=n.spec;else if(n.pred)t=y(n.pred);else if(n.specRef)t=n.specRef;else{if(!n.delayedSpec)throw"internal err";t=n.delayedSpec}var i=new u(e,[y(t)],o,null,null);return i.conform=function(e){return g(i,e,{conform:!0})},i})}var i=t(4),u=t(1),s=t(3),a=t(8),c=t(19),f=t(27),p=t(6),l=t(54),v=t(33),d=t(12),m=t(31),h=t(37),y=t(5),x=t(9),g=t(7),b=y(s),O=y(l),S=n(h.CAT),w=n(h.OR),_=o(h.Z_OR_M),R=o(h.O_OR_M),E=o(h.Z_OR_O),P=o(h.COLL_OF),A=w({named:[{name:"specRef",expr:{spec:d}},{name:"pred",expr:{pred:a}},{name:"delayedSpec",expr:{spec:m}},{name:"spec",expr:{pred:s}}]}),j=S({named:[{name:"name",expr:{spec:O}},{name:"expr",expr:{spec:A}}]}),k=S({named:[{name:"name",expr:{spec:O}},{name:"comment",expr:{spec:p}},{name:"expr",expr:{spec:A}}]}),M=w({unnamed:[{spec:j},{spec:k}]}),N=w({named:[{name:"named",expr:{spec:w({unnamed:[{spec:_({expr:{spec:M}})},{spec:P({expr:{spec:M}})}]})}},{name:"unnamed",expr:{spec:_({expr:{spec:A}})}}]}),C={args:N,ret:b},F={args:S({named:[{name:"expr",expr:{spec:A}},{name:"opts",expr:{spec:E({expr:{pred:f}})}}]}),ret:b},z=x(F).instrumentConformed(P),D={cat:x(C).instrumentConformed(S),or:x(C).instrumentConformed(w),zeroOrMore:x(F).instrumentConformed(_),zeroOrOne:x(F).instrumentConformed(E),oneOrMore:x(F).instrumentConformed(R),ExprSpec:A,collOf:z,arrayOf:z};D.alt=D.or,D["*"]=D.zeroOrMore,D["+"]=D.oneOrMore,D["?"]=D.zeroOrOne,e.exports=D;w({named:[{name:"named",expr:{spec:w({unnamed:[{spec:_({expr:{spec:M}})},{spec:P({expr:{spec:M}})}]})}},{name:"unnamed",expr:{spec:_({expr:{spec:A}})}}]})},function(e,r){"use strict";e.exports=function(e){return void 0===e}},function(e,r,t){"use strict";var n=t(24);e.exports=function(e){return e instanceof n}},function(e,r){"use strict";function t(e){var r=e.toString();return r=r.substr("function ".length),r=r.substr(0,r.indexOf("("))}e.exports=t},function(e,r,t){"use strict";var n=t(4),o=t(10),i=t(21),u=i.props,s=i.keys,a={and:t(35),any:t(36),fspec:t(9),wall:t(22),spec:t(22)},c=n({},o,{props:u,keys:s},a);e.exports=c},function(e,r,t){"use strict";var n=t(26),o=t(46),i=t(25),u=t(44),s=t(17),a=t(27),c=t(42),f=t(28),p=t(6),l=t(45),v=t(43),d=t(48),m=Array.isArray,h={isNull:t(47),isUndefined:t(11),notEmpty:t(49),isBool:u,isBoolean:u,isFn:s,isFunction:s,isNum:n,isNumber:n,isNatInt:o,isNaturalNumber:o,isInt:i,isInteger:i,isObj:a,isObject:a,isStr:p,isString:p,isArray:m,isArr:m,equals:c,equalsTo:c,eq:c,oneOf:f,isDate:l,instanceOf:v,isUuid:d,isUUID:d};h.default=h,e.exports=h},function(e,r,t){"use strict";e.exports={conform:t(18),isValid:t(55),isNamespacePath:t(53),identity:t(30),isProblem:t(2),delayed:t(51),enforce:t(52),isExpr:t(32),isSpec:t(3),isSpecRef:t(12)}},function(e,r){"use strict";function t(e){var r={};return(e||!1)&&"[object Function]"===r.toString.call(e)}e.exports=t},function(e,r,t){"use strict";function n(e,r){if(e&&o(e)){var t=e.conform(r);return t}throw new Error("Expression needs to be of type Spec. expression: "+e+", offending value: "+r)}var o=t(3);e.exports=n},function(e,r,t){"use strict";var n=t(5);e.exports=function(e){if(e.spec)return e.spec;if(e.pred)return n(e.pred);if(e.specRef)return e.specRef;if(e.delayedSpec)return e.delayedSpec;throw console.error(e),"Not implemented"}},function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=t(34),i=n(o),u=t(4),s=t(14),a=t(16),c=t(15),f={Problem:t(0),Spec:t(1)},p=u(i.default,s,a,f,c);p.default=p,e.exports=p},function(e,r,t){"use strict";function n(e){return s(e)}function o(e){var r=new i(y,[e],null,null,null);return r.conform=function(e){return m(r,e,{conform:!0})},r}var i=t(1),u=t(3),s=t(6),a=(t(17),t(28)),c=t(5),f=t(10),p=f.cat,l=f.or,v=f.zeroOrMore,d=f.ExprSpec,m=t(7),h=t(9),y="PROPS",x=o({propArgs:{optionalFields:{opt:{fieldDefs:{fields:{fields:{keyValExprPair:{keySpecAlts:{spec:c(s)},valSpecAlts:{spec:l("valSpecAltsOnly",d,"keyValExprPair",p("keySpecAlts",d,"valSpecAlts",d))}}}}}}}}}),g=v(n),b=l("keyList",g,"fieldDefs",x),O=o({propArgs:{optionalFields:{opt:{fieldDefs:{fields:{requiredFields:{keyValExprPair:{keySpecAlts:{pred:a("req","required")},valSpecAlts:{spec:b}}},optionalFields:{keyValExprPair:{keySpecAlts:{pred:a("opt","optional")},valSpecAlts:{spec:b}}}}}}}}}),S=h({args:p("propArgs",O),ret:u}),w=S.instrumentConformed(o);e.exports={props:w,keys:w}},function(e,r,t){"use strict";function n(e){var r=u(e),t=new o("WALL",[r],null,null,null);return t.conform=function(e){return f(t,e,{conform:!0})},t}var o=t(1),i=t(3),u=t(5),s=t(10),a=s.cat,c=(s.ExprSpec,t(9)),f=t(7),p=c({args:a(i),ret:i});e.exports=p.instrument(n)},function(e,r){"use strict";function t(e){var r=e.getFn;this.type="Delayed",this.get=r;var t=this;["conform","instrument"].forEach(function(e){t[e]=function(t){var n=r();return n[e].call(this,t)}})}e.exports=t},function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var r=e.ref,t=e.getFn,n=e.conformFn;this.type="SpecRef",this.get=t,this.conform=n,this.ref=r}var i=t(1),u=n(i);o.prototype=Object.create(u.default.prototype),e.exports=o},function(e,r){"use strict";function t(e){return"number"==typeof e&&(Math.floor(e)===e&&e!==1/0)}e.exports=t},function(e,r){"use strict";function t(e){return"number"==typeof e}e.exports=t},function(e,r){"use strict";function t(e){return"object"===("undefined"==typeof e?"undefined":n(e))&&null!==e}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=t},function(e,r){"use strict";e.exports=function(e){var e;if(1===arguments.length&&Array.isArray(arguments[0]))e=arguments[0];else{if(!(arguments.length>0))throw new Error("Items list is required.");e=Array.from(arguments)}return function(r){return e.indexOf(r)>=0}}},function(e,r,t){"use strict";function n(e){return!!/^[^.@%\&\*#]+/.test(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.NamespaceObjSpec=r.MetaFnSpec=r.isNamespacePath=r.NamespaceFnSpec=r.isSpecRef=void 0;var o=t(14),i=t(16),u=t(15),s=(0,o.or)(".expr",(0,i.delayed)(function(){return o.ExprSpec})),a=(0,o.fspec)({args:(0,o.or)("register",(0,o.cat)("path",i.isNamespacePath,"val",s),"retrieve",(0,o.cat)("path",i.isNamespacePath)),ret:(0,o.or)(i.isSpecRef,i.isExpr)}),c=(0,o.fspec)({args:(0,o.cat)("source",(0,o.or)("namespacePath",i.isNamespacePath,"expression",i.isExpr),"metaObj",u.isObj),ret:i.isExpr}),f=(0,o.props)({optional:{subNamespaces:[n,(0,i.delayed)(function(){return f})],".meta":u.isObj,".expr":i.isExpr}});r.isSpecRef=i.isSpecRef,r.NamespaceFnSpec=a,r.isNamespacePath=i.isNamespacePath,r.MetaFnSpec=c,r.NamespaceObjSpec=f},function(e,r){"use strict";function t(e){return e}e.exports=t},function(e,r,t){"use strict";var n=t(23);e.exports=function(e){return e instanceof n}},function(e,r,t){"use strict";function n(e){return o(e)||i(e)||u(e)}var o=t(8),i=t(3),u=t(12);e.exports=n},function(e,r){"use strict";function t(e,r,t){return e?new Function("action","return function "+e+(t||"")+"(){ return action.apply(this, arguments); };")(r):r}e.exports=t},function(e,r,t){"use strict";(function(e){function n(e){var r=function(r){var t=c;t=r?r+e:e;var n=v.get(c,o(t));return n?d(n[".expr"],n[".meta"]):void 0},t=new m({ref:e,getFn:r,conformFn:null});return t.conform=function(e){var t=r();return O(t,e,{conform:!0})},t}function o(e){return e.replace(/^(.+)(\/)(.+)$/,"$1.$3").replace(/^\//,"")}function i(e){var r;if(e.register){var t=e.register,n=t.path,o=t.val;r=u(n,o)}else if(e.retrieve){var i=e.retrieve.path,s=S(i);r=s}return r}function u(e,r){if(r[".expr"]){var t=r[".expr"];if(t.spec||t.pred){var n=t.spec||t.pred;return _(e,{".expr":n}),n}throw console.error(t),"!"}if(!r.partialRefMap)throw console.error(r),"!";var o=r.partialRefMap.refDefs;for(var i in o)if(o.hasOwnProperty(i)){u(o[i])}}function s(){return c||a(),c}function a(){c=e[R]={}}Object.defineProperty(r,"__esModule",{value:!0});var c,f=t(14),p=t(16),l=t(29),v=t(65),d=t(4),m=t(24),h=t(21),y=h.props,x=t(3),g=t(8),b=t(11),O=t(7),S=(0,f.fspec)({args:(0,f.cat)(p.isNamespacePath),ret:p.isSpecRef}).instrument(n),w=y({req:{".expr":(0,f.or)(x,g)}}),_=(0,f.fspec)({args:(0,f.cat)(p.isNamespacePath,w),ret:b}).instrument(function(e,r){s();var t=v.get(c,o(e));v.set(c,o(e),d({},t,r))}),R="___SPECKY_REGISTRY",E=l.MetaFnSpec.instrumentConformed(function(e){var r=e.source,t=r.namespacePath,n=r.expression,i=e.metaObj;if(t){var u=v.get(c,o(t)),s=u&&u[".meta"];return v.set(c,o(t),d({},u,{".meta":d({},s,i)})),S(t)}if(n){var a=coerceIntoSpec(n);a.meta=d(a.meta,i)}});s();var P=l.NamespaceFnSpec.instrumentConformed(i);P.clearRegistry=a,P.getRegistry=function(){return c},P.meta=E,r.default=P}).call(r,t(66))},function(e,r,t){"use strict";function n(e){var r=e.exprs,t=new u("AND",r,null,null,null);return t.conform=function(e){return l(t,e,{conform:!0})},t}var o=t(15),i=(o.isBool,o.isFn,t(32),t(3)),u=(t(2),t(1)),s=(t(0),t(10)),a=s.oneOrMore,c=(s.zeroOrOne,s.or,s.cat),f=s.ExprSpec,p=t(9),l=t(7),v=p({args:c("exprs",a(f)),ret:i});e.exports=v.instrumentConformed(n)},function(e,r,t){"use strict";function n(){return new o(u,[],null,i,null)}var o=t(1),i=t(30),u="ANY";e.exports=n},function(e,r){"use strict";e.exports={CAT:"CAT",OR:"OR",Z_OR_M:"Z_OR_M",Z_OR_O:"Z_OR_O",O_OR_M:"O_OR_M",PRED:"PRED",COLL_OF:"COLL_OF"}},function(e,r,t){"use strict";function n(e){var r;if(null===e.type)throw"Spec has no type: "+e;r=e.type in a?a[e.type]:a.PRED;var t=r(e);return t}function o(e){return new u("ROOT",[e],null,null,null)}var i=t(39),u=t(1),s=function(e){for(var r=0,t=[e.head],n=[];t.length>0;){var o=t.pop();null===o.index&&(o.index=r,r++,o.transitions.forEach(function(e){t.push(e.target)}),n.push(o))}return n},a={},c=function(e){return function(r){var t=n(r.exprs[0]);return e(t)}},f=function(e){return function(r){var t=r.exprs.map(function(e){var r=n(e.expr);return r.name=e.name,r});return e(t)}};["ROOT","Z_OR_M","O_OR_M","Z_OR_O"].forEach(function(e){a[e]=c(i[e])}),["OR","CAT"].forEach(function(e){a[e]=f(i[e])}),a.PRED=function(e){return i.PRED(e)};var p=function(e){var r,t=o(e),i=n(t),u=s(i),a=u.length,c={};return u.forEach(function(e){0===e.transitions.length&&(r=e.index);var t={};e.transitions.forEach(function(e){t[e.target.index]=e.spec}),c[e.index.toString()]=t}),{initialState:0,numStates:a,finalState:r,transitions:c,expression:e}};e.exports=p},function(e,r){"use strict";function t(e,r){e.forEach(function(e){e.target=r})}function n(){return{isEpsilon:!0}}function o(e,r,t,o){var i=n();return i.name=r,i.op=t,i.group=o,i.dir=e,i}function i(e,r){var t=a(e,r.head),n=s([t]),o=c(n,r.tails);return o}function u(e,r){var n=a(e,null),o=s([n],null);t(r.tails,o);var i=c(r.head,[n]);return i}var s=function(e,r){return{transitions:null===e?[]:e,index:r||null}},a=function(e,r){return{spec:e,target:r}},c=function(e,r){return{head:e,tails:r}},f=function(e,r,t){var n=c(r,t);return n.name=e,n},p={};p.PRED=function(e){var r=a(e,null),t=s([r],null),n=[r],o=c(t,n);return o},p.CAT=function(e){var r=function(e,r){t(e.tails,r.head);var n=e.head,o=r.tails,i=c(n,o);return i};e=e.map(function(e){var r=a(o("out",e.name,"CAT"),null),n=s([r]);t(e.tails,n);var i=e.head.transitions.map(function(r){var t=s([r]),n=a(o("in",e.name,"CAT"),t);return n}),u=s(i),c=f(e.name,u,[r]);return c});var p;if(e.length>0)p=e.reduce(r);else{var l=n(),v=a(l,null),d=s([v]);p=c(d,[v])}return p=i(o("multi_enter",null,"CAT","in"),p),p=u(o("multi_exit",null,"CAT","out"),p)},p.OR=function(e){e=e.map(function(e){var r=o("out",e.name,"OR"),n=a(r,null),i=s([n]);t(e.tails,i);var u=a(o("in",e.name,"OR"),e.head),c=s([u]),p=f(e.name,c,[n]);return p});var r=function(e,r){var t=e.head.transitions.concat(r.head.transitions),n=s(t),o=e.tails.concat(r.tails),i=f(e.name,n,o);return i},n=e.reduce(r);return n=i(o("enter",null,"OR"),n),n=u(o("exit",null,"OR"),n)},p.Z_OR_M=function(e){var r="Z_OR_M",f=a(o("loop",null,r),e.head),p=a(n(),null),l=s([f,p]);t(e.tails,l);var v=c(l,[p]),d=v.head.transitions.map(function(e){var r=s([e]),t=a(n(),r);return t}),m=s(d);return v=c(m,v.tails),v=i(o("maybe_enter",null,r,"in"),v),v=u(o("maybe_exit",null,r,"out"),v)},p.O_OR_M=function(e){var r="O_OR_M",f=a(o("loop",null,r),e.head),p=a(n(),null),l=s([f,p]);t(e.tails,l);var v=c(e.head,[p]);return v=i(o("maybe_enter",null,r,"in"),v),v=u(o("maybe_exit",null,r,"out"),v)},p.Z_OR_O=function(e){var r="Z_OR_O",t=a(o("loop",null,r),e.head),f=a(n(),null),p=s([t,f]),l=e.tails.concat([f]),v=c(p,l);return v=i(o("maybe_single_enter",null,r),v),v=u(o("maybe_single_exit",null,r),v)},p.ROOT=function(e){var r=s(null,null);return t(e.tails,r),c(e.head,[])},e.exports=p},function(e,r,t){"use strict";function n(e,r,t){var n=t.conform;!e||!e.forEach;var d=[],m={};if(e.forEach(function(e){if(e.move)switch(e.move.dir){case"enter":d.push(a);break;case"multi_enter":d.push(c);break;case"maybe_enter":d.push(f);break;case"maybe_single_enter":d.push(p);break;case"in":d.push(new l(e.move.name));break;case"loop":null!==d[d.length-1]&&d.push(s);break;case"pred":var m=r(e.spec,e.guide,t);d.push(m);break;case"out":var h=d.pop();if(!(h instanceof l)){var y,x=d.pop().value;null!==x&&void 0!==x&&n?(y={},u(h)||(y[x]=h)):y=new v(h),d.push(y)}break;case"maybe_single_exit":for(var g=d.pop(),b=null;g!==p;)g!==s&&(b=g),g=d.pop();null===b&&(b=void 0),d.push(b);break;case"maybe_exit":for(var g=d.pop(),b=null;g!==f;)g!==s&&(b=o(b,g)),g=d.pop();null===b&&(b=[]),d.push(b);break;case"multi_exit":for(var g=d.pop(),b=null;g!==c;)b=g instanceof v?null===b?[g.value]:[g.value].concat(b):i({},g,b),g=d.pop();null===b&&(b=[]),d.push(b);break;case"exit":for(var g=d.pop(),b=null;g!==a;)b=g instanceof v?null===b?g.value:[g.value].concat(b):i({},g,b),g=d.pop();null===b&&(b=[]),d.push(b);break;default:throw console.error(e),"FUUU"}}),1!==d.length)throw console.error("valStack",d),"!valStack.length";var m=d.pop();return m}function o(e,r){var t;return t=null===e?[r]:Array.isArray(e)?[r].concat(e):[r,e]}var i=t(4),u=(t(0),t(11)),s=function(){},a=function(){},c=function(){},f=function(){},p=function(){},l=function(e){this.value=e},v=function(e){this.value=e};e.exports=n},function(e,r,t){"use strict";function n(e,r,t,n){for(var s,a={matched:!1,chain:null},c={state:0,offset:0,leftOff:0,input:[r],groupCount:0,arrayed:!1},f=[c];f.length>0;){var p=f.shift(),l=p.offset,v=p.leftOff,s=p.input,d=p.groupCount,m=p.arrayed;if(p.state===e.finalState&&l===s.length)return a.matched=!0,a.chain=o(e,p,t,n),a;for(var h in e.transitions[p.state]){var y=parseInt(h),x=s[l],g=e.transitions[p.state][y];"in"===g.group?(0===d&&(Array.isArray(s[0])||u(s[0]))&&(s=s[0],l=0,m=!0),d+=1):"out"===g.group&&(d-=1,0===d&&(m&&(l=l===s.length?1:0,s=[s]),m=!1));var b,O;b=g.isEpsilon?l:l+1;var S,w;b<=s.length&&(g.isEpsilon?(O=g.dir?{dir:g.dir,name:g.name,op:g.op,group:g.group}:null,w={input:s,groupCount:d,arrayed:m,leftOff:v,state:y,offset:b,move:O,spec:g,prev:p,isEpsilon:!0},f.push(w)):(S=t(g,x,n),i(S)?a.lastProblem=S:l<s.length&&(O={dir:"pred"},w={input:s,groupCount:d,arrayed:m,leftOff:v,state:y,offset:b,move:O,prev:p,isEpsilon:!1,spec:g,guide:S},f.push(w))))}}return a}function o(e,r,t,n){for(var o,i=[],u=r;u;){if(!o||u.state!==o.state&&u.move){var s={isEpsilon:u.isEpsilon,move:u.move,state:u.state};u.isEpsilon||(s.guide=u.guide,s.spec=u.spec),i.unshift(s)}o=u,u=u.prev}return i}var i=t(2),u=t(6);e.exports=n},function(e,r){"use strict";e.exports=function(e){return function(r){return r===e}}},function(e,r){"use strict";e.exports=function(e){return function(r){return r instanceof e}}},function(e,r){"use strict";function t(e){return"boolean"==typeof e}e.exports=t},function(e,r){"use strict";e.exports=function(e){return e&&e instanceof Date&&!isNaN(e.valueOf())}},function(e,r,t){"use strict";function n(e){return o(e)&&e>=0}var o=t(25);e.exports=n},function(e,r){"use strict";function t(e){return null===e}e.exports=t},function(e,r){"use strict";e.exports=function(e){return!!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}},function(e,r){"use strict";e.exports=function(e){return!!e&&0!==e.length}},function(e,r){"use strict";function t(e){throw e}e.exports=t},function(e,r,t){"use strict";function n(e){return new o({getFn:e})}var o=t(23);e.exports=n},function(e,r,t){"use strict";var n=t(2),o=t(18);e.exports=function(e,r){var t=o(e,r);if(n(t))throw t}},function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return/^[a-zA-Z0-9\-_\.]*\/([a-zA-Z0-9\-_]+)$/.test(e)}var i=t(6);n(i);e.exports=o},function(e,r,t){"use strict";var n=t(6);e.exports=function(e){return n(e)}},function(e,r,t){"use strict";function n(e,r){if(e)return u(e)?!o(s(e,r)):!i(e)||e(r);throw new Error("Spec is required")}var o=(t(0),t(2)),i=t(8),u=t(3),s=t(18);e.exports=n},function(e,r,t){"use strict";function n(e,r){function t(e,t){for(var n=(t.trailblaze,e),u=[],a=0;a<s.length;a+=1)if(n=r(s[a],e,t),i(n)){u.push(n);break}return u&&0!==u.length?new o(e,s,u,"One or more expressions failed AND test"):n}function n(e,r){return e}var s=e.exprs.map(u);return{trailblaze:t,reconstruct:n}}var o=t(0),i=t(2),u=t(19);e.exports=n},function(e,r,t){"use strict";function n(e,r){function t(t,n){if(Array.isArray(t)){if(a){var c=a.maxCount,f=a.minCount;if(u(c)&&t.length>c)return new o(t,e,l,"collOf: collection size "+t.length+" exceeds maxCount "+c+".");if(u(f)&&t.length<f)return new o(t,e,l,"collOf: collection size "+t.length+" is less than minCount "+f+".")}for(var p=[],l=[],v=0;v<t.length;v+=1){var d=r(s,t[v],n);if(i(d)){l.push(d);break}p.push(d)}return l.length>0?new o(t,e,l,"One or more elements failed collOf test"):p}return new o(t,e,[],"collOf expects an array")}function n(e,t){for(var n=[],o=0;o<e.length;o+=1){var i=r(s,e[o],t);n.push(i)}return n}var s=e.exprs[0],a=e.opts;return{trailblaze:t,reconstruct:n}}var o=(t(5),t(0)),i=t(2),u=t(26);e.exports=n},function(e,r){"use strict";function t(e,r){function t(t,n){var o=e.get();if(o)return r(o,t,n)}return{trailblaze:t,reconstruct:t}}e.exports=t},function(e,r,t){"use strict";function n(e,r){function t(e){return e}function n(r,t){if(!r)return new i(r,e,[],"function is not specified");var n=t.conform,o=t.instrument;return n&&o?f(r,t):o?c(r,t):void 0}function c(e,r){var t=u(e),n=p(t,e,r),o=s(t,n,"__instrumented");return o}function f(e,r){var t=u(e),n=m(t,e,r),o=s(t,n,"__conformed");return o}function p(e,t){return function(){var n=Array.from(arguments),o=v(t,e,n),i=t.apply(this,o),u=d(t,e,i),s=r(y,n,{conform:!0,instrument:!0}),a=void 0;return a=x?r(x,i,{conform:!0,instrument:!0}):i,l(e,t,g,s,a),u}}function l(r,t,n,o,u){if(n){var s=n.call(null,o,u);if(!s){var c=new i(t,e,[],"Function "+r+" failed valiation on argument-return value relation");a(c)}}}function v(t,n,u){if(!y)return u;var s=r(y,u,{phase:"trailblaze"});if(!o(s))return r(y,s,{phase:"reconstruct",conform:!1,instrument:!0});var c=new i(u,e,[s],"Arguments "+JSON.stringify(u)+" for function "+n+" failed validation");a(c)}function d(t,n,u){if(!x)return u;var s=r(x,u,{phase:"trailblaze"});if(!o(s)){var c=r(x,s,{phase:"reconstruct",instrument:!0,conform:!1});return c}var f=new i(u,e,[s],"Return value "+u+" for function "+n+" is not valid.");a(f)}function m(e,t){return function(){var n=Array.from(arguments),u=r(y,n,{conform:!0,instrument:!0});if(o(u)){var s=new i(n,y,[u],"Arguments "+JSON.stringify(n)+" for function "+e+" is not valid");a(s)}var c=t.call(this,u),f=r(x,c,{conform:!0,instrument:!0});return d(t,e,c),l(e,t,g,u,f),c}}var h=e.opts,y=h.args,x=h.ret,g=h.fn;return{trailblaze:t,reconstruct:n}}var o=t(2),i=t(0),u=t(13),s=t(33),a=t(50);t(4);e.exports=n},function(e,r,t){"use strict";function n(e,r){function t(t,n){a||(a=u(e));var i=o(a,t,r,n),c=i.chain,f=i.matched,p=i.lastProblem;if(f===!0)return c;var l=[];return p&&l.push(p),new s(t,e,l,"Spec "+e.type+" did not match value")}function n(e,t){var n=i(e,r,t);return n}var a;return{trailblaze:t,reconstruct:n}}var o=t(41),i=t(40),u=t(38),s=t(0);t(2);e.exports=n},function(e,r,t){"use strict";function n(e,r){function t(r,t){var n=(t.conform,t.instrument,t.trailblaze,e.exprs[0]);return n(r)?r:new i(r,e,[],"Predicate "+o(n)+"() returns false")}function n(e,r){return e}return{trailblaze:t,reconstruct:n}}var o=t(13),i=t(0);e.exports=n},function(e,r,t){"use strict";function n(e,r){function t(t,n){function o(e){e:for(var o in e.fields)if(e.fields.hasOwnProperty(o)){var i=e.fields[o],u=s(t,o,i,r,n),a=u.noop,c=u.problem,f=u.singleMatch,p=u.groupMatch;if(c){y.push([o,c]);break e}if(f)x.singles.push(f);else if(p)p.matchedKeys.length>0&&x.groups.push(p);else if(!a)throw"!"}}if(["object","function"].indexOf("undefined"==typeof t?"undefined":f(t))<0)return new d(t,e,[],"Value is not an object");a||(a=i(l,m,r,n));var u=a(t);if(p(u))return u;var v,h,y=[],x={val:t,groups:[],singles:[]};l&&(v=l.fieldDefs,h=l.keyList),v&&o(v);var g,b;if(m&&(g=m.fieldDefs,b=m.keyList),g&&o(g,!0),y.length>0){for(var O={},S=[],w=0;w<y.length;w++){var _=c(y[w],2),R=_[0],E=_[1];S.push(R),O[R]=E}var P=new d(t,e,O,"At least one property failed validation: "+S.join(", "));return P}return x}function n(e,t){var n,i,s=e.val,a=e.singles,c=e.groups,f={walkOpts:t},p=t.instrument;l&&(n=l.fieldDefs,i=l.keyList);var d;return d=p?s:v({},s),a.forEach(function(e){o(d,e,r,t)}),c.forEach(function(e){var n=e.name,i=e.matchedKeys;if(f){d[n]={};var s=[];i.forEach(function(e){o(d[n],e,r,t),s.push(e.key)}),u(d,s)}else i.forEach(function(e){o(d,e,r,t)})}),d}var a,l,m,h=e.exprs[0].propArgs,y=h.requiredFields,x=h.optionalFields;return y&&(l=y.req||y.required),x&&(m=x.opt||x.optional),{trailblaze:t,reconstruct:n}}function o(e,r,t,n){var o=r.key,i=r.spec,u=r.guide;e[o]=t(i,u,n)}function i(e,r,t,n){return function(r){if(e){var o,i=[],u=e.fieldDefs,s=e.keyList;if(u){o=[];for(var c in u.fields)u.fields.hasOwnProperty(c)&&o.push(c)}else{if(!s)throw"unsupported";o=[].concat(s)}for(var f=0;f<o.length;f++){var c=o[f];if(u&&u.fields[c].keyValExprPair){var l=!1;e:for(var v in r)if(r.hasOwnProperty(v)){var m=a(v,u.fields[c].keyValExprPair.keySpecAlts,t,n);if(!p(m)){l=!0;break e}}l||i.push(c)}else if(u&&u.fields[c].valSpecAltsOnly)if(r.hasOwnProperty(c)){var m=a(r[c],u.fields[c].valSpecAltsOnly,t,n);p(m)&&i.push(c)}else i.push(c);else{if(!s)throw"!";void 0===r[c]&&i.push(c)}}if(i.length>0)return new d(r,e,[],"req: keys required: "+i.join(", "))}return r}}function u(e,r){for(var t=0;t<r.length;t++)delete e[[r[t]]]}function s(e,r,t,n,o){var i=t.valSpecAltsOnly,u=t.keyValExprPair;if(u){var s=[],c=u.keySpecAlts,f=u.valSpecAlts;e:for(var v in e)if(e.hasOwnProperty(v)){var d=a(v,c,n,o);if(!p(d)){if(e===e[v])continue e;var h=a(e[v],f,n,o);if(p(h))return{problem:h};s.push({key:v,spec:m(f),guide:h})}}return{groupMatch:{name:r,matchedKeys:s}}}if(i){var y=e[r];if(l(y)||e[r]===e)return{noop:!0};var x=a(y,i,n,o);return p(x)?{problem:x}:{singleMatch:{key:r,spec:m(i),guide:x}}}throw"!!"}function a(e,r,t,n){var o=m(r),i=t(o,e,n);return i}var c=function(){function e(e,r){var t=[],n=!0,o=!1,i=void 0;try{for(var u,s=e[Symbol.iterator]();!(n=(u=s.next()).done)&&(t.push(u.value),!r||t.length!==r);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=t(2),l=t(11),v=t(4),d=t(0),m=(t(5),t(19));e.exports=n},function(e,r){"use strict";function t(e,r){function t(t,n){var o=e.get();if(o)return r(o,t,n)}return{trailblaze:t,reconstruct:t}}e.exports=t},function(e,r,t){"use strict";function n(e,r){function t(t,n){var i=o(e.exprs,1),u=i[0];return r(u,t,n)}return{trailblaze:t,reconstruct:t}}var o=function(){function e(e,r){var t=[],n=!0,o=!1,i=void 0;try{for(var u,s=e[Symbol.iterator]();!(n=(u=s.next()).done)&&(t.push(u.value),!r||t.length!==r);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t(0);e.exports=n},function(e,r,t){var n,o,i;!function(t,u){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=u():(o=[],n=u,i="function"==typeof n?n.apply(r,o):n,!(void 0!==i&&(e.exports=i)))}(this,function(){"use strict";function e(e,r){return null!=e&&Object.prototype.hasOwnProperty.call(e,r)}function r(r){if(!r)return!0;if(a(r)&&0===r.length)return!0;if("string"!=typeof r){for(var t in r)if(e(r,t))return!1;return!0}return!1}function t(e){return s.call(e)}function n(e){return"object"==typeof e&&"[object Object]"===t(e)}function o(e){return"boolean"==typeof e||"[object Boolean]"===t(e)}function i(e){var r=parseInt(e);return r.toString()===e?r:e}function u(t){function u(r,n){if(t.includeInheritedProps||"number"==typeof n&&Array.isArray(r)||e(r,n))return r[n]}function s(e,r,t,n){if("number"==typeof r&&(r=[r]),!r||0===r.length)return e;if("string"==typeof r)return s(e,r.split(".").map(i),t,n);var o=r[0],a=u(e,o);return 1===r.length?(void 0!==a&&n||(e[o]=t),a):(void 0===a&&("number"==typeof r[1]?e[o]=[]:e[o]={}),s(e[o],r.slice(1),t,n))}t=t||{};var c=function(e){return Object.keys(c).reduce(function(r,t){return"create"===t?r:("function"==typeof c[t]&&(r[t]=c[t].bind(c,e)),r)},{})};return c.has=function(r,n){if("number"==typeof n?n=[n]:"string"==typeof n&&(n=n.split(".")),!n||0===n.length)return!!r;for(var o=0;o<n.length;o++){var u=i(n[o]);if(!("number"==typeof u&&a(r)&&u<r.length||(t.includeInheritedProps?u in Object(r):e(r,u))))return!1;r=r[u]}return!0},c.ensureExists=function(e,r,t){return s(e,r,t,!0)},c.set=function(e,r,t,n){return s(e,r,t,n)},c.insert=function(e,r,t,n){var o=c.get(e,r);n=~~n,a(o)||(o=[],c.set(e,r,o)),o.splice(n,0,t)},c.empty=function(t,i){if(!r(i)&&null!=t){var u,s;if(u=c.get(t,i)){if("string"==typeof u)return c.set(t,i,"");if(o(u))return c.set(t,i,!1);if("number"==typeof u)return c.set(t,i,0);if(a(u))u.length=0;else{if(!n(u))return c.set(t,i,null);for(s in u)e(u,s)&&delete u[s]}}}},c.push=function(e,r){var t=c.get(e,r);a(t)||(t=[],c.set(e,r,t)),t.push.apply(t,Array.prototype.slice.call(arguments,2))},c.coalesce=function(e,r,t){for(var n,o=0,i=r.length;o<i;o++)if(void 0!==(n=c.get(e,r[o])))return n;return t},c.get=function(e,r,t){
if("number"==typeof r&&(r=[r]),!r||0===r.length)return e;if(null==e)return t;if("string"==typeof r)return c.get(e,r.split("."),t);var n=i(r[0]),o=u(e,n);return void 0===o?t:1===r.length?o:c.get(e[n],r.slice(1),t)},c.del=function(e,t){if("number"==typeof t&&(t=[t]),null==e)return e;if(r(t))return e;if("string"==typeof t)return c.del(e,t.split("."));var n=i(t[0]),o=u(e,n);if(null==o)return o;if(1===t.length)a(e)?e.splice(n,1):delete e[n];else if(void 0!==e[n])return c.del(e[n],t.slice(1));return e},c}var s=Object.prototype.toString,a=Array.isArray||function(e){return"[object Array]"===s.call(e)},c=u();return c.create=u,c.withInheritedProps=u({includeInheritedProps:!0}),c})},function(e,r){var t;t=function(){return this}();try{t=t||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(t=window)}e.exports=t},,function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,r,t){var n=e?e+"."+r:r,s="",a=[],c=void 0,f=void 0,p=void 0;for(var l in t)if(t.hasOwnProperty(l))switch(l){case"subNamespaces":p=t[l];for(var v in p)if(p.hasOwnProperty(v)){var d=o(n,v,p[v]);a.push(d)}break;case".nsComment":c="<p><i>"+t[l]+"</i></p>";break;case".meta":f=u(r,t[l],t[".expr"])}return f&&(s+=f),n&&(c||i(p))&&(s+="<h3>"+n+"</h3><hr />"),c&&(s+=c),a.length>0&&(s+=a.join("\n")),s}function i(e){return!!e&&Object.keys(e).filter(function(r){return e[r][".expr"]}).length>0}function u(e,r,t){if(!t)throw new Error("Expression "+e+" does not exist in the registry");var n=void 0;return n="FSPEC"===t.type?a(e,t,r):"<pre>"+JSON.stringify(r,null,2)+"</pre>","\n    <h5>"+(r[".name"]||e)+"</h5>\n    <i>Type: "+s(t)+"</i>\n    "+n+"\n    "}function s(e){return(0,m.default)(e)?e.type:(0,v.default)(e)?"Predicate "+(0,p.default)(e)+"()":void 0}function a(e,r,t){return"<pre>"+JSON.stringify(t,null,2)+"\n"+JSON.stringify(r,null,2)+"</pre>"}var c=t(29),f=t(13),p=n(f),l=t(8),v=n(l),d=t(3),m=n(d),h=function(e){var r=c.NamespaceObjSpec.conform(e),t=o(null,null,r);return t},y={gen:h};e.exports=y,e.exports.default=y},,function(e,r,t){"use strict";t(72)},function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o=t(20),i=n(o);t(73),r.default=i.default.getRegistry()},function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=t(20);n(o);(0,o.meta)("/Specky",{".name":"S",".args":{register:{".comment":"Registers a namespace path with an expression."},retrieve:{".comment":"Retrieves an expression by namespace path"}},".ret":{".comment":"Note: The returned Spec is not immediately resolved"}}),(0,o.meta)("specky.types/NamespacePath",{".comment":"Represents a namespace path.",".example":"com.xyz.awesomeApp/User"})},function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=t(20),i=n(o),u=t(29);(0,i.default)("/Specky",u.NamespaceFnSpec),(0,i.default)("specky.types/NamespacePath",u.isNamespacePath)},,,function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=t(20),i=(n(o),t(68)),u=n(i),s=t(71),a=n(s);t(70);var c=u.default.gen(a.default);document.getElementById("api").innerHTML=c}])});